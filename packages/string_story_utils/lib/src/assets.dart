// GENERATED CODE - DO NOT MODIFY BY HAND
// ignore_for_file: constant_identifier_names, non_constant_identifier_names
import 'dart:convert';

class Assets {
  static const String _assets_string_key_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdwYWNrYWdlOmNvbGxlY3Rpb24vY29sbGVjdGlvbi5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnN0cmluZ19zdG9yeS9zdHJpbmdfc3RvcnkuZGFydCc7CgplbnVtIFN0cmluZ0tleSB7Cnt7IyBpdGVtcyB9fSAge3tuYW1lfX0oJ3t7dmFsdWV9fScpe3t0ZXJtaW5hdG9yfX0Ke3svIGl0ZW1zIH19CgogIGZpbmFsIFN0cmluZyBrZXk7CgogIGNvbnN0IFN0cmluZ0tleSh0aGlzLmtleSk7Cn0KCmV4dGVuc2lvbiBTdHJpbmdLZXlFeHQgb24gU3RyaW5nS2V5IHsKICBzdGF0aWMgU3RyaW5nS2V5PyBmcm9tU3RyaW5nKFN0cmluZyB2YWx1ZSkgewogICAgZmluYWwga2V5ID0gdmFsdWUuc3BsaXQoIi4iKS5maXJzdDsKCiAgICBmaW5hbCBzaW1wbGVLZXkgPSBTdHJpbmdLZXkudmFsdWVzLmZpcnN0V2hlcmVPck51bGwoKGl0KSA9PiBpdC5rZXkgPT0ga2V5KTsKCiAgICBpZiAoc2ltcGxlS2V5ICE9IG51bGwpIHsKICAgICAgcmV0dXJuIHNpbXBsZUtleTsKICAgIH0KCiAgICBmaW5hbCBjb21wbGV4S2V5ID0gU3RyaW5nS2V5LnZhbHVlcy5maXJzdFdoZXJlT3JOdWxsKChpdCkgewogICAgICByZXR1cm4gaXQua2V5LnJlbW92ZVByZWZpeChrZXkpLnN0YXJ0c1dpdGgoIigiKTsKICAgIH0pOwoKICAgIHJldHVybiBjb21wbGV4S2V5OwogIH0KfQ==';
  static String get assets_string_key_mustache =>
      _decode(_assets_string_key_mustache);
  static const String _assets_string_story_core_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdwYWNrYWdlOmVxdWF0YWJsZS9lcXVhdGFibGUuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyL21hdGVyaWFsLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlcl9ibG9jL2ZsdXR0ZXJfYmxvYy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXJfaG9va3MvZmx1dHRlcl9ob29rcy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXJfbG9jYWxpemF0aW9ucy9mbHV0dGVyX2xvY2FsaXphdGlvbnMuZGFydCc7CmltcG9ydCAncGFja2FnZTp7e3BhY2thZ2VOYW1lfX0ve3t7c3RyaW5nU3Rvcnl9fX0vc3RyaW5nX3N0b3J5LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6e3twYWNrYWdlTmFtZX19L3t7e2kxOG59fX0vc3RyaW5ncy5nLmRhcnQnOwoKY2xhc3MgU3RyaW5nU3RvcnlTZWxlY3Rpb24gZXh0ZW5kcyBFcXVhdGFibGUgewogIGNvbnN0IFN0cmluZ1N0b3J5U2VsZWN0aW9uKHsKICAgIHJlcXVpcmVkIHRoaXMua2V5LAogIH0pOwoKICBmaW5hbCBTdHJpbmdLZXk/IGtleTsKCiAgQG92ZXJyaWRlCiAgTGlzdDxPYmplY3Q/PiBnZXQgcHJvcHMgPT4gWwogICAgICAgIGtleSwKICAgICAgXTsKCiAgc3RhdGljIFN0cmluZ1N0b3J5U2VsZWN0aW9uPyBtYXliZU9mKEJ1aWxkQ29udGV4dCBjb250ZXh0KSA9PgogICAgICBjb250ZXh0LnJlYWQ8U3RyaW5nU3RvcnlTZWxlY3Rpb24/PigpOwp9CgpjbGFzcyBTdHJpbmdTdG9yeSBleHRlbmRzIEVxdWF0YWJsZSB7CiAgY29uc3QgU3RyaW5nU3RvcnkoewogICAgcmVxdWlyZWQgdGhpcy5rZXlzLAogICAgcmVxdWlyZWQgdGhpcy50aXRsZSwKICAgIHJlcXVpcmVkIHRoaXMuYnVpbGRlciwKICB9KTsKCiAgZmluYWwgTGlzdDxTdHJpbmdLZXk+IGtleXM7CiAgZmluYWwgU3RyaW5nIHRpdGxlOwogIGZpbmFsIFdpZGdldEJ1aWxkZXIgYnVpbGRlcjsKCiAgQG92ZXJyaWRlCiAgTGlzdDxPYmplY3Q/PiBnZXQgcHJvcHMgPT4gW2tleXMsIHRpdGxlXTsKfQoKY2xhc3MgU3RyaW5nU3RvcnlBcHAgZXh0ZW5kcyBTdGF0ZWxlc3NXaWRnZXQgewogIGNvbnN0IFN0cmluZ1N0b3J5QXBwKHsKICAgIHN1cGVyLmtleSwKICAgIHJlcXVpcmVkIHRoaXMuYnVpbGRlciwKICAgIHRoaXMubmF2aWdhdG9yS2V5LAogICAgdGhpcy5saWdodFRoZW1lLAogICAgdGhpcy5kYXJrVGhlbWUsCiAgICB0aGlzLnRoZW1lTW9kZSwKICB9KTsKCiAgZmluYWwgV2lkZ2V0QnVpbGRlciBidWlsZGVyOwogIGZpbmFsIEdsb2JhbEtleTxOYXZpZ2F0b3JTdGF0ZT4/IG5hdmlnYXRvcktleTsKICBmaW5hbCBUaGVtZURhdGE/IGxpZ2h0VGhlbWU7CiAgZmluYWwgVGhlbWVEYXRhPyBkYXJrVGhlbWU7CiAgZmluYWwgVGhlbWVNb2RlPyB0aGVtZU1vZGU7CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgZmluYWwgbG9jYWxpemF0aW9uc0RlbGVnYXRlcyA9IFsKICAgICAgR2xvYmFsTWF0ZXJpYWxMb2NhbGl6YXRpb25zLmRlbGVnYXRlLAogICAgICBHbG9iYWxXaWRnZXRzTG9jYWxpemF0aW9ucy5kZWxlZ2F0ZSwKICAgICAgR2xvYmFsQ3VwZXJ0aW5vTG9jYWxpemF0aW9ucy5kZWxlZ2F0ZSwKICAgICAgX1N0cmluZ1N0b3J5RGVsZWdhdGUoY29udGV4dC5zdHJpbmdzKSwKICAgIF07CgogICAgcmV0dXJuIE1hdGVyaWFsQXBwKAogICAgICBuYXZpZ2F0b3JLZXk6IG5hdmlnYXRvcktleSwKICAgICAgdGhlbWU6IGxpZ2h0VGhlbWUgPz8gVGhlbWUub2YoY29udGV4dCksCiAgICAgIGRhcmtUaGVtZTogZGFya1RoZW1lLAogICAgICB0aGVtZU1vZGU6IHRoZW1lTW9kZSwKICAgICAgZGVidWdTaG93Q2hlY2tlZE1vZGVCYW5uZXI6IGZhbHNlLAogICAgICBsb2NhbGl6YXRpb25zRGVsZWdhdGVzOiBsb2NhbGl6YXRpb25zRGVsZWdhdGVzLAogICAgICBzdXBwb3J0ZWRMb2NhbGVzOiBBcHBMb2NhbGVVdGlscy5zdXBwb3J0ZWRMb2NhbGVzLAogICAgICBob21lOiBCdWlsZGVyKAogICAgICAgIGJ1aWxkZXI6IGJ1aWxkZXIsCiAgICAgICksCiAgICApOwogIH0KfQoKY2xhc3MgU3RyaW5nU3RvcnlBdXRvT3BlbiBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgY29uc3QgU3RyaW5nU3RvcnlBdXRvT3Blbih7CiAgICBzdXBlci5rZXksCiAgICByZXF1aXJlZCB0aGlzLm9uT3BlbiwKICAgIHRoaXMubmF2aWdhdG9yS2V5LAogIH0pOwoKICBmaW5hbCB2b2lkIEZ1bmN0aW9uKEJ1aWxkQ29udGV4dCBjb250ZXh0KSBvbk9wZW47CiAgZmluYWwgR2xvYmFsS2V5PE5hdmlnYXRvclN0YXRlPj8gbmF2aWdhdG9yS2V5OwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IF8pIHsKICAgIHJldHVybiBTdHJpbmdTdG9yeUFwcCgKICAgICAgbmF2aWdhdG9yS2V5OiBuYXZpZ2F0b3JLZXksCiAgICAgIGJ1aWxkZXI6IChfKSB7CiAgICAgICAgcmV0dXJuIFNjYWZmb2xkKAogICAgICAgICAgYm9keTogU2FmZUFyZWEoCiAgICAgICAgICAgIGNoaWxkOiBIb29rQnVpbGRlcigKICAgICAgICAgICAgICBidWlsZGVyOiAoY29udGV4dCkgewogICAgICAgICAgICAgICAgZmluYWwgZGlkT3BlbiA9IHVzZVJlZihmYWxzZSk7CgogICAgICAgICAgICAgICAgdXNlRWZmZWN0KCgpIHsKICAgICAgICAgICAgICAgICAgV2lkZ2V0c0JpbmRpbmcuaW5zdGFuY2UuYWRkUG9zdEZyYW1lQ2FsbGJhY2soKF8pIHsKICAgICAgICAgICAgICAgICAgICBvbk9wZW4oY29udGV4dCk7CiAgICAgICAgICAgICAgICAgICAgZGlkT3Blbi52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0sIFtdKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gY29uc3QgU2l6ZWRCb3guc2hyaW5rKCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKSwKICAgICAgICAgICksCiAgICAgICAgKTsKICAgICAgfSwKICAgICk7CiAgfQp9CgpjbGFzcyBfU3RyaW5nU3RvcnlEZWxlZ2F0ZSBleHRlbmRzIExvY2FsaXphdGlvbnNEZWxlZ2F0ZTxUcmFuc2xhdGlvbnM+IHsKICBmaW5hbCBTIHN0cmluZ3M7CgogIF9TdHJpbmdTdG9yeURlbGVnYXRlKHRoaXMuc3RyaW5ncyk7CgogIEBvdmVycmlkZQogIGJvb2wgaXNTdXBwb3J0ZWQoTG9jYWxlIGxvY2FsZSkgPT4gdHJ1ZTsKCiAgQG92ZXJyaWRlCiAgRnV0dXJlPFRyYW5zbGF0aW9ucz4gbG9hZChMb2NhbGUgbG9jYWxlKSBhc3luYyA9PiBzdHJpbmdzOwoKICBAb3ZlcnJpZGUKICBib29sIHNob3VsZFJlbG9hZChjb3ZhcmlhbnQgTG9jYWxpemF0aW9uc0RlbGVnYXRlPFRyYW5zbGF0aW9ucz4gb2xkKSA9PgogICAgICBvbGQgIT0gdGhpczsKfQo=';
  static String get assets_string_story_core_mustache =>
      _decode(_assets_string_story_core_mustache);
  static const String _assets_string_story_screen_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdwYWNrYWdlOmNvbGxlY3Rpb24vY29sbGVjdGlvbi5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmRldmljZV9mcmFtZS9kZXZpY2VfZnJhbWUuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyL21hdGVyaWFsLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlcl9ibG9jL2ZsdXR0ZXJfYmxvYy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXJfaG9va3MvZmx1dHRlcl9ob29rcy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnt7cGFja2FnZU5hbWV9fS97e3tzdHJpbmdTdG9yeX19fS9zdHJpbmdfc3RvcnkuZGFydCc7CmltcG9ydCAncGFja2FnZTpwcm92aWRlci9wcm92aWRlci5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnN0cmluZ19zdG9yeS9zdHJpbmdfc3RvcnkuZGFydCc7CgpjbGFzcyBTdHJpbmdTdG9yeVNjcmVlbiBleHRlbmRzIEhvb2tXaWRnZXQgewogIGNvbnN0IFN0cmluZ1N0b3J5U2NyZWVuKHsKICAgIHN1cGVyLmtleSwKICB9KTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICB1c2VFZmZlY3QoKCkgewogICAgICBTdHJpbmdTdG9yeVNlcnZpY2UuaW5zdGFuY2UuaW5BcHBFZGl0b3JDb25maWcub25FbnRlcj8uY2FsbCgpOwogICAgICByZXR1cm4gU3RyaW5nU3RvcnlTZXJ2aWNlLmluc3RhbmNlLmluQXBwRWRpdG9yQ29uZmlnLm9uRXhpdDsKICAgIH0sIFtdKTsKCiAgICByZXR1cm4gQmxvY1Byb3ZpZGVyKAogICAgICBjcmVhdGU6IChjb250ZXh0KSB7CiAgICAgICAgcmV0dXJuIFNsYW5nRWRpdG9yQ3ViaXQoCiAgICAgICAgICBiYXNlQ3ViaXQ6IGNvbnRleHQucmVhZDxTbGFuZ0Jhc2VDdWJpdD4oKSwKICAgICAgICAgIHNjb3BlZEtleXM6IHt9LAogICAgICAgICAgb3ZMb2NhbGU6IFN0cmluZ1N0b3J5U2VydmljZS5pbnN0YW5jZS5jb25maWcuYXBwTGFuZ3VhZ2VDb2RlLAogICAgICAgICk7CiAgICAgIH0sCiAgICAgIGNoaWxkOiBjb25zdCBfUGFuZXMoKSwKICAgICk7CiAgfQp9CgpjbGFzcyBfUGFuZXMgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBjb25zdCBfUGFuZXMoKTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBzaGFyZWQgPSB1c2VNZW1vaXplZCgoKSA9PiBfU2hhcmVkKGNvbnRleHQucmVhZCgpKSk7CiAgICB1c2VFZmZlY3QoKCkgewogICAgICByZXR1cm4gKCkgewogICAgICAgIHNoYXJlZC5kaXNwb3NlKCk7CiAgICAgIH07CiAgICB9LCBbc2hhcmVkXSk7CgogICAgZmluYWwgbG9nUGFuZUJ1aWxkZXIgPQogICAgICAgIFN0cmluZ1N0b3J5U2VydmljZS5pbnN0YW5jZS5pbkFwcEVkaXRvckNvbmZpZy5kZXZlbG9wZXJMb2dQYW5lQnVpbGRlcjsKCiAgICByZXR1cm4gUHJvdmlkZXIudmFsdWUoCiAgICAgIHZhbHVlOiBzaGFyZWQsCiAgICAgIGNoaWxkOiBIb29rQnVpbGRlcihidWlsZGVyOiAoY29udGV4dCkgewogICAgICAgIGZpbmFsIGlzUmVwb3J0aW5nID0gdXNlTGlzdGVuYWJsZShzaGFyZWQuaXNSZXBvcnRpbmcpLnZhbHVlOwogICAgICAgIGlmIChpc1JlcG9ydGluZykgewogICAgICAgICAgcmV0dXJuIFNjYWZmb2xkKAogICAgICAgICAgICBib2R5OiBSb3coCiAgICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICAgIEZsZXhpYmxlKAogICAgICAgICAgICAgICAgICBjaGlsZDogX0NvbnRlbnQoCiAgICAgICAgICAgICAgICAgICAgaXNNb2JpbGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGtleTogc2hhcmVkLmNvbnRlbnRLZXksCiAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgRmxleGlibGUoCiAgICAgICAgICAgICAgICAgICAgY2hpbGQ6IGxvZ1BhbmVCdWlsZGVyICE9IG51bGwKICAgICAgICAgICAgICAgICAgICAgICAgPyBCdWlsZGVyKGJ1aWxkZXI6IGxvZ1BhbmVCdWlsZGVyKQogICAgICAgICAgICAgICAgICAgICAgICA6IGNvbnN0IFBsYWNlaG9sZGVyKCkpCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgKSwKICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gU3RyaW5nU3RvcnlBZGFwdGl2ZUxheW91dCgKICAgICAgICAgIG1vYmlsZTogKF8pID0+IGNvbnN0IF9Nb2JpbGVDb250ZW50KCksCiAgICAgICAgICBkZXNrdG9wOiAoXykgPT4gU2NhZmZvbGQoCiAgICAgICAgICAgIGJvZHk6IFN0cmluZ1N0b3J5R29sZGVuUGFuZXMoCiAgICAgICAgICAgICAgICBmbGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgIHNob3dEaXZpZGVyOiB0cnVlLAogICAgICAgICAgICAgICAgc21hbGxlclBhbmU6IF9LZXlzVHJlZSgKICAgICAgICAgICAgICAgICAga2V5OiBzaGFyZWQua2V5c1RyZWVLZXksCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgYmlnZ2VyUGFuZTogX0NvbnRlbnQoCiAgICAgICAgICAgICAgICAgIGlzTW9iaWxlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAga2V5OiBzaGFyZWQuY29udGVudEtleSwKICAgICAgICAgICAgICAgICkpLAogICAgICAgICAgKSwKICAgICAgICApOwogICAgICB9KSwKICAgICk7CiAgfQp9CgpjbGFzcyBfS2V5c1RyZWUgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBjb25zdCBfS2V5c1RyZWUoewogICAgcmVxdWlyZWQgc3VwZXIua2V5LAogICAgdGhpcy5zZWFyY2hGYWRlQ29sb3JzLAogIH0pOwoKICBmaW5hbCBMaXN0PENvbG9yPj8gc2VhcmNoRmFkZUNvbG9yczsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBzaGFyZWQgPSBjb250ZXh0LnJlYWQ8X1NoYXJlZD4oKTsKICAgIGZpbmFsIFZhbHVlTm90aWZpZXI8X1N0b3J5U3RhdGU/PiBzdGF0ZSA9IHNoYXJlZC5zdGF0ZTsKICAgIHVzZUxpc3RlbmFibGUoc3RhdGUpOwoKICAgIHJldHVybiBMb2NhbGVFZGl0b3JXaWRnZXQoCiAgICAgIGtleTogc2hhcmVkLmxvY2FsZUVkaXRvcktleSwKICAgICAgaXNTZWFyY2hBdmFpbGFibGU6IHRydWUsCiAgICAgIHNob3dTY29wZWRWYWx1ZXM6IGZhbHNlLAogICAgICBzZWFyY2hGYWRlQ29sb3JzOiBzZWFyY2hGYWRlQ29sb3JzLAogICAgICBvbkpzb25QYXRoU2VsZWN0ZWQ6ICh2YWx1ZSkgewogICAgICAgIGZpbmFsIHNlbGVjdGVkU3RyaW5nS2V5ID0gU3RyaW5nS2V5RXh0LmZyb21TdHJpbmcodmFsdWUpOwogICAgICAgIHNoYXJlZC5zZXRBY3RpdmVTdG9yeShrZXk6IHNlbGVjdGVkU3RyaW5nS2V5KTsKCiAgICAgICAgY29udGV4dAogICAgICAgICAgICAucmVhZDxTbGFuZ0Jhc2VDdWJpdD4oKQogICAgICAgICAgICAuc2V0TGFzdFNlbGVjdGVkS2V5KHNlbGVjdGVkU3RyaW5nS2V5Py5rZXkpOwogICAgICB9LAogICAgKTsKICB9Cn0KCmNsYXNzIF9Db250ZW50IGV4dGVuZHMgSG9va1dpZGdldCB7CiAgY29uc3QgX0NvbnRlbnQoewogICAgcmVxdWlyZWQgc3VwZXIua2V5LAogICAgcmVxdWlyZWQgdGhpcy5pc01vYmlsZSwKICB9KTsKCiAgZmluYWwgYm9vbCBpc01vYmlsZTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBzaGFyZWQgPSBjb250ZXh0LnJlYWQ8X1NoYXJlZD4oKTsKCiAgICBmaW5hbCBzdGF0ZSA9IHVzZUxpc3RlbmFibGUoc2hhcmVkLnN0YXRlKS52YWx1ZTsKICAgIGZpbmFsIGlzUmVwb3J0aW5nID0gdXNlTGlzdGVuYWJsZShzaGFyZWQuaXNSZXBvcnRpbmcpLnZhbHVlOwoKICAgIGZpbmFsIHNob3dDb250cm9scyA9IChzdGF0ZT8uc2hvd0NvbnRyb2xzID8/IGZhbHNlKSAmJiAhaXNSZXBvcnRpbmc7CgogICAgZmluYWwgZ2xvYmFsS2V5ID0gdXNlTWVtb2l6ZWQoKCkgPT4gR2xvYmFsS2V5KCksIFsKICAgICAgc3RhdGU/LmVmZmVjdGl2ZVN0cmluZ1N0b3J5LAogICAgICBzdGF0ZT8uYWN0aXZlS2V5LAogICAgICBzdGF0ZT8ucmVmcmVzaENvdW50ZXIsCiAgICBdKTsKCiAgICB2b2lkIHByZXYoKSB7CiAgICAgIHNoYXJlZC5zdGF0ZS52YWx1ZSA9IHNoYXJlZC5zdGF0ZS52YWx1ZT8ucHJldigpOwogICAgfQoKICAgIHZvaWQgbmV4dCgpIHsKICAgICAgc2hhcmVkLnN0YXRlLnZhbHVlID0gc2hhcmVkLnN0YXRlLnZhbHVlPy5uZXh0KCk7CiAgICB9CgogICAgZmluYWwgZGlzYWJsZVByZXZpZXdGb2N1cyA9CiAgICAgICAgY29udGV4dC5zZWxlY3QoKFNsYW5nRWRpdG9yQ3ViaXQgYykgPT4gYy5zdGF0ZS5kaXNhYmxlUHJldmlld0ZvY3VzKTsKCiAgICByZXR1cm4gUHJvdmlkZXI8U3RyaW5nU3RvcnlTZWxlY3Rpb24+LnZhbHVlKAogICAgICB2YWx1ZTogU3RyaW5nU3RvcnlTZWxlY3Rpb24oa2V5OiBzdGF0ZT8uYWN0aXZlS2V5KSwKICAgICAgY2hpbGQ6IENvbHVtbigKICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgaWYgKCFpc01vYmlsZSkgLi4uWwogICAgICAgICAgICBjb25zdCBfQXBwQmFyKCksCiAgICAgICAgICAgIFNWX1MsCiAgICAgICAgICBdLAogICAgICAgICAgQ2VudGVyKGNoaWxkOiBUZXh0KHNoYXJlZC5zdGF0ZS52YWx1ZT8uZWZmZWN0aXZlVGl0bGUgPz8gIiIpKSwKICAgICAgICAgIFNWX1hTLAogICAgICAgICAgRXhwYW5kZWQoCiAgICAgICAgICAgIGNoaWxkOiBEZXZpY2VGcmFtZSgKICAgICAgICAgICAgICBkZXZpY2U6IERldmljZXMuaW9zLmlQaG9uZTEzLAogICAgICAgICAgICAgIHNjcmVlbjogSW5rV2VsbCgKICAgICAgICAgICAgICAgIG9uVGFwOiBkaXNhYmxlUHJldmlld0ZvY3VzCiAgICAgICAgICAgICAgICAgICAgPyAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVhZDxTbGFuZ0VkaXRvckN1Yml0PigpLmVuYWJsZUZvY3VzUHJldmlldygpOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIDogbnVsbCwKICAgICAgICAgICAgICAgIG9uTG9uZ1ByZXNzOiAoKSB7CiAgICAgICAgICAgICAgICAgIHNoYXJlZC5jdXJyZW50UmVwb3J0KCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY2hpbGQ6IElnbm9yZUZvY3VzKAogICAgICAgICAgICAgICAgICBpZ25vcmluZzogZGlzYWJsZVByZXZpZXdGb2N1cywKICAgICAgICAgICAgICAgICAgY2hpbGQ6IElnbm9yZVBvaW50ZXIoCiAgICAgICAgICAgICAgICAgICAgaWdub3Jpbmc6IGRpc2FibGVQcmV2aWV3Rm9jdXMsCiAgICAgICAgICAgICAgICAgICAgY2hpbGQ6IENvbG9yZWRCb3goCiAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogY29udGV4dC5jb2xvcnMuc3VyZmFjZSwKICAgICAgICAgICAgICAgICAgICAgIGNoaWxkOiBUcmFuc2xhdGlvblNjb3BlKAogICAgICAgICAgICAgICAgICAgICAgICBrZXk6IFZhbHVlS2V5KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU/LmVmZmVjdGl2ZVN0cmluZ1N0b3J5Py50aXRsZSA/PyAiTk8gU1RPUlkiKSwKICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdMYWJlbDoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlPy5lZmZlY3RpdmVTdHJpbmdTdG9yeT8udGl0bGUgPz8gIk5PIFNUT1JZIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGVLZXlzOiBzaGFyZWQuZ2V0U2NvcGVLZXlzQnlTdHJpbmdTdG9yeSgKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlPy5lZmZlY3RpdmVTdHJpbmdTdG9yeSksCiAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkOiBCdWlsZGVyKAogICAgICAgICAgICAgICAgICAgICAgICAgIGtleTogZ2xvYmFsS2V5LAogICAgICAgICAgICAgICAgICAgICAgICAgIGJ1aWxkZXI6IHN0YXRlPy5lZmZlY3RpdmVTdHJpbmdTdG9yeT8uYnVpbGRlciA/PwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfZW1wdHlQYXRoU3RhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICksCiAgICAgICAgICApLAogICAgICAgICAgUm93KAogICAgICAgICAgICBtYWluQXhpc0FsaWdubWVudDogTWFpbkF4aXNBbGlnbm1lbnQuY2VudGVyLAogICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgIGlmIChzaG93Q29udHJvbHMpCiAgICAgICAgICAgICAgICBJY29uQnV0dG9uKAogICAgICAgICAgICAgICAgICAgIG9uUHJlc3NlZDogcHJldiwgaWNvbjogY29uc3QgSWNvbihJY29ucy5jaGV2cm9uX2xlZnQpKSwKICAgICAgICAgICAgICBTSF9YTCwKICAgICAgICAgICAgICBJY29uQnV0dG9uKAogICAgICAgICAgICAgICAgICBvblByZXNzZWQ6IHNoYXJlZC5yZWZyZXNoLCBpY29uOiBjb25zdCBJY29uKEljb25zLnJlZnJlc2gpKSwKICAgICAgICAgICAgICBTSF9YTCwKICAgICAgICAgICAgICBpZiAoc2hvd0NvbnRyb2xzKQogICAgICAgICAgICAgICAgSWNvbkJ1dHRvbigKICAgICAgICAgICAgICAgICAgICBvblByZXNzZWQ6IG5leHQsIGljb246IGNvbnN0IEljb24oSWNvbnMuY2hldnJvbl9yaWdodCkpLAogICAgICAgICAgICBdLAogICAgICAgICAgKSwKICAgICAgICAgIFNWX1MsCiAgICAgICAgXSwKICAgICAgKSwKICAgICk7CiAgfQp9CgpXaWRnZXQgX2VtcHR5UGF0aFN0YXRlKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgZmluYWwgc3RyaW5nU3RvcnlLZXkgPSBjb250ZXh0LnJlYWQ8U3RyaW5nU3RvcnlTZWxlY3Rpb24+KCkua2V5OwoKICBpZiAoc3RyaW5nU3RvcnlLZXkgPT0gbnVsbCkgewogICAgcmV0dXJuIENvbHVtbigKICAgICAgbWFpbkF4aXNBbGlnbm1lbnQ6IE1haW5BeGlzQWxpZ25tZW50LmNlbnRlciwKICAgICAgY3Jvc3NBeGlzQWxpZ25tZW50OiBDcm9zc0F4aXNBbGlnbm1lbnQuc3RyZXRjaCwKICAgICAgY2hpbGRyZW46IFsKICAgICAgICBQYWRkaW5nKAogICAgICAgICAgcGFkZGluZzogUF9NLAogICAgICAgICAgY2hpbGQ6IEhlbHBUcmFuc2xhdGVDYXJkKAogICAgICAgICAgICB0aXRsZTogc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5ob3d0b1RyYW5zbGF0ZVRpdGxlLAogICAgICAgICAgICBtZXNzYWdlOiBzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLmhvd3RvVHJhbnNsYXRlTWVzc2FnZSwKICAgICAgICAgICksCiAgICAgICAgKQogICAgICBdLAogICAgKTsKICB9CgogIHJldHVybiBDZW50ZXIoCiAgICBjaGlsZDogU2hlZXRJbnB1dEhpbnQoCiAgICAgIHRleHQ6IHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3Mubm9TdG9yeUZvcihzdHJpbmdTdG9yeUtleS5uYW1lKSwKICAgICksCiAgKTsKfQoKY2xhc3MgX01vYmlsZUNvbnRlbnQgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBjb25zdCBfTW9iaWxlQ29udGVudCgpOwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGZpbmFsIHNoYXJlZCA9IGNvbnRleHQucmVhZDxfU2hhcmVkPigpOwoKICAgIHVzZUVmZmVjdCgoKSB7CiAgICAgIHNoYXJlZC5tb2JpbGVUYWIudmFsdWUgPSBfTW9iaWxlVGFicy5rZXlzOwogICAgICByZXR1cm4gbnVsbDsKICAgIH0sIFtdKTsKCiAgICByZXR1cm4gU2NhZmZvbGQoCiAgICAgIGFwcEJhcjogY29uc3QgX0FwcEJhcigpLAogICAgICBib2R5OiBMYXlvdXRCdWlsZGVyKAogICAgICAgIGJ1aWxkZXI6IChjb250ZXh0LCBjb25zdHJhaW50cykgewogICAgICAgICAgZmluYWwgY2VsbFdpZHRoID0gY29uc3RyYWludHMubWF4V2lkdGg7CiAgICAgICAgICByZXR1cm4gU2luZ2xlQ2hpbGRTY3JvbGxWaWV3KAogICAgICAgICAgICBjb250cm9sbGVyOiBzaGFyZWQuc2Nyb2xsQ29udHJvbGxlciwKICAgICAgICAgICAgcGh5c2ljczogY29uc3QgTmV2ZXJTY3JvbGxhYmxlU2Nyb2xsUGh5c2ljcygpLAogICAgICAgICAgICBzY3JvbGxEaXJlY3Rpb246IEF4aXMuaG9yaXpvbnRhbCwKICAgICAgICAgICAgY2hpbGQ6IFJvdygKICAgICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgICAgU2l6ZWRCb3goCiAgICAgICAgICAgICAgICAgIHdpZHRoOiBjZWxsV2lkdGgsCiAgICAgICAgICAgICAgICAgIGNoaWxkOiBfS2V5c1RyZWUoCiAgICAgICAgICAgICAgICAgICAga2V5OiBzaGFyZWQua2V5c1RyZWVLZXksCiAgICAgICAgICAgICAgICAgICAgc2VhcmNoRmFkZUNvbG9yczogWwogICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jb2xvcnMuc3VyZmFjZSwKICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29sb3JzLnN1cmZhY2Uud2l0aEFscGhhKDApCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICBTaXplZEJveCgKICAgICAgICAgICAgICAgICAgd2lkdGg6IGNlbGxXaWR0aCwKICAgICAgICAgICAgICAgICAgY2hpbGQ6IF9Db250ZW50KAogICAgICAgICAgICAgICAgICAgIGlzTW9iaWxlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGtleTogc2hhcmVkLmNvbnRlbnRLZXksCiAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICksCiAgICAgICAgICApOwogICAgICAgIH0sCiAgICAgICksCiAgICAgIGZsb2F0aW5nQWN0aW9uQnV0dG9uOiBjb25zdCBfRmFiKCksCiAgICApOwogIH0KfQoKY2xhc3MgX0FwcEJhciBleHRlbmRzIEhvb2tXaWRnZXQgaW1wbGVtZW50cyBQcmVmZXJyZWRTaXplV2lkZ2V0IHsKICBjb25zdCBfQXBwQmFyKCk7CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgZmluYWwgc2hhcmVkID0gY29udGV4dC5yZWFkPF9TaGFyZWQ+KCk7CiAgICBmaW5hbCBpc0RldmVsb3BlciA9IFN0cmluZ1N0b3J5U2VydmljZS5pbnN0YW5jZS5jb25maWcuaXNEZXZlbG9wZXI7CiAgICB1c2VMaXN0ZW5hYmxlKHNoYXJlZC5zdGF0ZSk7CiAgICBmaW5hbCBpc1JlcG9ydGluZyA9IHVzZUxpc3RlbmFibGUoc2hhcmVkLmlzUmVwb3J0aW5nKS52YWx1ZTsKCiAgICBmaW5hbCBjYW5Qb3AgPSBOYXZpZ2F0b3Iub2YoY29udGV4dCkuY2FuUG9wKCk7CiAgICByZXR1cm4gU3RyaW5nU3RvcnlBcHBCYXIoCiAgICAgIGxlYWRpbmc6IGNhblBvcAogICAgICAgICAgPyBSb3coCiAgICAgICAgICAgICAgbWFpbkF4aXNTaXplOiBNYWluQXhpc1NpemUubWluLAogICAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgICBpZiAoIWlzUmVwb3J0aW5nKSBjb25zdCBTdHJpbmdTdG9yeUFwcEJhckxlYWRpbmcoKSwKICAgICAgICAgICAgICAgIGlmIChpc0RldmVsb3BlciAmJiAhaXNSZXBvcnRpbmcpIFNIX1hTLAogICAgICAgICAgICAgICAgaWYgKGlzRGV2ZWxvcGVyKQogICAgICAgICAgICAgICAgICBJY29uQnV0dG9uKAogICAgICAgICAgICAgICAgICAgIG9uUHJlc3NlZDogKCkgewogICAgICAgICAgICAgICAgICAgICAgaWYgKCFzaGFyZWQuaXNSZXBvcnRpbmcudmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgc2hhcmVkLnBsYXkoKTsKICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXJlZC5zdG9wKCk7CiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBpY29uOiBjb25zdCBJY29uKEljb25zLmJ1Z19yZXBvcnQpLAogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICkKICAgICAgICAgIDogT3V0bGluZWRCdXR0b24oCiAgICAgICAgICAgICAgb25QcmVzc2VkOgogICAgICAgICAgICAgICAgICBTdHJpbmdTdG9yeVNlcnZpY2UuaW5zdGFuY2UuaW5BcHBFZGl0b3JDb25maWcub25UcnlUaGVBcHAsCiAgICAgICAgICAgICAgY2hpbGQ6IFRleHQoc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy50cnlUaGVBcHApLAogICAgICAgICAgICApLAogICAgICBwcm9ncmVzc1dpZGdldDogaXNSZXBvcnRpbmcKICAgICAgICAgID8gY29uc3QgX0luc3BlY3RvclByb2dyZXNzSW5kaWNhdG9yKCkKICAgICAgICAgIDogY29uc3QgX1N0cmluZ3NQcm9ncmVzc0luZGljYXRvcigpLAogICAgICB0aXRsZTogaXNSZXBvcnRpbmcKICAgICAgICAgID8gIiIKICAgICAgICAgIDogY29udGV4dC5zZWxlY3QoKFNsYW5nRWRpdG9yQ3ViaXQgYykgewogICAgICAgICAgICAgIGlmIChjLnN0YXRlLnByb2dyZXNzID09IDAuMCkgewogICAgICAgICAgICAgICAgcmV0dXJuICIiOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoYy5zdGF0ZS5wcm9ncmVzcyA9PSAxLjApIHsKICAgICAgICAgICAgICAgIHJldHVybiBzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLmFsbERvbmVFeGNsYW1hdGlvbjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MucGVyY2VudENvbXBsZXRlZCgKICAgICAgICAgICAgICAgICAgKGMuc3RhdGUucHJvZ3Jlc3MgKiAxMDApLnRvU3RyaW5nQXNGaXhlZCgyKSk7CiAgICAgICAgICAgIH0pLAogICAgICB0cmFpbGluZzogaXNSZXBvcnRpbmcKICAgICAgICAgID8gbnVsbAogICAgICAgICAgOiBPdXRsaW5lZEJ1dHRvbigKICAgICAgICAgICAgICBvblByZXNzZWQ6ICgpIHsKICAgICAgICAgICAgICAgIExvY2FsZVN1Ym1pdFNoZWV0LnNob3coCiAgICAgICAgICAgICAgICAgIGNvbnRleHQsCiAgICAgICAgICAgICAgICAgIGVkaXRvckN1Yml0OiBjb250ZXh0LnJlYWQoKSwKICAgICAgICAgICAgICAgICAgYmFzZUN1Yml0OiBjb250ZXh0LnJlYWQoKSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjaGlsZDogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnN1Ym1pdCksCiAgICAgICAgICAgICksCiAgICApOwogIH0KCiAgQG92ZXJyaWRlCiAgU2l6ZSBnZXQgcHJlZmVycmVkU2l6ZSA9PiBjb25zdCBTaXplLmZyb21IZWlnaHQoRGltZW5zaW9uc0RvdWJsZS54eGwpOwp9CgpjbGFzcyBfU3RyaW5nc1Byb2dyZXNzSW5kaWNhdG9yIGV4dGVuZHMgSG9va1dpZGdldCB7CiAgY29uc3QgX1N0cmluZ3NQcm9ncmVzc0luZGljYXRvcigpOwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGZpbmFsIHNsYW5nRWRpdG9yID0gY29udGV4dC53YXRjaDxTbGFuZ0VkaXRvckN1Yml0PigpOwogICAgZmluYWwgZWRpdG9yU3RhdGUgPSBzbGFuZ0VkaXRvci5zdGF0ZTsKICAgIGZpbmFsIGFwcHJvdmVkS2V5cyA9IGNvbnRleHQuc2VsZWN0KChTbGFuZ0Jhc2VDdWJpdCBjKSA9PiBjLnN0YXRlCiAgICAgICAgICAgIC5tYXliZU1hcChkYXRhOiAoaXQpID0+IGl0LmFwcHJvdmVkS2V5cywgb3JFbHNlOiAoKSA9PiBudWxsKSkgPz8KICAgICAgICA8U3RyaW5nPltdOwogICAgZmluYWwgc2VsZWN0ZWRLZXkgPSB1c2VNZW1vaXplZCgoKSB7CiAgICAgIGZpbmFsIG5vcm1hbGl6ZWQgPSBlZGl0b3JTdGF0ZS5zZWxlY3RlZEtleT8uc3BsaXQoIi4iKS5maXJzdDsKICAgICAgcmV0dXJuIFN0cmluZ0tleS52YWx1ZXMuZmlyc3RXaGVyZU9yTnVsbCgoaXQpID0+IGl0LmtleSA9PSBub3JtYWxpemVkKTsKICAgIH0sIFtlZGl0b3JTdGF0ZS5zZWxlY3RlZEtleV0pOwogICAgZmluYWwga2V5U3RhdHVzZXMgPSBTdHJpbmdLZXkudmFsdWVzLm1hcCgoa2V5KSA9PiBTdHJpbmdLZXlTdGF0dXMoCiAgICAgICAgICBpc0FwcHJvdmVkOiBhcHByb3ZlZEtleXMuY29udGFpbnMoa2V5LmtleSksCiAgICAgICAgICBpc0NoYW5nZWQ6IGVkaXRvclN0YXRlLmhhc0tleUNoYW5nZWQoa2V5LmtleSksCiAgICAgICAgICBpc1NlbGVjdGVkOiBzZWxlY3RlZEtleSA9PSBrZXksCiAgICAgICAgICBpc1NlYXJjaGVkOiBlZGl0b3JTdGF0ZS5zZWFyY2hSZXN1bHRzLmNvbnRhaW5zKGtleS5rZXkpLAogICAgICAgICkpOwoKICAgIHJldHVybiBfUHJvZ3Jlc3NJbmRpY2F0b3Ioa2V5U3RhdHVzZXMubWFwKChpdCkgPT4gaXQuYXNDb2xvcigpKS50b0xpc3QoKSk7CiAgfQp9CgpjbGFzcyBfSW5zcGVjdG9yUHJvZ3Jlc3NJbmRpY2F0b3IgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBjb25zdCBfSW5zcGVjdG9yUHJvZ3Jlc3NJbmRpY2F0b3IoKTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBjb2xvcnMgPQogICAgICAgIHVzZUxpc3RlbmFibGUoY29udGV4dC5yZWFkPF9TaGFyZWQ+KCkucmVwb3J0ZXJzSW5kaWNhdG9yKS52YWx1ZTsKCiAgICByZXR1cm4gX1Byb2dyZXNzSW5kaWNhdG9yKGNvbG9ycyk7CiAgfQp9CgpjbGFzcyBfUHJvZ3Jlc3NJbmRpY2F0b3IgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBjb25zdCBfUHJvZ3Jlc3NJbmRpY2F0b3IodGhpcy5jb2xvcnMpOwoKICBzdGF0aWMgY29uc3QgaGVpZ2h0ID0gRGltZW5zaW9uc0RvdWJsZS5zOwogIGZpbmFsIExpc3Q8Q29sb3I+IGNvbG9yczsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBkZWZhdWx0Q29sb3IgPSBjb250ZXh0LmNvbG9ycy5vblN1cmZhY2Uud2l0aFZhbHVlcyhhbHBoYTogMC4yKTsKICAgIHJldHVybiBTaXplZEJveCgKICAgICAgaGVpZ2h0OiBoZWlnaHQsCiAgICAgIHdpZHRoOiBkb3VibGUuaW5maW5pdHksCiAgICAgIGNoaWxkOiBDbGlwUlJlY3QoCiAgICAgICAgYm9yZGVyUmFkaXVzOiBjb25zdCBCb3JkZXJSYWRpdXMuYWxsKAogICAgICAgICAgUmFkaXVzLmNpcmN1bGFyKERpbWVuc2lvbnNEb3VibGUucyAvIDIpLAogICAgICAgICksCiAgICAgICAgY2hpbGQ6IFN0YWNrKAogICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgUG9zaXRpb25lZC5maWxsKGNoaWxkOiBDb2xvcmVkQm94KGNvbG9yOiBkZWZhdWx0Q29sb3IpKSwKICAgICAgICAgICAgUG9zaXRpb25lZC5maWxsKGNoaWxkOiBfQ29sb3JzUHJvZ3Jlc3NCYXIoY29sb3JzOiBjb2xvcnMpKQogICAgICAgICAgXSwKICAgICAgICApLAogICAgICApLAogICAgKTsKICB9Cn0KCmNsYXNzIF9Db2xvcnNQcm9ncmVzc0JhciBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgZmluYWwgTGlzdDxDb2xvcj4gY29sb3JzOwoKICBjb25zdCBfQ29sb3JzUHJvZ3Jlc3NCYXIoe3JlcXVpcmVkIHRoaXMuY29sb3JzfSk7CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgcmV0dXJuIEN1c3RvbVBhaW50KAogICAgICBwYWludGVyOiBfQ29sb3JzUHJvZ3Jlc3NCYXJQYWludGVyKGNvbG9yczogY29sb3JzKSwKICAgICk7CiAgfQp9CgpjbGFzcyBfQ29sb3JzUHJvZ3Jlc3NCYXJQYWludGVyIGV4dGVuZHMgQ3VzdG9tUGFpbnRlciB7CiAgZmluYWwgTGlzdDxDb2xvcj4gY29sb3JzOwoKICBfQ29sb3JzUHJvZ3Jlc3NCYXJQYWludGVyKHtyZXF1aXJlZCB0aGlzLmNvbG9yc30pOwoKICBAb3ZlcnJpZGUKICB2b2lkIHBhaW50KENhbnZhcyBjYW52YXMsIFNpemUgc2l6ZSkgewogICAgZG91YmxlIGJhcldpZHRoID0gc2l6ZS53aWR0aCAvIGNvbG9ycy5sZW5ndGg7CgogICAgZm9yIChpbnQgaSA9IDA7IGkgPCBjb2xvcnMubGVuZ3RoOyBpKyspIHsKICAgICAgZmluYWwgcGFpbnQgPSBQYWludCgpCiAgICAgICAgLi5jb2xvciA9IGNvbG9yc1tpXQogICAgICAgIC4uc3R5bGUgPSBQYWludGluZ1N0eWxlLmZpbGw7CgogICAgICBjYW52YXMuZHJhd1JlY3QoCiAgICAgICAgLy8gQWRkIGEgc21hbGwgb3ZlcmxhcCB0byBlbGltaW5hdGUgdGhlIGxpbmVzCiAgICAgICAgUmVjdC5mcm9tTFRXSChpICogYmFyV2lkdGgsIDAsIGJhcldpZHRoICogMS4xLCBzaXplLmhlaWdodCksCiAgICAgICAgcGFpbnQsCiAgICAgICk7CiAgICB9CiAgfQoKICBAb3ZlcnJpZGUKICBib29sIHNob3VsZFJlcGFpbnQoY292YXJpYW50IEN1c3RvbVBhaW50ZXIgb2xkRGVsZWdhdGUpIHsKICAgIHJldHVybiB0cnVlOwogIH0KfQoKY2xhc3MgX1N0b3J5U3RhdGUgewogIGZpbmFsIFN0cmluZ0tleSBhY3RpdmVLZXk7CiAgZmluYWwgTGlzdDxTdHJpbmdTdG9yeT4gYXZhaWxhYmxlU3RvcmllczsKICBmaW5hbCBpbnQgc2VsZWN0ZWRTdG9yeUluZGV4OwogIGZpbmFsIGludCByZWZyZXNoQ291bnRlcjsKCiAgX1N0b3J5U3RhdGUoewogICAgcmVxdWlyZWQgdGhpcy5hY3RpdmVLZXksCiAgICByZXF1aXJlZCB0aGlzLmF2YWlsYWJsZVN0b3JpZXMsCiAgICByZXF1aXJlZCB0aGlzLnNlbGVjdGVkU3RvcnlJbmRleCwKICAgIHJlcXVpcmVkIHRoaXMucmVmcmVzaENvdW50ZXIsCiAgfSk7CgogIGJvb2wgZ2V0IHNob3dDb250cm9scyA9PiBhdmFpbGFibGVTdG9yaWVzLmxlbmd0aCA+IDE7CiAgU3RyaW5nU3Rvcnk/IGdldCBlZmZlY3RpdmVTdHJpbmdTdG9yeSA9PgogICAgICBhdmFpbGFibGVTdG9yaWVzLmlzRW1wdHkgPyBudWxsIDogYXZhaWxhYmxlU3Rvcmllc1tzZWxlY3RlZFN0b3J5SW5kZXhdOwogIFN0cmluZyBnZXQgZWZmZWN0aXZlVGl0bGUgPT4gZWZmZWN0aXZlU3RyaW5nU3Rvcnk/LnRpdGxlID8/ICIiOwoKICBfU3RvcnlTdGF0ZSBuZXh0KCkgewogICAgaWYgKHNlbGVjdGVkU3RvcnlJbmRleCA8IGF2YWlsYWJsZVN0b3JpZXMubGVuZ3RoIC0gMSkgewogICAgICByZXR1cm4gY29weVdpdGgoc2VsZWN0ZWRTdG9yeUluZGV4OiBzZWxlY3RlZFN0b3J5SW5kZXggKyAxKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBjb3B5V2l0aChzZWxlY3RlZFN0b3J5SW5kZXg6IDApOwogICAgfQogIH0KCiAgX1N0b3J5U3RhdGUgcHJldigpIHsKICAgIGlmIChzZWxlY3RlZFN0b3J5SW5kZXggPiAwKSB7CiAgICAgIHJldHVybiBjb3B5V2l0aChzZWxlY3RlZFN0b3J5SW5kZXg6IHNlbGVjdGVkU3RvcnlJbmRleCAtIDEpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGNvcHlXaXRoKHNlbGVjdGVkU3RvcnlJbmRleDogYXZhaWxhYmxlU3Rvcmllcy5sZW5ndGggLSAxKTsKICAgIH0KICB9CgogIF9TdG9yeVN0YXRlIHJlZnJlc2goKSB7CiAgICByZXR1cm4gY29weVdpdGgocmVmcmVzaENvdW50ZXI6IHJlZnJlc2hDb3VudGVyICsgMSk7CiAgfQoKICBfU3RvcnlTdGF0ZSBjb3B5V2l0aCh7CiAgICBTdHJpbmdLZXk/IGFjdGl2ZUtleSwKICAgIExpc3Q8U3RyaW5nU3Rvcnk+PyBhdmFpbGFibGVTdG9yaWVzLAogICAgaW50PyBzZWxlY3RlZFN0b3J5SW5kZXgsCiAgICBpbnQ/IHJlZnJlc2hDb3VudGVyLAogIH0pID0+CiAgICAgIF9TdG9yeVN0YXRlKAogICAgICAgIGFjdGl2ZUtleTogYWN0aXZlS2V5ID8/IHRoaXMuYWN0aXZlS2V5LAogICAgICAgIGF2YWlsYWJsZVN0b3JpZXM6IGF2YWlsYWJsZVN0b3JpZXMgPz8gdGhpcy5hdmFpbGFibGVTdG9yaWVzLAogICAgICAgIHNlbGVjdGVkU3RvcnlJbmRleDogc2VsZWN0ZWRTdG9yeUluZGV4ID8/IHRoaXMuc2VsZWN0ZWRTdG9yeUluZGV4LAogICAgICAgIHJlZnJlc2hDb3VudGVyOiByZWZyZXNoQ291bnRlciA/PyB0aGlzLnJlZnJlc2hDb3VudGVyLAogICAgICApOwp9CgpjbGFzcyBfU2hhcmVkIHsKICBfU2hhcmVkKHRoaXMuZWRpdG9yKTsKICBmaW5hbCBrZXlzVHJlZUtleSA9IEdsb2JhbEtleSgpOwogIGZpbmFsIGNvbnRlbnRLZXkgPSBHbG9iYWxLZXkoKTsKICBmaW5hbCBsb2NhbGVFZGl0b3JLZXkgPSBHbG9iYWxLZXkoKTsKICBmaW5hbCBzdGF0ZSA9IFZhbHVlTm90aWZpZXI8X1N0b3J5U3RhdGU/PihudWxsKTsKCiAgZmluYWwgc3RyaW5nU3Rvcmllc01lbW9pemVkID0gc3RyaW5nU3RvcmllcygpOwoKICBmaW5hbCBzY3JvbGxDb250cm9sbGVyID0gU2Nyb2xsQ29udHJvbGxlcigpOwogIGZpbmFsIG1vYmlsZVRhYiA9IFZhbHVlTm90aWZpZXIoX01vYmlsZVRhYnMua2V5cyk7CiAgZmluYWwgcmVwb3J0ZXJzSW5kaWNhdG9yID0gVmFsdWVOb3RpZmllcjxMaXN0PENvbG9yPj4oW10pOwoKICBmaW5hbCBfcmVwb3J0ZXJzID0gPFN0cmluZ1N0b3J5LCBfU3RvcnlSZXBvcnRlcj57fTsKICBmaW5hbCBpc1JlcG9ydGluZyA9IFZhbHVlTm90aWZpZXIoZmFsc2UpOwogIGZpbmFsIFNsYW5nRWRpdG9yQ3ViaXQgZWRpdG9yOwoKICB2b2lkIHJlZnJlc2goKSB7CiAgICBzdGF0ZS52YWx1ZSA9IHN0YXRlLnZhbHVlPy5yZWZyZXNoKCk7CiAgfQoKICB2b2lkIGN1cnJlbnRSZXBvcnQoKSB7CiAgICBmaW5hbCByZXBvcnRlciA9IF9yZXBvcnRlcnNbc3RhdGUudmFsdWU/LmVmZmVjdGl2ZVN0cmluZ1N0b3J5XTsKICAgIGlmIChyZXBvcnRlciA9PSBudWxsKSB7CiAgICAgIF9sb2cuZSgiY3VycmVudFJlcG9ydCgpIDogQ291bGQgbm90IGZpbmQgYSByZXBvcnRlciIpOwogICAgICByZXR1cm47CiAgICB9CiAgICByZXBvcnRlci5sb2dSZXBvcnQoKTsKICB9CgogIF9TdG9yeVN0YXRlIGNyZWF0ZShTdHJpbmdLZXkga2V5KSB7CiAgICBmaW5hbCBhdmFpbGFibGVTdG9yaWVzID0KICAgICAgICBzdHJpbmdTdG9yaWVzTWVtb2l6ZWQud2hlcmUoKGl0KSA9PiBpdC5rZXlzLmNvbnRhaW5zKGtleSkpLnRvTGlzdCgpOwoKICAgIHJldHVybiBfU3RvcnlTdGF0ZSgKICAgICAgYWN0aXZlS2V5OiBrZXksCiAgICAgIGF2YWlsYWJsZVN0b3JpZXM6IGF2YWlsYWJsZVN0b3JpZXMsCiAgICAgIHNlbGVjdGVkU3RvcnlJbmRleDogMCwKICAgICAgcmVmcmVzaENvdW50ZXI6IDAsCiAgICApOwogIH0KCiAgdm9pZCBzZXRBY3RpdmVTdG9yeSh7CiAgICBTdHJpbmdLZXk/IGtleSwKICB9KSB7CiAgICBpZiAoa2V5ID09IG51bGwpIHsKICAgICAgc3RhdGUudmFsdWUgPSBudWxsOwogICAgICByZXR1cm47CiAgICB9CgogICAgc3RhdGUudmFsdWUgPSBjcmVhdGUoa2V5KTsKICB9CgogIFRyYW5zbGF0aW9uU2NvcGVLZXlzPyBnZXRTY29wZUtleXNCeVN0cmluZ1N0b3J5KFN0cmluZ1N0b3J5PyBzdG9yeSkgewogICAgaWYgKHN0b3J5ID09IG51bGwpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgdmFyIHJlcG9ydGVyID0gX3JlcG9ydGVyc1tzdG9yeV07CiAgICBpZiAocmVwb3J0ZXIgPT0gbnVsbCkgewogICAgICByZXBvcnRlciA9IF9TdG9yeVJlcG9ydGVyKAogICAgICAgIHRpdGxlOiBzdG9yeS50aXRsZSwKICAgICAgICBleHBlY3RlZDogU2V0LmZyb20oc3Rvcnkua2V5cyksCiAgICAgICk7CiAgICAgIF9yZXBvcnRlcnNbc3RvcnldID0gcmVwb3J0ZXI7CiAgICB9CgogICAgcmV0dXJuIHJlcG9ydGVyLmtleXM7CiAgfQoKICB2b2lkIG1vdmVUb01vYmlsZVRhYihfTW9iaWxlVGFicyB0YWIpIHsKICAgIHN3aXRjaCAodGFiKSB7CiAgICAgIGNhc2UgX01vYmlsZVRhYnMua2V5czoKICAgICAgICBzY3JvbGxDb250cm9sbGVyLmp1bXBUbygwKTsKICAgICAgY2FzZSBfTW9iaWxlVGFicy5wcmV2aWV3OgogICAgICAgIHNjcm9sbENvbnRyb2xsZXIuanVtcFRvKHNjcm9sbENvbnRyb2xsZXIucG9zaXRpb24ubWF4U2Nyb2xsRXh0ZW50KTsKICAgICAgICByZWZyZXNoKCk7CiAgICB9CiAgICBtb2JpbGVUYWIudmFsdWUgPSB0YWI7CiAgfQoKICB2b2lkIF9jb21wdXRlUmVwb3J0ZXJDb2xvcnMoKSB7CiAgICBmaW5hbCBjb2xvcnMgPSBzdHJpbmdTdG9yaWVzTWVtb2l6ZWQubWFwKChpdCkgPT4gX3JlcG9ydGVyc1tpdF0pLm1hcCgoaXQpIHsKICAgICAgaWYgKGl0ID09IG51bGwgfHwgIWl0LmdvdENhbGxlZCkgewogICAgICAgIHJldHVybiBDb2xvcnMudHJhbnNwYXJlbnQ7CiAgICAgIH0KICAgICAgaWYgKGl0Lm1pc3NpbmdLZXlzKCkuaXNOb3RFbXB0eSkgewogICAgICAgIHJldHVybiBDb2xvcnMuYW1iZXJBY2NlbnQ7CiAgICAgIH0KICAgICAgcmV0dXJuIENvbG9ycy5ncmVlbkFjY2VudDsKICAgIH0pLnRvTGlzdCgpOwogICAgcmVwb3J0ZXJzSW5kaWNhdG9yLnZhbHVlID0gY29sb3JzOwogIH0KCiAgdm9pZCBkaXNwb3NlKCkgewogICAgc2Nyb2xsQ29udHJvbGxlci5kaXNwb3NlKCk7CiAgICBpc1JlcG9ydGluZy52YWx1ZSA9IGZhbHNlOwogIH0KCiAgRnV0dXJlPHZvaWQ+IHN0b3AoKSBhc3luYyB7CiAgICBpc1JlcG9ydGluZy52YWx1ZSA9IGZhbHNlOwogIH0KCiAgc3RhdGljIGNvbnN0IGtTdGVwRHVyYXRpb24gPSBEdXJhdGlvbihtaWxsaXNlY29uZHM6IDMwMCk7CgogIEZ1dHVyZTx2b2lkPiBwbGF5KCkgYXN5bmMgewogICAgX2NvbXB1dGVSZXBvcnRlckNvbG9ycygpOwogICAgaXNSZXBvcnRpbmcudmFsdWUgPSB0cnVlOwoKICAgIC8vIGNsZWFyIHN0YWdlCiAgICBzdGF0ZS52YWx1ZSA9IG51bGw7CiAgICBhd2FpdCBGdXR1cmUuZGVsYXllZChrU3RlcER1cmF0aW9uKTsKICAgIF9yZXBvcnRlcnMuZm9yRWFjaCgoXywgaXQpID0+IGl0LmNsZWFyKCkpOwoKICAgIHN3aXRjaFRvKFN0cmluZ1N0b3J5IHN0b3J5LCB7U3RyaW5nS2V5PyBwcmVmZXJyZWRLZXl9KSB7CiAgICAgIGZpbmFsIGVmZmVjdGl2ZUtleSA9IHByZWZlcnJlZEtleSA/PyBzdG9yeS5rZXlzLmZpcnN0OwogICAgICB2YXIgbmV4dFN0YXRlID0gY3JlYXRlKGVmZmVjdGl2ZUtleSk7CiAgICAgIGFzc2VydChzdG9yeS5rZXlzLmNvbnRhaW5zKGVmZmVjdGl2ZUtleSkpOwogICAgICBmaW5hbCBpbmRleCA9IG5leHRTdGF0ZS5hdmFpbGFibGVTdG9yaWVzLmluZGV4T2Yoc3RvcnkpOwogICAgICBpZiAoaW5kZXggIT0gLTEpIHsKICAgICAgICBuZXh0U3RhdGUgPSBuZXh0U3RhdGUuY29weVdpdGgoc2VsZWN0ZWRTdG9yeUluZGV4OiBpbmRleCk7CiAgICAgIH0KICAgICAgc3RhdGUudmFsdWUgPSBuZXh0U3RhdGU7CiAgICB9CgogICAgLy8gaXRlcmF0ZSBvdmVyIGVhY2ggc3RvcnkKICAgIGZvciAoZmluYWwgc3RvcnkgaW4gc3RyaW5nU3Rvcmllc01lbW9pemVkKSB7CiAgICAgIGlmICghaXNSZXBvcnRpbmcudmFsdWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc3dpdGNoVG8oc3RvcnkpOwogICAgICBhd2FpdCBGdXR1cmUuZGVsYXllZChrU3RlcER1cmF0aW9uKTsKICAgICAgZmluYWwgcmVwb3J0ZXIgPSBfcmVwb3J0ZXJzW3N0b3J5XTsKICAgICAgaWYgKHJlcG9ydGVyID09IG51bGwpIHsKICAgICAgICBpc1JlcG9ydGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgIF9sb2cuZSgKICAgICAgICAgICAgIlNvbWV0aGluZyB3ZW50IHdyb25nIC0gY291bGQgbm90IGZpbmQgcmVwb3J0ZXIgZm9yICR7c3RvcnkudGl0bGV9Iik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBmaW5hbCBtaXNzaW5nS2V5cyA9IHJlcG9ydGVyLm1pc3NpbmdLZXlzKCk7CiAgICAgIGZvciAoZmluYWwgbWlzc2luZ0tleSBpbiBtaXNzaW5nS2V5cykgewogICAgICAgIGlmIChyZXBvcnRlci5taXNzaW5nS2V5cygpLmlzRW1wdHkpIHsKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgICBpZiAoIWlzUmVwb3J0aW5nLnZhbHVlKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHN3aXRjaFRvKHN0b3J5LCBwcmVmZXJyZWRLZXk6IG1pc3NpbmdLZXkpOwogICAgICAgIGF3YWl0IEZ1dHVyZS5kZWxheWVkKGtTdGVwRHVyYXRpb24pOwogICAgICB9CiAgICAgIF9jb21wdXRlUmVwb3J0ZXJDb2xvcnMoKTsKICAgICAgcmVwb3J0ZXIubG9nUmVwb3J0KCk7CiAgICB9CgogICAgLy8gbG9nIHN1bW1hcnkKICAgIGZpbmFsIHRvdGFsU3RvcmllcyA9IHN0cmluZ1N0b3JpZXNNZW1vaXplZC5sZW5ndGg7CiAgICBmaW5hbCBva1N0b3JpZXMgPQogICAgICAgIF9yZXBvcnRlcnMudmFsdWVzLndoZXJlKChpdCkgPT4gaXQubWlzc2luZ0tleXMoKS5pc0VtcHR5KS5sZW5ndGg7CiAgICBmaW5hbCBzdG9yaWVzV2l0aE1pc3NpbmdLZXlzID0gX3JlcG9ydGVycy52YWx1ZXMKICAgICAgICAud2hlcmUoKGl0KSA9PiBpdC5taXNzaW5nS2V5cygpLmlzTm90RW1wdHkgJiYgaXQuZ290Q2FsbGVkKTsKICAgIGZpbmFsIHN0b3JpZXNOb3RDYWxsZWQgPQogICAgICAgIF9yZXBvcnRlcnMudmFsdWVzLndoZXJlKChpdCkgPT4gaXQuZ290Q2FsbGVkID09IGZhbHNlKTsKCiAgICBmaW5hbCBzYiA9IFN0cmluZ0J1ZmZlcigpCiAgICAgIC4ud3JpdGVsbigpCiAgICAgIC4ud3JpdGVsbigiVG90YWwgU3RvcmllczogJHRvdGFsU3RvcmllcyIpCiAgICAgIC4ud3JpdGVsbigiT0sgU3RvcmllczogJG9rU3RvcmllcyIpOwoKICAgIGlmIChzdG9yaWVzV2l0aE1pc3NpbmdLZXlzLmlzTm90RW1wdHkpIHsKICAgICAgc2Iud3JpdGVsbigiU3RvcmllcyBXaXRoIE1pc3NpbmcgS2V5czogJHtzdG9yaWVzV2l0aE1pc3NpbmdLZXlzLmxlbmd0aH0iKTsKICAgICAgZm9yIChmaW5hbCBzdG9yeSBpbiBzdG9yaWVzV2l0aE1pc3NpbmdLZXlzKSB7CiAgICAgICAgc2Iud3JpdGVsbigiICAtICR7c3RvcnkudGl0bGV9Iik7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc3Rvcmllc05vdENhbGxlZC5pc05vdEVtcHR5KSB7CiAgICAgIHNiLndyaXRlbG4oIlN0b3JpZXMgTm90IENhbGxlZDogJHtzdG9yaWVzTm90Q2FsbGVkLmxlbmd0aH0iKTsKICAgICAgZm9yIChmaW5hbCBzdG9yeSBpbiBzdG9yaWVzTm90Q2FsbGVkKSB7CiAgICAgICAgc2Iud3JpdGVsbigiICAtICR7c3RvcnkudGl0bGV9Iik7CiAgICAgIH0KICAgIH0KICAgIF9sb2cuaShzYi50b1N0cmluZygpKTsKICB9Cn0KCmVudW0gX01vYmlsZVRhYnMgeyBrZXlzLCBwcmV2aWV3IH0KCmNsYXNzIF9GYWIgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBjb25zdCBfRmFiKCk7CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgZmluYWwgc2hhcmVkID0gY29udGV4dC5yZWFkPF9TaGFyZWQ+KCk7CiAgICB1c2VMaXN0ZW5hYmxlKHNoYXJlZC5tb2JpbGVUYWIpOwogICAgcmV0dXJuIEZsb2F0aW5nQWN0aW9uQnV0dG9uLnNtYWxsKAogICAgICBvblByZXNzZWQ6ICgpIHsKICAgICAgICBmaW5hbCBuZXh0VGFiID0gc3dpdGNoIChzaGFyZWQubW9iaWxlVGFiLnZhbHVlKSB7CiAgICAgICAgICBfTW9iaWxlVGFicy5rZXlzID0+IF9Nb2JpbGVUYWJzLnByZXZpZXcsCiAgICAgICAgICBfTW9iaWxlVGFicy5wcmV2aWV3ID0+IF9Nb2JpbGVUYWJzLmtleXMsCiAgICAgICAgfTsKICAgICAgICBzaGFyZWQubW92ZVRvTW9iaWxlVGFiKG5leHRUYWIpOwogICAgICB9LAogICAgICBjaGlsZDogSWNvbigKICAgICAgICBzd2l0Y2ggKHNoYXJlZC5tb2JpbGVUYWIudmFsdWUpIHsKICAgICAgICAgIF9Nb2JpbGVUYWJzLmtleXMgPT4gSWNvbnMucGhvbmVfYW5kcm9pZF9vdXRsaW5lZCwKICAgICAgICAgIF9Nb2JpbGVUYWJzLnByZXZpZXcgPT4gSWNvbnMuZWRpdCwKICAgICAgICB9LAogICAgICApLAogICAgKTsKICB9Cn0KCmZpbmFsIF9sb2cgPSBTdHJpbmdTdG9yeUxvZ2dlcigiU3RvcnlSZXBvcnQiKTsKCmNsYXNzIF9TdG9yeVJlcG9ydGVyIHsKICBfU3RvcnlSZXBvcnRlcih7CiAgICByZXF1aXJlZCB0aGlzLnRpdGxlLAogICAgcmVxdWlyZWQgdGhpcy5leHBlY3RlZCwKICB9KTsKICBmaW5hbCBTdHJpbmcgdGl0bGU7CiAgbGF0ZSBmaW5hbCBUcmFuc2xhdGlvblNjb3BlS2V5cyBrZXlzID0gVHJhbnNsYXRpb25TY29wZUtleXMob25BZGQ6IG9uQWRkKTsKICBmaW5hbCBTZXQ8U3RyaW5nS2V5PiBleHBlY3RlZDsKICBmaW5hbCBvY2N1cmVkID0gPFN0cmluZ0tleT57fTsKICB2YXIgZ290Q2FsbGVkID0gZmFsc2U7CgogIHZvaWQgY2xlYXIoKSB7CiAgICBnb3RDYWxsZWQgPSBmYWxzZTsKICAgIG9jY3VyZWQuY2xlYXIoKTsKICB9CgogIFNldDxTdHJpbmdLZXk+IG1pc3NpbmdLZXlzKCkgPT4KICAgICAgU2V0PFN0cmluZ0tleT4uZnJvbShleHBlY3RlZCkuLnJlbW92ZUFsbChvY2N1cmVkKTsKCiAgdm9pZCBvbkFkZChTdHJpbmcgdmFsdWUpIHsKICAgIGZpbmFsIHN0cmluZ0tleSA9IFN0cmluZ0tleUV4dC5mcm9tU3RyaW5nKHZhbHVlKTsKICAgIGlmIChzdHJpbmdLZXkgPT0gbnVsbCkgewogICAgICBfbG9nLmQoIlskdGl0bGVdIGRpZG4ndCBmaW5kIGEgU3RyaW5nS2V5IGVudW0gZm9yICR2YWx1ZSIpOwogICAgICByZXR1cm47CiAgICB9CiAgICBvY2N1cmVkLmFkZChzdHJpbmdLZXkpOwogICAgZ290Q2FsbGVkID0gdHJ1ZTsKICB9CgogIHZvaWQgbG9nUmVwb3J0KCkgewogICAgZmluYWwgcmVwb3J0ID0gdGhpczsKICAgIGZpbmFsIG1pc3NpbmdLZXlzID0gdGhpcy5taXNzaW5nS2V5cygpOwogICAgZmluYWwgb3ZlclJlcG9ydGVkID0gU2V0PFN0cmluZ0tleT4uZnJvbShyZXBvcnQub2NjdXJlZCkKICAgICAgLi5yZW1vdmVBbGwocmVwb3J0LmV4cGVjdGVkKTsKICAgIGZpbmFsIGlzTWlzc2luZ0tleXMgPSBtaXNzaW5nS2V5cy5pc05vdEVtcHR5OwogICAgZmluYWwgaGFzT3ZlclJlcG9ydGVkID0gb3ZlclJlcG9ydGVkLmlzTm90RW1wdHk7CgogICAgZmluYWwgc2IgPSBTdHJpbmdCdWZmZXIoKTsKICAgIHNiLndyaXRlbG4oW3JlcG9ydC50aXRsZV0pOwogICAgc2Iud3JpdGVsbigiICBvY2N1cmVkOiAke29jY3VyZWQubGVuZ3RofSIpOwogICAgc2Iud3JpdGVsbigiICBleHBlY3RlZDogJHtleHBlY3RlZC5sZW5ndGh9Iik7CgogICAgaWYgKGlzTWlzc2luZ0tleXMpIHsKICAgICAgc2Iud3JpdGVsbigiICBtaXNzaW5nOiAke21pc3NpbmdLZXlzLmxlbmd0aH0iKTsKICAgICAgc2Iud3JpdGVsbktleXMobWlzc2luZ0tleXMpOwogICAgfQoKICAgIGlmIChoYXNPdmVyUmVwb3J0ZWQpIHsKICAgICAgc2Iud3JpdGVsbigiICBleHRyYTogJHtvdmVyUmVwb3J0ZWQubGVuZ3RofSIpOwogICAgICBzYi53cml0ZWxuS2V5cyhvdmVyUmVwb3J0ZWQpOwogICAgfQoKICAgIGlmIChpc01pc3NpbmdLZXlzKSB7CiAgICAgIF9sb2cudyhzYi50b1N0cmluZygpLnRyaW0oKSk7CiAgICB9IGVsc2UgewogICAgICBfbG9nLmQoc2IudG9TdHJpbmcoKS50cmltKCkpOwogICAgfQogIH0KfQoKZXh0ZW5zaW9uIF9TdHJpbmdCdWZmZXJFeHQgb24gU3RyaW5nQnVmZmVyIHsKICB3cml0ZWxuS2V5cyhJdGVyYWJsZTxTdHJpbmdLZXk+IGtleXMpIHsKICAgIGZvciAoZmluYWwga2V5IGluIGtleXMpIHsKICAgICAgd3JpdGVsbigiICAgIC0gJHtrZXkua2V5fSIpOwogICAgfQogIH0KfQo=';
  static String get assets_string_story_screen_mustache =>
      _decode(_assets_string_story_screen_mustache);
  static const String _assets_strings_extension_mustache =
      'aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvd2lkZ2V0cy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnt7cGFja2FnZU5hbWV9fS97e3tpMThufX19L3N0cmluZ3MuZy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnN5bmNocm9uaXplZC9zeW5jaHJvbml6ZWQuZGFydCc7CmltcG9ydCAncGFja2FnZTppbnRsL2RhdGVfc3ltYm9sX2RhdGFfbG9jYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpjb2xsZWN0aW9uL2NvbGxlY3Rpb24uZGFydCc7Cgp0eXBlZGVmIFMgPSBUcmFuc2xhdGlvbnM7CgpleHRlbnNpb24gU3RyaW5nc0V4dGVuc2lvbiBvbiBCdWlsZENvbnRleHQgewogIFMgZ2V0IHN0cmluZ3MgPT4gTG9jYWxpemF0aW9ucy5vZjxUcmFuc2xhdGlvbnM+KHRoaXMsIFRyYW5zbGF0aW9ucykhOwp9CgpjbGFzcyBTbGFuZ0RlbGVnYXRlIGV4dGVuZHMgTG9jYWxpemF0aW9uc0RlbGVnYXRlPFRyYW5zbGF0aW9ucz4gewogIFNsYW5nRGVsZWdhdGUoe3RoaXMub3ZlcnJpZGVUcmFuc2xhdGlvbn0pOwoKICBzdGF0aWMgZmluYWwgZGVsZWdhdGUgPSBTbGFuZ0RlbGVnYXRlKCk7CgogIGZpbmFsIF9sb2FkZWRUcmFuc2xhdGlvbnMgPSA8TG9jYWxlLCBUcmFuc2xhdGlvbnM+e307CiAgZmluYWwgX2xvYWRMb2NrID0gTG9jaygpOwogIHZhciBfaW5pdGlhbGl6ZURhdGVGb3JtYXR0aW5nQ2FsbGVkQXRMZWFzdE9uY2UgPSBmYWxzZTsKICBmaW5hbCBUcmFuc2xhdGlvbnM/IG92ZXJyaWRlVHJhbnNsYXRpb247CgogIEBvdmVycmlkZQogIEZ1dHVyZTxUcmFuc2xhdGlvbnM+IGxvYWQoTG9jYWxlIGxvY2FsZSkgYXN5bmMgewogICAgaWYgKG92ZXJyaWRlVHJhbnNsYXRpb24gIT0gbnVsbCkgewogICAgICByZXR1cm4gb3ZlcnJpZGVUcmFuc2xhdGlvbiE7CiAgICB9CgogICAgaWYgKF9sb2FkZWRUcmFuc2xhdGlvbnNbbG9jYWxlXSBjYXNlIGZpbmFsIFRyYW5zbGF0aW9ucyB2YWx1ZSkgewogICAgICByZXR1cm4gdmFsdWU7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX2xvYWRMb2NrLnN5bmNocm9uaXplZCgoKSBhc3luYyB7CiAgICAgICAgaWYgKCFfaW5pdGlhbGl6ZURhdGVGb3JtYXR0aW5nQ2FsbGVkQXRMZWFzdE9uY2UpIHsKICAgICAgICAgIGF3YWl0IGluaXRpYWxpemVEYXRlRm9ybWF0dGluZygpOwogICAgICAgICAgX2luaXRpYWxpemVEYXRlRm9ybWF0dGluZ0NhbGxlZEF0TGVhc3RPbmNlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKF9sb2FkZWRUcmFuc2xhdGlvbnNbbG9jYWxlXSAhPSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gX2xvYWRlZFRyYW5zbGF0aW9uc1tsb2NhbGVdITsKICAgICAgICB9CgogICAgICAgIGZpbmFsIHRyYW5zbGF0aW9ucyA9IGF3YWl0IGxvY2FsZS5hc0FwcExvY2FsZSgpLmJ1aWxkKCk7CiAgICAgICAgX2xvYWRlZFRyYW5zbGF0aW9uc1tsb2NhbGVdID0gdHJhbnNsYXRpb25zOwogICAgICAgIHJldHVybiB0cmFuc2xhdGlvbnM7CiAgICAgIH0pOwogICAgfQogIH0KCiAgc3RhdGljIFRyYW5zbGF0aW9ucyBsb2FkU3luYyhMb2NhbGUgbG9jYWxlKSB7CiAgICByZXR1cm4gZGVsZWdhdGUuX2xvYWRlZFRyYW5zbGF0aW9uc1tsb2NhbGVdITsKICB9CgogIHN0YXRpYyBmaW5hbCBMaXN0PFN0cmluZz4gX3N1cHBvcnRlZExhbmd1YWdlQ29kZXMgPQogICAgICBBcHBMb2NhbGVVdGlscy5zdXBwb3J0ZWRMb2NhbGVzLm1hcCgoaXQpID0+IGl0Lmxhbmd1YWdlQ29kZSkudG9MaXN0KCk7CgogIEBvdmVycmlkZQogIGJvb2wgaXNTdXBwb3J0ZWQoTG9jYWxlIGxvY2FsZSkgPT4KICAgICAgX3N1cHBvcnRlZExhbmd1YWdlQ29kZXMuY29udGFpbnMobG9jYWxlLmxhbmd1YWdlQ29kZSk7CgogIEBvdmVycmlkZQogIGJvb2wgc2hvdWxkUmVsb2FkKFNsYW5nRGVsZWdhdGUgb2xkKSA9PiBvbGQgIT0gdGhpczsKfQoKZXh0ZW5zaW9uIEFwcExvY2FsZUV4dCBvbiBMb2NhbGUgewogIEFwcExvY2FsZSBhc0FwcExvY2FsZSgpIHsKICAgIGZpbmFsIGxvY2FsZSA9IHRoaXM7CiAgICBmaW5hbCBhcHBMb2NhbGUgPSBBcHBMb2NhbGUudmFsdWVzLmZpcnN0V2hlcmVPck51bGwoKGl0KSA9PgogICAgICAgICAgICBpdC5sYW5ndWFnZUNvZGUgPT0gbG9jYWxlLmxhbmd1YWdlQ29kZSAmJgogICAgICAgICAgICBpdC5jb3VudHJ5Q29kZSA9PSBsb2NhbGUuY291bnRyeUNvZGUgJiYKICAgICAgICAgICAgaXQuc2NyaXB0Q29kZSA9PSBsb2NhbGUuc2NyaXB0Q29kZSkgPz8KICAgICAgICBBcHBMb2NhbGUudmFsdWVzLmZpcnN0V2hlcmVPck51bGwoKGl0KSA9PgogICAgICAgICAgICBpdC5sYW5ndWFnZUNvZGUgPT0gbG9jYWxlLmxhbmd1YWdlQ29kZSAmJgogICAgICAgICAgICBpdC5jb3VudHJ5Q29kZSA9PSBsb2NhbGUuY291bnRyeUNvZGUpID8/CiAgICAgICAgQXBwTG9jYWxlLnZhbHVlcwogICAgICAgICAgICAuZmlyc3RXaGVyZU9yTnVsbCgoaXQpID0+IGl0Lmxhbmd1YWdlQ29kZSA9PSBsb2NhbGUubGFuZ3VhZ2VDb2RlKTsKICAgIGlmIChhcHBMb2NhbGUgPT0gbnVsbCkgewogICAgICB0aHJvdyBTdGF0ZUVycm9yKCJEaWRuJ3QgZmluZCBBcHBMb2NhbGUgZm9yIExvY2FsZSgkbG9jYWxlKSIpOwogICAgfQogICAgcmV0dXJuIGFwcExvY2FsZTsKICB9Cn0K';
  static String get assets_strings_extension_mustache =>
      _decode(_assets_strings_extension_mustache);
  static const String _assets_translation_scope_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyX2hvb2tzL2ZsdXR0ZXJfaG9va3MuZGFydCc7CmltcG9ydCAncGFja2FnZTp7e3BhY2thZ2VOYW1lfX0ve3t7aTE4bn19fS9zdHJpbmdzLmcuZGFydCc7CmltcG9ydCAncGFja2FnZTp7e3BhY2thZ2VOYW1lfX0ve3t7c3RyaW5nU3Rvcnl9fX0vc3RyaW5nX3N0b3J5LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6c2xhbmcvZ2VuZXJhdGVkLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6cHJvdmlkZXIvcHJvdmlkZXIuZGFydCc7CgpjbGFzcyBUcmFuc2xhdGlvblNjb3BlS2V5cyB7CiAgVHJhbnNsYXRpb25TY29wZUtleXMoe3RoaXMub25BZGR9KTsKCiAgZmluYWwgdm9pZCBGdW5jdGlvbihTdHJpbmcpPyBvbkFkZDsKICBmaW5hbCBfcGF0aHMgPSA8U3RyaW5nPnt9OwoKICB2b2lkIGFkZChTdHJpbmcga2V5KSB7CiAgICBfcGF0aHMuYWRkKGtleSk7CiAgICBvbkFkZD8uY2FsbChrZXkpOwogIH0KCiAgU2V0PFN0cmluZz4gZ2V0IHZhbHVlID0+IFNldDxTdHJpbmc+Lm9mKF9wYXRocyk7CgogIHN0YXRpYyBUcmFuc2xhdGlvblNjb3BlS2V5cz8gb2YoQnVpbGRDb250ZXh0IGNvbnRleHQpID0+CiAgICAgIGNvbnRleHQucmVhZDxUcmFuc2xhdGlvblNjb3BlS2V5cz8+KCk7Cn0KCmNsYXNzIFRyYW5zbGF0aW9uU2NvcGUgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBjb25zdCBUcmFuc2xhdGlvblNjb3BlKHsKICAgIHN1cGVyLmtleSwKICAgIHRoaXMuaXNFbmFibGVkID0gdHJ1ZSwKICAgIHJlcXVpcmVkIHRoaXMuY2hpbGQsCiAgICB0aGlzLnNjb3BlS2V5cywKICAgIHRoaXMuZGVidWdMYWJlbCwKICB9KTsKCiAgZmluYWwgYm9vbCBpc0VuYWJsZWQ7CiAgZmluYWwgV2lkZ2V0IGNoaWxkOwogIGZpbmFsIFRyYW5zbGF0aW9uU2NvcGVLZXlzPyBzY29wZUtleXM7CiAgZmluYWwgU3RyaW5nPyBkZWJ1Z0xhYmVsOwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGlmICghaXNFbmFibGVkKSB7CiAgICAgIHJldHVybiBjaGlsZDsKICAgIH0KCiAgICBmaW5hbCB0cmFuc2xhdGlvbnMgPSBjb250ZXh0LnN0cmluZ3M7CiAgICBmaW5hbCBtZXRhID0gdHJhbnNsYXRpb25zLiRtZXRhOwogICAgZmluYWwgZWZmZWN0aXZlU2NvcGVLZXlzID0gc2NvcGVLZXlzID8/IFRyYW5zbGF0aW9uU2NvcGVLZXlzKCk7CgogICAgZmluYWwgbWV0YVNweSA9IFNweVRyYW5zbGF0aW9uTWV0YWRhdGEoCiAgICAgIGRlYnVnTGFiZWw6IGRlYnVnTGFiZWwsCiAgICAgIGxvY2FsZTogbWV0YS5sb2NhbGUsCiAgICAgIG92ZXJyaWRlczogbWV0YS5vdmVycmlkZXMsCiAgICAgIGNhcmRpbmFsUmVzb2x2ZXI6IG1ldGEuY2FyZGluYWxSZXNvbHZlciwKICAgICAgb3JkaW5hbFJlc29sdmVyOiBtZXRhLm9yZGluYWxSZXNvbHZlciwKICAgICAgb25QYXRoQWNjZXNzZWQ6IChwYXRoKSB7CiAgICAgICAgZWZmZWN0aXZlU2NvcGVLZXlzLmFkZChwYXRoKTsKICAgICAgfSwKICAgICk7CgogICAgcmV0dXJuIExvY2FsaXphdGlvbnMub3ZlcnJpZGUoCiAgICAgIGNvbnRleHQ6IGNvbnRleHQsCiAgICAgIGRlbGVnYXRlczogWwogICAgICAgIFNsYW5nRGVsZWdhdGUoCiAgICAgICAgICBvdmVycmlkZVRyYW5zbGF0aW9uOiB0cmFuc2xhdGlvbnMuJGNvcHlXaXRoKG1ldGE6IG1ldGFTcHkpLAogICAgICAgICkKICAgICAgXSwKICAgICAgY2hpbGQ6IFByb3ZpZGVyLnZhbHVlKAogICAgICAgIHZhbHVlOiBlZmZlY3RpdmVTY29wZUtleXMsCiAgICAgICAgY2hpbGQ6IGNoaWxkLAogICAgICApLAogICAgKTsKICB9Cn0KCmNsYXNzIFNweVRyYW5zbGF0aW9uTWV0YWRhdGEKICAgIGV4dGVuZHMgVHJhbnNsYXRpb25NZXRhZGF0YTxBcHBMb2NhbGUsIFRyYW5zbGF0aW9ucz4gewogIFNweVRyYW5zbGF0aW9uTWV0YWRhdGEoewogICAgdGhpcy5kZWJ1Z0xhYmVsLAogICAgcmVxdWlyZWQgc3VwZXIubG9jYWxlLAogICAgcmVxdWlyZWQgc3VwZXIub3ZlcnJpZGVzLAogICAgcmVxdWlyZWQgc3VwZXIuY2FyZGluYWxSZXNvbHZlciwKICAgIHJlcXVpcmVkIHN1cGVyLm9yZGluYWxSZXNvbHZlciwKICAgIHJlcXVpcmVkIHRoaXMub25QYXRoQWNjZXNzZWQsCiAgfSk7CgogIGZpbmFsIFN0cmluZz8gZGVidWdMYWJlbDsKICBmaW5hbCB2b2lkIEZ1bmN0aW9uKFN0cmluZykgb25QYXRoQWNjZXNzZWQ7CgogIEBvdmVycmlkZQogIE5vZGU/IGdldE92ZXJyaWRlKFN0cmluZyBwYXRoKSB7CiAgICBvblBhdGhBY2Nlc3NlZChwYXRoKTsKICAgIHJldHVybiBzdXBlci5nZXRPdmVycmlkZShwYXRoKTsKICB9Cn0K';
  static String get assets_translation_scope_mustache =>
      _decode(_assets_translation_scope_mustache);
  static const String _assets_slang_base_state_ext_mustache =
      'aW1wb3J0ICdwYWNrYWdlOnt7cGFja2FnZU5hbWV9fS97e3tpMThufX19L3N0cmluZ3MuZy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnt7cGFja2FnZU5hbWV9fS97e3tzdHJpbmdTdG9yeX19fS9zdHJpbmdfc3RvcnkuZGFydCc7CmltcG9ydCAncGFja2FnZTpzdHJpbmdfc3Rvcnkvc3RyaW5nX3N0b3J5LmRhcnQnCiAgICBzaG93IFNsYW5nQmFzZVN0YXRlLCBTbGFuZ0Jhc2VTdGF0ZUlkbGUsIFNsYW5nQmFzZVN0YXRlRGF0YTsKCmV4dGVuc2lvbiBTbGFuZ0Jhc2VTdGF0ZUV4dCBvbiBTbGFuZ0Jhc2VTdGF0ZSB7CiAgU2xhbmdEZWxlZ2F0ZSBhc1NsYW5nRGVsZWdhdGUoKSB7CiAgICBmaW5hbCBzdGF0ZSA9IHRoaXM7CgogICAgcmV0dXJuIHN3aXRjaCAoc3RhdGUpIHsKICAgICAgU2xhbmdCYXNlU3RhdGVJZGxlKCkgPT4gU2xhbmdEZWxlZ2F0ZS5kZWxlZ2F0ZSwKICAgICAgU2xhbmdCYXNlU3RhdGVEYXRhKCkgPT4gU2xhbmdEZWxlZ2F0ZSgKICAgICAgICAgIG92ZXJyaWRlVHJhbnNsYXRpb246IEFwcExvY2FsZVV0aWxzLmJ1aWxkV2l0aE92ZXJyaWRlc0Zyb21NYXBTeW5jKAogICAgICAgICAgICBsb2NhbGU6IF9mcm9tTGFuZ3VhZ2VDb2RlKHN0YXRlLmxhbmd1YWdlQ29kZSksCiAgICAgICAgICAgIGlzRmxhdE1hcDogZmFsc2UsCiAgICAgICAgICAgIG1hcDogc3RhdGUuc2xhbmdKc29uLAogICAgICAgICAgKSwKICAgICAgICApLAogICAgfTsKICB9Cn0KCkFwcExvY2FsZSBfZnJvbUxhbmd1YWdlQ29kZShTdHJpbmcgY29kZSkgPT4KICAgIEFwcExvY2FsZS52YWx1ZXMuZmlyc3RXaGVyZSgoaXQpID0+IGl0Lmxhbmd1YWdlQ29kZSA9PSBjb2RlKTsK';
  static String get assets_slang_base_state_ext_mustache =>
      _decode(_assets_slang_base_state_ext_mustache);
  static const String _assets_string_story_generated_delegate_impl_mustache =
      'aW1wb3J0ICdkYXJ0OnVpJzsKCmltcG9ydCAncGFja2FnZTp7e3BhY2thZ2VOYW1lfX0ve3t7c3RyaW5nU3Rvcnl9fX0vc3RyaW5nX3N0b3J5LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6c3RyaW5nX3N0b3J5L3N0cmluZ19zdG9yeS5kYXJ0JzsKCmNsYXNzIFN0cmluZ1N0b3J5R2VuZXJhdGVkRGVsZWdhdGVJbXBsIGV4dGVuZHMgU3RyaW5nU3RvcnlHZW5lcmF0ZWREZWxlZ2F0ZSB7CiAgQG92ZXJyaWRlCiAgRnV0dXJlPHZvaWQ+IHByZWxvYWQoTG9jYWxlIGxvY2FsZSkgYXN5bmMgewogICAgYXdhaXQgU2xhbmdEZWxlZ2F0ZS5kZWxlZ2F0ZS5sb2FkKGxvY2FsZSk7CiAgfQoKICBAb3ZlcnJpZGUKICB2b2lkIHZhbGlkYXRlU3RhdGVEYXRhKFNsYW5nQmFzZVN0YXRlRGF0YSBzdGF0ZSkgewogICAgc3RhdGUuYXNTbGFuZ0RlbGVnYXRlKCk7CiAgfQoKICBAb3ZlcnJpZGUKICBMaXN0PFN0cmluZz4gZ2V0IHBlcm1pdHRlZEtleXMgPT4KICAgICAgU3RyaW5nS2V5LnZhbHVlcy5tYXAoKGl0KSA9PiBpdC5rZXkpLnRvTGlzdCgpOwoKICBAb3ZlcnJpZGUKICBpbnQgZ2V0IHZlcnNpb25Db2RlID0+IHt7dmVyc2lvbkNvZGV9fTsKCiAgQG92ZXJyaWRlCiAgU3RyaW5nIGdldCBqc29uQXNzZXRzUGF0aCA9PiAie3t7anNvbkFzc2V0c1BhdGh9fX0iOwoKICBAb3ZlcnJpZGUKICBTdHJpbmcgZ2V0IGJhc2VMb2NhbGUgPT4gInt7YmFzZUxvY2FsZX19IjsKfQo=';
  static String get assets_string_story_generated_delegate_impl_mustache =>
      _decode(_assets_string_story_generated_delegate_impl_mustache);
  static const String _assets_locale_editor_widget_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdwYWNrYWdlOmNvbGxlY3Rpb24vY29sbGVjdGlvbi5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmZsYWcvZmxhZy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyX2Jsb2MvZmx1dHRlcl9ibG9jLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlcl9ob29rcy9mbHV0dGVyX2hvb2tzLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6e3twYWNrYWdlTmFtZX19L3t7e3N0cmluZ1N0b3J5fX19L3N0cmluZ19zdG9yeS5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnNjcm9sbHZpZXdfb2JzZXJ2ZXIvc2Nyb2xsdmlld19vYnNlcnZlci5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnNsaXZlcl90b29scy9zbGl2ZXJfdG9vbHMuZGFydCc7CmltcG9ydCAncGFja2FnZTpzdHJpbmdfc3Rvcnkvc3RyaW5nX3N0b3J5LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6ZXF1YXRhYmxlL2VxdWF0YWJsZS5kYXJ0JzsKCmNsYXNzIExvY2FsZUVkaXRvcldpZGdldCBleHRlbmRzIEhvb2tXaWRnZXQgewogIGNvbnN0IExvY2FsZUVkaXRvcldpZGdldCh7CiAgICBzdXBlci5rZXksCiAgICByZXF1aXJlZCB0aGlzLnNob3dTY29wZWRWYWx1ZXMsCiAgICByZXF1aXJlZCB0aGlzLmlzU2VhcmNoQXZhaWxhYmxlLAogICAgdGhpcy5zZWFyY2hGYWRlQ29sb3JzLAogICAgcmVxdWlyZWQgdGhpcy5vbkpzb25QYXRoU2VsZWN0ZWQsCiAgfSk7CgogIGZpbmFsIGJvb2wgc2hvd1Njb3BlZFZhbHVlczsKICBmaW5hbCBib29sIGlzU2VhcmNoQXZhaWxhYmxlOwogIGZpbmFsIExpc3Q8Q29sb3I+PyBzZWFyY2hGYWRlQ29sb3JzOwogIGZpbmFsIFZhbHVlQ2hhbmdlZDxTdHJpbmc+IG9uSnNvblBhdGhTZWxlY3RlZDsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBlZGl0b3IgPSBjb250ZXh0LndhdGNoPFNsYW5nRWRpdG9yQ3ViaXQ+KCk7CiAgICBmaW5hbCBhcHByb3ZlZEtleXMgPSBjb250ZXh0LnNlbGVjdCgoU2xhbmdCYXNlQ3ViaXQgYykgPT4gYy5zdGF0ZQogICAgICAgICAgICAubWF5YmVNYXAoZGF0YTogKGl0KSA9PiBpdC5hcHByb3ZlZEtleXMsIG9yRWxzZTogKCkgPT4gbnVsbCkpID8/CiAgICAgICAgPFN0cmluZz5bXTsKICAgIGZpbmFsIGVkaXRvclN0YXRlID0gZWRpdG9yLnN0YXRlOwogICAgZmluYWwgZGlzcGxheUFsbCA9IHVzZVN0YXRlKCFzaG93U2NvcGVkVmFsdWVzKTsKICAgIGZpbmFsIGZvY3VzUHJvdmlkZXIgPSB1c2VNZW1vaXplZCgoKSA9PiBfRm9jdXNQcm92aWRlcigpKTsKICAgIHVzZUVmZmVjdCgoKSB7CiAgICAgIHJldHVybiAoKSB7CiAgICAgICAgZm9jdXNQcm92aWRlci5kaXNwb3NlKCk7CiAgICAgIH07CiAgICB9LCBbZm9jdXNQcm92aWRlcl0pOwoKICAgIGZpbmFsIHNsaXZlckxpc3RDdHggPSB1c2VSZWY8QnVpbGRDb250ZXh0Pz4obnVsbCk7CiAgICBmaW5hbCBzY3JvbGxDb250cm9sbGVyID0gdXNlU2Nyb2xsQ29udHJvbGxlcigpOwogICAgZmluYWwgb2JzZXJ2ZXJDb250cm9sbGVyID0gdXNlTWVtb2l6ZWQoCiAgICAgICAgKCkgPT4gU2xpdmVyT2JzZXJ2ZXJDb250cm9sbGVyKGNvbnRyb2xsZXI6IHNjcm9sbENvbnRyb2xsZXIpLAogICAgICAgIFtzY3JvbGxDb250cm9sbGVyXSk7CgogICAgZmluYWwgc2xhbmdKc29uID0gZWRpdG9yU3RhdGUuZWZmZWN0aXZlU2xhbmdKc29uKGRpc3BsYXlBbGwudmFsdWUpOwogICAgZmluYWwga2V5cyA9IHNsYW5nSnNvbi5zdHJpbmdLZXlzOwoKICAgIGZpbmFsIHNlbGVjdGVkS2V5ID0gdXNlTWVtb2l6ZWQoKCkgewogICAgICBmaW5hbCBub3JtYWxpemVkID0gZWRpdG9yU3RhdGUuc2VsZWN0ZWRLZXk/LnNwbGl0KCIuIikuZmlyc3Q7CiAgICAgIHJldHVybiBTdHJpbmdLZXkudmFsdWVzLmZpcnN0V2hlcmVPck51bGwoKGl0KSA9PiBpdC5rZXkgPT0gbm9ybWFsaXplZCk7CiAgICB9LCBbZWRpdG9yU3RhdGUuc2VsZWN0ZWRLZXldKTsKCiAgICBGdXR1cmU8dm9pZD4gc2Nyb2xsVG8oU3RyaW5nS2V5IHN0cmluZ0tleSkgYXN5bmMgewogICAgICBmaW5hbCBpbmRleCA9IGVkaXRvci5zdGF0ZQogICAgICAgICAgLmVmZmVjdGl2ZVNsYW5nSnNvbihkaXNwbGF5QWxsLnZhbHVlKQogICAgICAgICAgLnN0cmluZ0tleXMKICAgICAgICAgIC5pbmRleE9mKHN0cmluZ0tleSk7CiAgICAgIGlmIChpbmRleCA9PSAtMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgYXdhaXQgb2JzZXJ2ZXJDb250cm9sbGVyLmFuaW1hdGVUbygKICAgICAgICBzbGl2ZXJDb250ZXh0OiBzbGl2ZXJMaXN0Q3R4LnZhbHVlLAogICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICBkdXJhdGlvbjogRHVyYXRpb25zLm1lZGl1bTEsCiAgICAgICAgY3VydmU6IEN1cnZlcy5lYXNlSW5PdXQsCiAgICAgICAgb2Zmc2V0OiAodGFyZ2V0T2Zmc2V0KSB7CiAgICAgICAgICByZXR1cm4gaXNTZWFyY2hBdmFpbGFibGUKICAgICAgICAgICAgICA/IEZsb2F0aW5nU2VhcmNoQmFyLnByZWZlcnJlZEhlaWdodChjb250ZXh0KQogICAgICAgICAgICAgIDogMDsKICAgICAgICB9LAogICAgICApOwogICAgICBpZiAoZWRpdG9yU3RhdGUuc2VhcmNoUmVzdWx0cy5pc0VtcHR5KSB7CiAgICAgICAgZm9jdXNQcm92aWRlci5yZXF1ZXN0Rm9jdXMoc3RyaW5nS2V5KTsKICAgICAgfQogICAgfQoKICAgIC8vIHNjcm9sbCB0byBrZXkgZWZmZWN0CiAgICB1c2VFZmZlY3QoKCkgewogICAgICBmaW5hbCBrZXkgPSBTdHJpbmdLZXkudmFsdWVzCiAgICAgICAgICAuZmlyc3RXaGVyZU9yTnVsbCgoaXQpID0+IGl0LmtleSA9PSBlZGl0b3JTdGF0ZS5zY3JvbGxUb0tleSk7CiAgICAgIGlmIChrZXkgIT0gbnVsbCkgewogICAgICAgIHNjcm9sbFRvKGtleSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwgW2VkaXRvclN0YXRlLnNjcm9sbFRvS2V5XSk7CgogICAgdm9pZCBtb3ZlKGludCBvZmZzZXQpIHsKICAgICAgZmluYWwgc2sgPSBzZWxlY3RlZEtleTsKICAgICAgaWYgKHNrID09IG51bGwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZmluYWwgaW5kZXggPSBrZXlzLmluZGV4T2Yoc2spOwogICAgICBpZiAoaW5kZXggPT0gLTEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZmluYWwgbmV4dEluZGV4ID0gKGluZGV4ICsgb2Zmc2V0KSAlIGtleXMubGVuZ3RoOwogICAgICBmaW5hbCBuZXh0S2V5ID0ga2V5c1tuZXh0SW5kZXhdOwogICAgICBmb2N1c1Byb3ZpZGVyLm9idGFpbihuZXh0S2V5LmtleSkucmVxdWVzdEZvY3VzKCk7CiAgICB9CgogICAgdm9pZCBuZXh0KCkgPT4gbW92ZSgxKTsKCiAgICBXaWRnZXQgaXRlbUJ1aWxkZXIoQnVpbGRDb250ZXh0IGNvbnRleHQsIGludCBpbmRleCkgewogICAgICBzbGl2ZXJMaXN0Q3R4LnZhbHVlID0gY29udGV4dDsKICAgICAgZmluYWwga2V5ID0ga2V5c1tpbmRleF07CiAgICAgIGZpbmFsIHZhbHVlID0gc2xhbmdKc29uW2tleS5rZXldOwogICAgICBmaW5hbCBiYXNlVmFsdWUgPSBlZGl0b3JTdGF0ZS5iYXNlVmFsdWUoa2V5LmtleSk7CgogICAgICBmaW5hbCBzdHJpbmdLZXlTdGF0dXMgPSBTdHJpbmdLZXlTdGF0dXMoCiAgICAgICAgaXNBcHByb3ZlZDogYXBwcm92ZWRLZXlzLmNvbnRhaW5zKGtleS5rZXkpLAogICAgICAgIGlzQ2hhbmdlZDogZWRpdG9yU3RhdGUuaGFzS2V5Q2hhbmdlZChrZXkua2V5KSwKICAgICAgICBpc1NlbGVjdGVkOiBzZWxlY3RlZEtleSA9PSBrZXksCiAgICAgICAgaXNTZWFyY2hlZDogZWRpdG9yU3RhdGUuc2VhcmNoUmVzdWx0cy5jb250YWlucyhrZXkua2V5KSwKICAgICAgKTsKCiAgICAgIHJldHVybiBfS2V5V2lkZ2V0KAogICAgICAgIGJhc2VMYW5ndWFnZUZsYWdDb2RlOiBTdHJpbmdTdG9yeVNlcnZpY2UKICAgICAgICAgICAgLmluc3RhbmNlLmdlbmVyYXRlZERlbGVnYXRlLmJhc2VMb2NhbGUKICAgICAgICAgICAgLnRvRmxhZ0NvZGUoKSwKICAgICAgICBzdHJpbmdLZXk6IGtleSwKICAgICAgICBzdHJpbmdLZXlTdGF0dXM6IHN0cmluZ0tleVN0YXR1cywKICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgYmFzZVZhbHVlOiBiYXNlVmFsdWUsCiAgICAgICAgaXNNdWx0aWxpbmU6IGJhc2VWYWx1ZSBpcyBTdHJpbmcgJiYgYmFzZVZhbHVlLmNvbnRhaW5zKCJcbiIpLAogICAgICAgIGZvY3VzUHJvdmlkZXI6IGZvY3VzUHJvdmlkZXIsCiAgICAgICAgbmV4dDogbmV4dCwKICAgICAgICBvbkpzb25QYXRoU2VsZWN0ZWQ6IChqc29uUGF0aCkgewogICAgICAgICAgZWRpdG9yLnNlbGVjdEtleShqc29uUGF0aCk7CiAgICAgICAgICBvbkpzb25QYXRoU2VsZWN0ZWQoanNvblBhdGgpOwogICAgICAgIH0sCiAgICAgICAgb25Db21taXRWYWx1ZTogKGpzb25QYXRoLCB2YWx1ZSkgewogICAgICAgICAgZmluYWwgYmFzZUN1Yml0ID0gY29udGV4dC5yZWFkPFNsYW5nQmFzZUN1Yml0PigpOwogICAgICAgICAgaWYgKCFqc29uUGF0aC5jb250YWlucygiLiIpKSB7CiAgICAgICAgICAgIGJhc2VDdWJpdC5hcHBseUNoYW5nZSh7anNvblBhdGg6IHZhbHVlfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhcHByb3ZlOiAoKSB7CiAgICAgICAgICBmaW5hbCBiYXNlQ3ViaXQgPSBjb250ZXh0LnJlYWQ8U2xhbmdCYXNlQ3ViaXQ+KCk7CiAgICAgICAgICBpZiAoc3RyaW5nS2V5U3RhdHVzLmlzQXBwcm92ZWQpIHsKICAgICAgICAgICAgYmFzZUN1Yml0LnVuYXBwcm92ZUtleShrZXkua2V5KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJhc2VDdWJpdC5hcHByb3ZlS2V5KGtleS5rZXkpOwogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICByZXNldDogKCkgewogICAgICAgICAgaWYgKHN0cmluZ0tleVN0YXR1cy5pc0FwcHJvdmVkKSB7CiAgICAgICAgICAgIGZpbmFsIGJhc2VDdWJpdCA9IGNvbnRleHQucmVhZDxTbGFuZ0Jhc2VDdWJpdD4oKTsKICAgICAgICAgICAgYmFzZUN1Yml0LnVuYXBwcm92ZUtleShrZXkua2V5KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVkaXRvci5yZXNldEtleShrZXkua2V5KTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICApOwogICAgfQoKICAgIHJldHVybiBGb2N1c1RyYXZlcnNhbEdyb3VwKAogICAgICBjaGlsZDogU2xpdmVyVmlld09ic2VydmVyKAogICAgICAgIGNvbnRyb2xsZXI6IG9ic2VydmVyQ29udHJvbGxlciwKICAgICAgICBjaGlsZDogQ3VzdG9tU2Nyb2xsVmlldygKICAgICAgICAgIGNvbnRyb2xsZXI6IHNjcm9sbENvbnRyb2xsZXIsCiAgICAgICAgICBzbGl2ZXJzOiBbCiAgICAgICAgICAgIGlmIChpc1NlYXJjaEF2YWlsYWJsZSkKICAgICAgICAgICAgICBTbGl2ZXJQaW5uZWRIZWFkZXIoCiAgICAgICAgICAgICAgICBjaGlsZDogX0tleVNlYXJjaEJhcigKICAgICAgICAgICAgICAgICAgc2VhcmNoRmFkZUNvbG9yczogc2VhcmNoRmFkZUNvbG9ycywKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgU2xpdmVyTGlzdC5idWlsZGVyKAogICAgICAgICAgICAgIGl0ZW1CdWlsZGVyOiBpdGVtQnVpbGRlciwKICAgICAgICAgICAgICBpdGVtQ291bnQ6IGtleXMubGVuZ3RoLAogICAgICAgICAgICApCiAgICAgICAgICBdLAogICAgICAgICksCiAgICAgICksCiAgICApOwogIH0KfQoKY2xhc3MgU3RyaW5nS2V5U3RhdHVzIGV4dGVuZHMgRXF1YXRhYmxlIHsKICBjb25zdCBTdHJpbmdLZXlTdGF0dXMoewogICAgcmVxdWlyZWQgdGhpcy5pc0FwcHJvdmVkLAogICAgcmVxdWlyZWQgdGhpcy5pc0NoYW5nZWQsCiAgICByZXF1aXJlZCB0aGlzLmlzU2VsZWN0ZWQsCiAgICByZXF1aXJlZCB0aGlzLmlzU2VhcmNoZWQsCiAgfSk7CgogIGZpbmFsIGJvb2wgaXNBcHByb3ZlZDsKICBmaW5hbCBib29sIGlzQ2hhbmdlZDsKICBmaW5hbCBib29sIGlzU2VsZWN0ZWQ7CiAgZmluYWwgYm9vbCBpc1NlYXJjaGVkOwoKICBAb3ZlcnJpZGUKICBMaXN0PE9iamVjdD8+IGdldCBwcm9wcyA9PiBbCiAgICAgICAgaXNBcHByb3ZlZCwKICAgICAgICBpc0NoYW5nZWQsCiAgICAgICAgaXNTZWxlY3RlZCwKICAgICAgICBpc1NlYXJjaGVkLAogICAgICBdOwp9CgpleHRlbnNpb24gU3RyaW5nS2V5U3RhdHVzRXh0ZW5zaW9uIG9uIFN0cmluZ0tleVN0YXR1cyB7CiAgQ29sb3IgYXNDb2xvcigpIHsKICAgIGlmIChpc1NlYXJjaGVkKSB7CiAgICAgIHJldHVybiBDb2xvcnMuYmx1ZUFjY2VudDsKICAgIH0gZWxzZSBpZiAoaXNDaGFuZ2VkKSB7CiAgICAgIHJldHVybiBDb2xvcnMuYW1iZXJBY2NlbnQ7CiAgICB9IGVsc2UgaWYgKGlzQXBwcm92ZWQpIHsKICAgICAgcmV0dXJuIENvbG9ycy5saWdodEdyZWVuQWNjZW50OwogICAgfSBlbHNlIGlmIChpc1NlbGVjdGVkKSB7CiAgICAgIHJldHVybiBDb2xvcnMuYmx1ZUdyZXkud2l0aFZhbHVlcyhhbHBoYTogMC4yKTsKICAgIH0KICAgIHJldHVybiBDb2xvcnMudHJhbnNwYXJlbnQ7CiAgfQp9CgphYnN0cmFjdCBjbGFzcyBfS2V5V2lkZ2V0QmFzZUNvbnRyb2xsZXIgewogIGZpbmFsIFN0cmluZ0tleSBrZXk7CgogIF9LZXlXaWRnZXRCYXNlQ29udHJvbGxlcih7cmVxdWlyZWQgdGhpcy5rZXl9KTsKCiAgT2JqZWN0PyBnZXRDb21taXRWYWx1ZSgpOwp9CgpjbGFzcyBfS2V5V2lkZ2V0U3RyaW5nQ29udHJvbGxlciBleHRlbmRzIF9LZXlXaWRnZXRCYXNlQ29udHJvbGxlciB7CiAgX0tleVdpZGdldFN0cmluZ0NvbnRyb2xsZXIoe3JlcXVpcmVkIHN1cGVyLmtleX0pOwoKICBUZXh0RWRpdGluZ0NvbnRyb2xsZXI/IF9jb250cm9sbGVyOwoKICB2b2lkIGF0dGFjaChUZXh0RWRpdGluZ0NvbnRyb2xsZXIgY29udHJvbGxlcikgewogICAgLy8gaWdub3JlOiB1bm5lY2Vzc2FyeV90aGlzCiAgICB0aGlzLl9jb250cm9sbGVyID0gY29udHJvbGxlcjsKICB9CgogIHZvaWQgZGV0YWNoKCkgewogICAgLy8gaWdub3JlOiB1bm5lY2Vzc2FyeV90aGlzCiAgICB0aGlzLl9jb250cm9sbGVyID0gbnVsbDsKICB9CgogIEBvdmVycmlkZQogIE9iamVjdD8gZ2V0Q29tbWl0VmFsdWUoKSB7CiAgICByZXR1cm4gX2NvbnRyb2xsZXI/LnRleHQ7CiAgfQp9CgpjbGFzcyBfS2V5V2lkZ2V0TWFwQ29udHJvbGxlciBleHRlbmRzIF9LZXlXaWRnZXRCYXNlQ29udHJvbGxlciB7CiAgX0tleVdpZGdldE1hcENvbnRyb2xsZXIoe3JlcXVpcmVkIHN1cGVyLmtleX0pOwoKICBmaW5hbCBjb250cm9sbGVycyA9IDxTdHJpbmcsIF9LZXlXaWRnZXRTdHJpbmdDb250cm9sbGVyPnt9OwoKICBfS2V5V2lkZ2V0U3RyaW5nQ29udHJvbGxlciBnZXRDb250cm9sbGVyRm9yS2V5KFN0cmluZyBzdWJLZXkpID0+IGNvbnRyb2xsZXJzCiAgICAgIC5wdXRJZkFic2VudChzdWJLZXksICgpID0+IF9LZXlXaWRnZXRTdHJpbmdDb250cm9sbGVyKGtleToga2V5KSk7CgogIHZvaWQgZGV0YWNoKCkgewogICAgY29udHJvbGxlcnMuY2xlYXIoKTsKICB9CgogIEBvdmVycmlkZQogIE9iamVjdD8gZ2V0Q29tbWl0VmFsdWUoKSB7CiAgICBmaW5hbCBrZXlzID0gTGlzdDxTdHJpbmc+LmZyb20oY29udHJvbGxlcnMua2V5cykuLnNvcnQoKTsKICAgIGlmIChrZXlzLmlzRW1wdHkpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgZm9yIChmaW5hbCBrZXkgaW4ga2V5cykga2V5OiBjb250cm9sbGVyc1trZXldIS5fY29udHJvbGxlciEudGV4dCwKICAgIH07CiAgfQp9CgpjbGFzcyBfS2V5V2lkZ2V0IGV4dGVuZHMgSG9va1dpZGdldCB7CiAgX0tleVdpZGdldCh7CiAgICByZXF1aXJlZCB0aGlzLnN0cmluZ0tleSwKICAgIHJlcXVpcmVkIHRoaXMuc3RyaW5nS2V5U3RhdHVzLAogICAgcmVxdWlyZWQgdGhpcy52YWx1ZSwKICAgIHJlcXVpcmVkIHRoaXMuYmFzZVZhbHVlLAogICAgcmVxdWlyZWQgdGhpcy5vbkpzb25QYXRoU2VsZWN0ZWQsCiAgICByZXF1aXJlZCB0aGlzLmlzTXVsdGlsaW5lLAogICAgcmVxdWlyZWQgdGhpcy5vbkNvbW1pdFZhbHVlLAogICAgcmVxdWlyZWQgdGhpcy5mb2N1c1Byb3ZpZGVyLAogICAgcmVxdWlyZWQgdGhpcy5uZXh0LAogICAgcmVxdWlyZWQgdGhpcy5yZXNldCwKICAgIHJlcXVpcmVkIHRoaXMuYXBwcm92ZSwKICAgIHJlcXVpcmVkIHRoaXMuYmFzZUxhbmd1YWdlRmxhZ0NvZGUsCiAgfSkgOiBzdXBlcihrZXk6IFZhbHVlS2V5KHN0cmluZ0tleSkpOwoKICBmaW5hbCBTdHJpbmdLZXkgc3RyaW5nS2V5OwogIGZpbmFsIFN0cmluZ0tleVN0YXR1cyBzdHJpbmdLZXlTdGF0dXM7CiAgZmluYWwgT2JqZWN0IHZhbHVlOwogIGZpbmFsIE9iamVjdCBiYXNlVmFsdWU7CiAgZmluYWwgYm9vbCBpc011bHRpbGluZTsKCiAgZmluYWwgVmFsdWVDaGFuZ2VkPFN0cmluZz4gb25Kc29uUGF0aFNlbGVjdGVkOwogIGZpbmFsIHZvaWQgRnVuY3Rpb24oU3RyaW5nIGpzb25QYXRoLCBPYmplY3QgdmFsdWUpIG9uQ29tbWl0VmFsdWU7CiAgZmluYWwgX0ZvY3VzUHJvdmlkZXIgZm9jdXNQcm92aWRlcjsKICBmaW5hbCBWb2lkQ2FsbGJhY2sgbmV4dDsKICBmaW5hbCBWb2lkQ2FsbGJhY2sgcmVzZXQ7CiAgZmluYWwgVm9pZENhbGxiYWNrIGFwcHJvdmU7CiAgZmluYWwgRmxhZ3NDb2RlIGJhc2VMYW5ndWFnZUZsYWdDb2RlOwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGZpbmFsIHZhbHVlID0gdGhpcy52YWx1ZTsKICAgIGZpbmFsIGJhY2tncm91bmRDb2xvciA9IHN0cmluZ0tleVN0YXR1cy5hc0NvbG9yKCk7CgogICAgZmluYWwgY29udHJvbGxlciA9IHVzZU1lbW9pemVkKCgpIHsKICAgICAgaWYgKHZhbHVlIGlzIFN0cmluZykgewogICAgICAgIHJldHVybiBfS2V5V2lkZ2V0U3RyaW5nQ29udHJvbGxlcihrZXk6IHN0cmluZ0tleSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIF9LZXlXaWRnZXRNYXBDb250cm9sbGVyKGtleTogc3RyaW5nS2V5KTsKICAgICAgfQogICAgfSwgW3N0cmluZ0tleV0pOwoKICAgIHZvaWQgd3JhcHBlZEFwcHJvdmUoKSB7CiAgICAgIGZpbmFsIHZhbHVlID0gY29udHJvbGxlci5nZXRDb21taXRWYWx1ZSgpOwogICAgICBpZiAodmFsdWUgIT0gbnVsbCkgewogICAgICAgIG9uQ29tbWl0VmFsdWUoc3RyaW5nS2V5LmtleSwgdmFsdWUpOwogICAgICB9CiAgICAgIGFwcHJvdmUoKTsKICAgIH0KCiAgICByZXR1cm4gU3RhY2soCiAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgQ29sdW1uKAogICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgU1ZfUywKICAgICAgICAgICAgRXhwYW5kYWJsZVdpZGdldCgKICAgICAgICAgICAgICBleHBhbmQ6IHN0cmluZ0tleVN0YXR1cy5pc1NlbGVjdGVkLAogICAgICAgICAgICAgIGNoaWxkOiBDb2x1bW4oCiAgICAgICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgICAgICBfVHJhbnNsYXRpb25CdWJibGUoCiAgICAgICAgICAgICAgICAgICAgdGV4dDogYmFzZVZhbHVlLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgc2hvd0ZsYWc6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgYmFzZUxhbmd1YWdlRmxhZ0NvZGU6IGJhc2VMYW5ndWFnZUZsYWdDb2RlLAogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICBTVl9YUywKICAgICAgICAgICAgICAgICAgSWdub3JlRm9jdXMoCiAgICAgICAgICAgICAgICAgICAgY2hpbGQ6IFJvdygKICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIFNIX00sCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFNwYWNlcigpLAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nS2V5U3RhdHVzLmlzQ2hhbmdlZCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nS2V5U3RhdHVzLmlzQXBwcm92ZWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEJ1dHRvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUHJlc3NlZDogcmVzZXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZDogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnJlc2V0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0cmluZ0tleVN0YXR1cy5pc0FwcHJvdmVkICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhc3RyaW5nS2V5U3RhdHVzLmlzQ2hhbmdlZCkKICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0QnV0dG9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25QcmVzc2VkOiB3cmFwcGVkQXBwcm92ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkOiBUZXh0KHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MuYXBwcm92ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgU0hfTQogICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICBTVl9TTSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgaWYgKHZhbHVlIGlzIFN0cmluZykKICAgICAgICAgICAgICBQYWRkaW5nKAogICAgICAgICAgICAgICAgcGFkZGluZzogUEhfTSwKICAgICAgICAgICAgICAgIGNoaWxkOiBfU3RyaW5nS2V5V2lkZ2V0KAogICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBjb250cm9sbGVyIGFzIF9LZXlXaWRnZXRTdHJpbmdDb250cm9sbGVyLAogICAgICAgICAgICAgICAgICBqc29uUGF0aDogc3RyaW5nS2V5LmtleSwKICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgICAgICAgICAgICBvbkpzb25QYXRoU2VsZWN0ZWQ6IG9uSnNvblBhdGhTZWxlY3RlZCwKICAgICAgICAgICAgICAgICAgaXNNdWx0aWxpbmU6IGlzTXVsdGlsaW5lLAogICAgICAgICAgICAgICAgICBmb2N1c1Byb3ZpZGVyOiBmb2N1c1Byb3ZpZGVyLAogICAgICAgICAgICAgICAgICBvbkNvbW1pdFZhbHVlOiAodmFsdWUpID0+IG9uQ29tbWl0VmFsdWUoCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nS2V5LmtleSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgb25TdWJtaXQ6IG5leHQsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICksCiAgICAgICAgICAgIGlmICh2YWx1ZSBpcyBNYXA8U3RyaW5nLCBkeW5hbWljPikKICAgICAgICAgICAgICBfTWFwS2V5V2lkZ2V0KAogICAgICAgICAgICAgICAgY29udHJvbGxlcjogY29udHJvbGxlciBhcyBfS2V5V2lkZ2V0TWFwQ29udHJvbGxlciwKICAgICAgICAgICAgICAgIGpzb25QYXRoOiBzdHJpbmdLZXkua2V5LAogICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgICAgICAgICAgb25Kc29uUGF0aFNlbGVjdGVkOiBvbkpzb25QYXRoU2VsZWN0ZWQsCiAgICAgICAgICAgICAgICBmb2N1c1Byb3ZpZGVyOiBmb2N1c1Byb3ZpZGVyLAogICAgICAgICAgICAgICAgb25Db21taXRWYWx1ZTogKHZhbHVlKSA9PiBvbkNvbW1pdFZhbHVlKAogICAgICAgICAgICAgICAgICBzdHJpbmdLZXkua2V5LAogICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgU1ZfUywKICAgICAgICAgIF0sCiAgICAgICAgKSwKICAgICAgICBQb3NpdGlvbmVkKAogICAgICAgICAgdG9wOiAwLAogICAgICAgICAgYm90dG9tOiAwLAogICAgICAgICAgbGVmdDogMCwKICAgICAgICAgIGNoaWxkOiBTaXplZEJveCgKICAgICAgICAgICAgd2lkdGg6IERpbWVuc2lvbnNEb3VibGUucywKICAgICAgICAgICAgY2hpbGQ6IENvbG9yZWRCb3goCiAgICAgICAgICAgICAgY29sb3I6IGJhY2tncm91bmRDb2xvciwKICAgICAgICAgICAgKSwKICAgICAgICAgICksCiAgICAgICAgKQogICAgICBdLAogICAgKTsKICB9Cn0KCmNsYXNzIF9NYXBLZXlXaWRnZXQgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBfTWFwS2V5V2lkZ2V0KHsKICAgIHJlcXVpcmVkIHRoaXMuanNvblBhdGgsCiAgICByZXF1aXJlZCB0aGlzLnZhbHVlLAogICAgcmVxdWlyZWQgdGhpcy5vbkpzb25QYXRoU2VsZWN0ZWQsCiAgICByZXF1aXJlZCB0aGlzLmZvY3VzUHJvdmlkZXIsCiAgICByZXF1aXJlZCB0aGlzLm9uQ29tbWl0VmFsdWUsCiAgICByZXF1aXJlZCB0aGlzLmNvbnRyb2xsZXIsCiAgfSkgOiBzdXBlcihrZXk6IFZhbHVlS2V5KGpzb25QYXRoKSk7CgogIGZpbmFsIFN0cmluZyBqc29uUGF0aDsKICBmaW5hbCBNYXA8U3RyaW5nLCBkeW5hbWljPiB2YWx1ZTsKICBmaW5hbCBWYWx1ZUNoYW5nZWQ8U3RyaW5nPiBvbkpzb25QYXRoU2VsZWN0ZWQ7CiAgZmluYWwgX0ZvY3VzUHJvdmlkZXIgZm9jdXNQcm92aWRlcjsKICBmaW5hbCBWYWx1ZUNoYW5nZWQ8TWFwPFN0cmluZywgZHluYW1pYz4+IG9uQ29tbWl0VmFsdWU7CiAgZmluYWwgX0tleVdpZGdldE1hcENvbnRyb2xsZXIgY29udHJvbGxlcjsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBrZXlzID0gdXNlTWVtb2l6ZWQoKCkgPT4gTGlzdDxTdHJpbmc+LmZyb20odmFsdWUua2V5cykuLnNvcnQoKSwgW10pOwoKICAgIHVzZUVmZmVjdCgoKSB7CiAgICAgIC8vIG5vIGF0dGFjaGluZyBmdW5jdGlvbiBoZXJlLCBidXQgd2Ugc2hvdWxkIHN0aWxsIGRldGFjaAogICAgICByZXR1cm4gKCkgewogICAgICAgIGNvbnRyb2xsZXIuZGV0YWNoKCk7CiAgICAgIH07CiAgICB9KTsKCiAgICByZXR1cm4gUGFkZGluZygKICAgICAgcGFkZGluZzogUF9NLAogICAgICBjaGlsZDogSW5wdXREZWNvcmF0b3IoCiAgICAgICAgZGVjb3JhdGlvbjogSW5wdXREZWNvcmF0aW9uKAogICAgICAgICAgYm9yZGVyOiBjb25zdCBPdXRsaW5lSW5wdXRCb3JkZXIoKSwKICAgICAgICAgIGxhYmVsVGV4dDoganNvblBhdGguc3BsaXQoIi4iKS5sYXN0LAogICAgICAgICksCiAgICAgICAgY2hpbGQ6IENvbHVtbigKICAgICAgICAgIG1haW5BeGlzU2l6ZTogTWFpbkF4aXNTaXplLm1pbiwKICAgICAgICAgIGNyb3NzQXhpc0FsaWdubWVudDogQ3Jvc3NBeGlzQWxpZ25tZW50LnN0cmV0Y2gsCiAgICAgICAgICBzcGFjaW5nOiBEaW1lbnNpb25zRG91YmxlLnNtLAogICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgZm9yIChmaW5hbCBrZXkgaW4ga2V5cykKICAgICAgICAgICAgICBfU3RyaW5nS2V5V2lkZ2V0KAogICAgICAgICAgICAgICAgY29udHJvbGxlcjogY29udHJvbGxlci5nZXRDb250cm9sbGVyRm9yS2V5KGtleSksCiAgICAgICAgICAgICAgICBqc29uUGF0aDogIiRqc29uUGF0aC4ka2V5IiwKICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVtrZXldLAogICAgICAgICAgICAgICAgb25Kc29uUGF0aFNlbGVjdGVkOiBvbkpzb25QYXRoU2VsZWN0ZWQsCiAgICAgICAgICAgICAgICBpc011bHRpbGluZTogZmFsc2UsCiAgICAgICAgICAgICAgICBvbkNvbW1pdFZhbHVlOiAodikgewogICAgICAgICAgICAgICAgICBmaW5hbCBjb3B5ID0gTWFwPFN0cmluZywgZHluYW1pYz4uZnJvbSh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgIGNvcHlba2V5XSA9IHY7CiAgICAgICAgICAgICAgICAgIG9uQ29tbWl0VmFsdWUoY29weSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZm9jdXNQcm92aWRlcjogZm9jdXNQcm92aWRlciwKICAgICAgICAgICAgICAgIG9uU3VibWl0OiAoKSB7fSwKICAgICAgICAgICAgICApLAogICAgICAgICAgXSwKICAgICAgICApLAogICAgICApLAogICAgKTsKICB9Cn0KCmNsYXNzIF9TdHJpbmdLZXlXaWRnZXQgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBfU3RyaW5nS2V5V2lkZ2V0KHsKICAgIHJlcXVpcmVkIHRoaXMuanNvblBhdGgsCiAgICByZXF1aXJlZCB0aGlzLnZhbHVlLAogICAgcmVxdWlyZWQgdGhpcy5vbkpzb25QYXRoU2VsZWN0ZWQsCiAgICByZXF1aXJlZCB0aGlzLmlzTXVsdGlsaW5lLAogICAgcmVxdWlyZWQgdGhpcy5vbkNvbW1pdFZhbHVlLAogICAgcmVxdWlyZWQgdGhpcy5mb2N1c1Byb3ZpZGVyLAogICAgcmVxdWlyZWQgdGhpcy5vblN1Ym1pdCwKICAgIHJlcXVpcmVkIHRoaXMuY29udHJvbGxlciwKICB9KSA6IHN1cGVyKGtleTogVmFsdWVLZXkoanNvblBhdGgpKTsKCiAgZmluYWwgU3RyaW5nIGpzb25QYXRoOwogIGZpbmFsIFN0cmluZyB2YWx1ZTsKICBmaW5hbCBWYWx1ZUNoYW5nZWQ8U3RyaW5nPiBvbkpzb25QYXRoU2VsZWN0ZWQ7CiAgZmluYWwgVmFsdWVDaGFuZ2VkPFN0cmluZz4gb25Db21taXRWYWx1ZTsKICBmaW5hbCBib29sIGlzTXVsdGlsaW5lOwogIGZpbmFsIF9Gb2N1c1Byb3ZpZGVyIGZvY3VzUHJvdmlkZXI7CiAgZmluYWwgVm9pZENhbGxiYWNrIG9uU3VibWl0OwogIGZpbmFsIF9LZXlXaWRnZXRTdHJpbmdDb250cm9sbGVyIGNvbnRyb2xsZXI7CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgZmluYWwgdGV4dENvbnRyb2xsZXIgPSB1c2VUZXh0RWRpdGluZ0NvbnRyb2xsZXIodGV4dDogdmFsdWUpOwoKICAgIHVzZUVmZmVjdCgoKSB7CiAgICAgIGNvbnRyb2xsZXIuYXR0YWNoKHRleHRDb250cm9sbGVyKTsKICAgICAgcmV0dXJuICgpIHsKICAgICAgICBjb250cm9sbGVyLmRldGFjaCgpOwogICAgICB9OwogICAgfSk7CgogICAgZmluYWwgZm9jdXNOb2RlID0gZm9jdXNQcm92aWRlci5vYnRhaW4oanNvblBhdGgpOwogICAgdm9pZCBjb21taXRWYWx1ZSgpIHsKICAgICAgaWYgKHRleHRDb250cm9sbGVyLnRleHQgIT0gdmFsdWUpIHsKICAgICAgICBvbkNvbW1pdFZhbHVlKHRleHRDb250cm9sbGVyLnRleHQpOwogICAgICB9CiAgICB9CgogICAgdXNlRWZmZWN0KCgpIHsKICAgICAgaWYgKHRleHRDb250cm9sbGVyLnRleHQgIT0gdmFsdWUpIHsKICAgICAgICB0ZXh0Q29udHJvbGxlci52YWx1ZSA9IHRleHRDb250cm9sbGVyLnZhbHVlLmNvcHlXaXRoKHRleHQ6IHZhbHVlKTsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0sIFt2YWx1ZV0pOwoKICAgIHVzZUVmZmVjdCgoKSB7CiAgICAgIHZvaWQgb25Gb2N1c0NoYW5nZSgpIHsKICAgICAgICBpZiAoZm9jdXNOb2RlLmhhc0ZvY3VzKSB7CiAgICAgICAgICBvbkpzb25QYXRoU2VsZWN0ZWQoanNvblBhdGgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBXaWRnZXRzQmluZGluZy5pbnN0YW5jZS5hZGRQb3N0RnJhbWVDYWxsYmFjaygoXykgewogICAgICAgICAgICAvLyBPbmx5IGNvbW1pdCBpZiBmb2N1cyBtb3ZlZCB0byBhbm90aGVyIHRleHQgZmllbGQKICAgICAgICAgICAgZmluYWwgcHJpbWFyeUZvY3VzID0gRm9jdXNNYW5hZ2VyLmluc3RhbmNlLnByaW1hcnlGb2N1czsKICAgICAgICAgICAgaWYgKCFmb2N1c05vZGUuaGFzRm9jdXMgJiYgZm9jdXNQcm92aWRlci5pc01hbmFnZWQocHJpbWFyeUZvY3VzKSkgewogICAgICAgICAgICAgIGNvbW1pdFZhbHVlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9jdXNOb2RlLmFkZExpc3RlbmVyKG9uRm9jdXNDaGFuZ2UpOwogICAgICByZXR1cm4gKCkgewogICAgICAgIGZvY3VzTm9kZS5yZW1vdmVMaXN0ZW5lcihvbkZvY3VzQ2hhbmdlKTsKICAgICAgfTsKICAgIH0sIFtmb2N1c05vZGVdKTsKCiAgICByZXR1cm4gVGV4dEZpZWxkKAogICAgICBtYXhMaW5lczogbnVsbCwKICAgICAgdGV4dElucHV0QWN0aW9uOgogICAgICAgICAgaXNNdWx0aWxpbmUgPyBUZXh0SW5wdXRBY3Rpb24ubmV3bGluZSA6IFRleHRJbnB1dEFjdGlvbi5uZXh0LAogICAgICBmb2N1c05vZGU6IGZvY3VzTm9kZSwKICAgICAgY29udHJvbGxlcjogdGV4dENvbnRyb2xsZXIsCiAgICAgIGRlY29yYXRpb246IElucHV0RGVjb3JhdGlvbigKICAgICAgICBib3JkZXI6IGNvbnN0IE91dGxpbmVJbnB1dEJvcmRlcigpLAogICAgICAgIGxhYmVsVGV4dDoganNvblBhdGguc3BsaXQoIi4iKS5sYXN0LAogICAgICApLAogICAgICBvblN1Ym1pdHRlZDogKF8pIHsKICAgICAgICBjb21taXRWYWx1ZSgpOwogICAgICAgIG9uU3VibWl0KCk7CiAgICAgIH0sCiAgICApOwogIH0KfQoKY2xhc3MgX1RyYW5zbGF0aW9uQnViYmxlIGV4dGVuZHMgU3RhdGVsZXNzV2lkZ2V0IHsKICBjb25zdCBfVHJhbnNsYXRpb25CdWJibGUoewogICAgcmVxdWlyZWQgdGhpcy50ZXh0LAogICAgcmVxdWlyZWQgdGhpcy5zaG93RmxhZywKICAgIHJlcXVpcmVkIHRoaXMuYmFzZUxhbmd1YWdlRmxhZ0NvZGUsCiAgfSk7CgogIGZpbmFsIFN0cmluZyB0ZXh0OwogIGZpbmFsIGJvb2wgc2hvd0ZsYWc7CgogIGZpbmFsIEZsYWdzQ29kZSBiYXNlTGFuZ3VhZ2VGbGFnQ29kZTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gUGFkZGluZygKICAgICAgcGFkZGluZzogUEhfTSwKICAgICAgY2hpbGQ6IERlY29yYXRlZEJveCgKICAgICAgICBkZWNvcmF0aW9uOiBCb3hEZWNvcmF0aW9uKAogICAgICAgICAgY29sb3I6IGNvbnRleHQuY29sb3JzLnByaW1hcnlDb250YWluZXIsCiAgICAgICAgICBib3JkZXJSYWRpdXM6IFJhZGlpLmJvcmRlclMsCiAgICAgICAgKSwKICAgICAgICBjaGlsZDogUGFkZGluZygKICAgICAgICAgIHBhZGRpbmc6IFBfWFMsCiAgICAgICAgICBjaGlsZDogUm93KAogICAgICAgICAgICBjcm9zc0F4aXNBbGlnbm1lbnQ6IENyb3NzQXhpc0FsaWdubWVudC5zdGFydCwKICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICBQYWRkaW5nKAogICAgICAgICAgICAgICAgcGFkZGluZzogY29uc3QgRWRnZUluc2V0cy5vbmx5KHRvcDogMiksCiAgICAgICAgICAgICAgICBjaGlsZDogRmxhZ0JhbGwoCiAgICAgICAgICAgICAgICAgIGZsYWdDb2RlOiBiYXNlTGFuZ3VhZ2VGbGFnQ29kZSwKICAgICAgICAgICAgICAgICAgc2l6ZTogRGltZW5zaW9uc0RvdWJsZS5tLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIFNIX1MsCiAgICAgICAgICAgICAgRXhwYW5kZWQoCiAgICAgICAgICAgICAgICBjaGlsZDogVGV4dCh0ZXh0KSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICBdLAogICAgICAgICAgKSwKICAgICAgICApLAogICAgICApLAogICAgKTsKICB9Cn0KCmNsYXNzIF9Gb2N1c1Byb3ZpZGVyIHsKICBmaW5hbCBfbm9kZXMgPSA8U3RyaW5nLCBGb2N1c05vZGU+e307CgogIHZvaWQgcmVxdWVzdEZvY3VzKFN0cmluZ0tleSBzdHJpbmdLZXkpIHsKICAgIF9ub2Rlc1tzdHJpbmdLZXkua2V5XT8ucmVxdWVzdEZvY3VzKCk7CiAgfQoKICBib29sIGlzTWFuYWdlZChGb2N1c05vZGU/IGZvY3VzTm9kZSkgPT4gX25vZGVzLmNvbnRhaW5zVmFsdWUoZm9jdXNOb2RlKTsKCiAgRm9jdXNOb2RlIG9idGFpbihTdHJpbmcganNvblBhdGgpID0+CiAgICAgIF9ub2Rlcy5wdXRJZkFic2VudChqc29uUGF0aCwgKCkgPT4gRm9jdXNOb2RlKGRlYnVnTGFiZWw6IGpzb25QYXRoKSk7CgogIHZvaWQgZGlzcG9zZSgpIHsKICAgIGZvciAoZmluYWwgbm9kZSBpbiBfbm9kZXMudmFsdWVzKSB7CiAgICAgIG5vZGUuZGlzcG9zZSgpOwogICAgfQogIH0KfQoKZXh0ZW5zaW9uIF9TbGFuZ0VkaXRvclN0YXRlIG9uIFNsYW5nRWRpdG9yU3RhdGUgewogIE1hcDxTdHJpbmcsIGR5bmFtaWM+IGVmZmVjdGl2ZVNsYW5nSnNvbihib29sIGRpc3BsYXlBbGwpID0+CiAgICAgIGRpc3BsYXlBbGwgPyBzbGFuZ0pzb24gOiBzbGFuZ1Njb3BlZEpzb247Cn0KCmV4dGVuc2lvbiBfS2V5cyBvbiBNYXA8U3RyaW5nLCBkeW5hbWljPiB7CiAgTGlzdDxTdHJpbmdLZXk+IGdldCBzdHJpbmdLZXlzID0+IGtleXMKICAgICAgLm1hcCgoc2xhbmdKc29uS2V5KSA9PgogICAgICAgICAgU3RyaW5nS2V5LnZhbHVlcy5maXJzdFdoZXJlT3JOdWxsKChpdCkgPT4gaXQua2V5ID09IHNsYW5nSnNvbktleSkpCiAgICAgIC5ub25OdWxscwogICAgICAudG9MaXN0KCk7Cn0KCmNsYXNzIF9LZXlTZWFyY2hCYXIgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBjb25zdCBfS2V5U2VhcmNoQmFyKHsKICAgIHRoaXMuc2VhcmNoRmFkZUNvbG9ycywKICB9KTsKCiAgZmluYWwgTGlzdDxDb2xvcj4/IHNlYXJjaEZhZGVDb2xvcnM7CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgZmluYWwgY3ViaXQgPSBjb250ZXh0LndhdGNoPFNsYW5nRWRpdG9yQ3ViaXQ+KCk7CiAgICBmaW5hbCBzdGF0ZSA9IGN1Yml0LnN0YXRlOwogICAgZmluYWwgaGFzTXVsdGlwbGVTZWFyY2hSZXN1bHRzID0gc3RhdGUuc2VhcmNoUmVzdWx0cy5sZW5ndGggPiAxOwoKICAgIGludCBjdXJyZW50ID0gKHN0YXRlLmN1cnJlbnRTZWFyY2hJbmRleCgpICsgMSk7CiAgICBpbnQgdG90YWwgPSBzdGF0ZS5zZWFyY2hSZXN1bHRzLmxlbmd0aDsKCiAgICByZXR1cm4gRmxvYXRpbmdTZWFyY2hCYXIoCiAgICAgIGluaXRpYWxWYWx1ZTogIiIsCiAgICAgIG9uSW5wdXRVcGRhdGU6IGN1Yml0LnNlYXJjaCwKICAgICAgZmFkZUNvbG9yczogc2VhcmNoRmFkZUNvbG9ycywKICAgICAgc3VmZml4SWNvbjogQW5pbWF0ZWRPcGFjaXR5KAogICAgICAgIG9wYWNpdHk6IGhhc011bHRpcGxlU2VhcmNoUmVzdWx0cyA/IDEuMCA6IDAuMCwKICAgICAgICBkdXJhdGlvbjogRHVyYXRpb25zLnNob3J0NCwKICAgICAgICBjaGlsZDogUm93KAogICAgICAgICAgbWFpbkF4aXNTaXplOiBNYWluQXhpc1NpemUubWluLAogICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgVGV4dCgiJGN1cnJlbnQgLyAkdG90YWwiKSwKICAgICAgICAgICAgSWNvbkJ1dHRvbigKICAgICAgICAgICAgICBvblByZXNzZWQ6IGhhc011bHRpcGxlU2VhcmNoUmVzdWx0cwogICAgICAgICAgICAgICAgICA/ICgpID0+IGN1Yml0Lm1vdmVTZWFyY2hSZXN1bHQoLTEpCiAgICAgICAgICAgICAgICAgIDogbnVsbCwKICAgICAgICAgICAgICBpY29uOiBjb25zdCBSb3RhdGVkQm94KAogICAgICAgICAgICAgICAgcXVhcnRlclR1cm5zOiAtMSwKICAgICAgICAgICAgICAgIGNoaWxkOiBJY29uKEljb25zLmNoZXZyb25fcmlnaHQpLAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICksCiAgICAgICAgICAgIEljb25CdXR0b24oCiAgICAgICAgICAgICAgb25QcmVzc2VkOiBoYXNNdWx0aXBsZVNlYXJjaFJlc3VsdHMKICAgICAgICAgICAgICAgICAgPyAoKSA9PiBjdWJpdC5tb3ZlU2VhcmNoUmVzdWx0KDEpCiAgICAgICAgICAgICAgICAgIDogbnVsbCwKICAgICAgICAgICAgICBpY29uOiBjb25zdCBSb3RhdGVkQm94KAogICAgICAgICAgICAgICAgcXVhcnRlclR1cm5zOiAxLAogICAgICAgICAgICAgICAgY2hpbGQ6IEljb24oSWNvbnMuY2hldnJvbl9yaWdodCksCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgKQogICAgICAgICAgXSwKICAgICAgICApLAogICAgICApLAogICAgKTsKICB9Cn0K';
  static String get assets_locale_editor_widget_mustache =>
      _decode(_assets_locale_editor_widget_mustache);
  static const String _assets_locale_editor_sheet_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyX2Jsb2MvZmx1dHRlcl9ibG9jLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6e3twYWNrYWdlTmFtZX19L3t7e3N0cmluZ1N0b3J5fX19L3N0cmluZ19zdG9yeS5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnN0cmluZ19zdG9yeS9zdHJpbmdfc3RvcnkuZGFydCc7CmltcG9ydCAncGFja2FnZTp3b2x0X21vZGFsX3NoZWV0L3dvbHRfbW9kYWxfc2hlZXQuZGFydCc7CgpjbGFzcyBMb2NhbGVFZGl0b3JTaGVldCB7CiAgTG9jYWxlRWRpdG9yU2hlZXQuXygpOwoKICBzdGF0aWMgRnV0dXJlPHZvaWQ+IHNob3coQnVpbGRDb250ZXh0IGNvbnRleHQpIGFzeW5jIHsKICAgIGZpbmFsIGtleXNUb0Rpc3BsYXkgPSBUcmFuc2xhdGlvblNjb3BlS2V5cy5vZihjb250ZXh0KT8udmFsdWU7CiAgICBpZiAoa2V5c1RvRGlzcGxheSA9PSBudWxsKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBXb2x0TW9kYWxTaGVldC5zaG93KAogICAgICAgIGNvbnRleHQ6IGNvbnRleHQsCiAgICAgICAgcGFnZUxpc3RCdWlsZGVyOiAoXykgPT4gW19zaGVldCgpXSwKICAgICAgICBtb2RhbERlY29yYXRvcjogKGNoaWxkKSB7CiAgICAgICAgICByZXR1cm4gQmxvY1Byb3ZpZGVyKAogICAgICAgICAgICBjcmVhdGU6IChjb250ZXh0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIFNsYW5nRWRpdG9yQ3ViaXQoCiAgICAgICAgICAgICAgICBiYXNlQ3ViaXQ6IGNvbnRleHQucmVhZDxTbGFuZ0Jhc2VDdWJpdD4oKSwKICAgICAgICAgICAgICAgIHNjb3BlZEtleXM6IGtleXNUb0Rpc3BsYXksCiAgICAgICAgICAgICAgICBvdkxvY2FsZToKICAgICAgICAgICAgICAgICAgICBTdHJpbmdTdG9yeVNlcnZpY2UuaW5zdGFuY2UuY29uZmlnLmFwcExhbmd1YWdlQ29kZSwKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjaGlsZDogY2hpbGQsCiAgICAgICAgICApOwogICAgICAgIH0pOwogIH0KCiAgc3RhdGljIE5vblNjcm9sbGluZ1dvbHRNb2RhbFNoZWV0UGFnZSBfc2hlZXQoKSB7CiAgICByZXR1cm4gTm9uU2Nyb2xsaW5nV29sdE1vZGFsU2hlZXRQYWdlKAogICAgICBjaGlsZDogUGFkZGluZygKICAgICAgICBwYWRkaW5nOiBjb25zdCBFZGdlSW5zZXRzLm9ubHkodG9wOiBEaW1lbnNpb25zRG91YmxlLm0pLAogICAgICAgIGNoaWxkOiBMb2NhbGVFZGl0b3JXaWRnZXQoCiAgICAgICAgICBzaG93U2NvcGVkVmFsdWVzOiB0cnVlLAogICAgICAgICAgaXNTZWFyY2hBdmFpbGFibGU6IGZhbHNlLAogICAgICAgICAgb25Kc29uUGF0aFNlbGVjdGVkOiAoXykge30sCiAgICAgICAgKSwKICAgICAgKSwKICAgICk7CiAgfQp9Cg==';
  static String get assets_locale_editor_sheet_mustache =>
      _decode(_assets_locale_editor_sheet_mustache);
  static const String _assets_locale_submit_sheet_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdkYXJ0OmNvbnZlcnQnOwoKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyX2Jsb2MvZmx1dHRlcl9ibG9jLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlcl9ob29rcy9mbHV0dGVyX2hvb2tzLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6e3twYWNrYWdlTmFtZX19L3t7e3N0cmluZ1N0b3J5fX19L3N0cmluZ19zdG9yeS5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmVtYWlsX3ZhbGlkYXRvci9lbWFpbF92YWxpZGF0b3IuZGFydCc7CmltcG9ydCAncGFja2FnZTpzaW1wbGVfcmljaF90ZXh0L3NpbXBsZV9yaWNoX3RleHQuZGFydCc7CmltcG9ydCAncGFja2FnZTpzdHJpbmdfc3Rvcnkvc3RyaW5nX3N0b3J5LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6d29sdF9tb2RhbF9zaGVldC93b2x0X21vZGFsX3NoZWV0LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6cHJvdmlkZXIvcHJvdmlkZXIuZGFydCc7CgppbnQgZ2V0IF9zbGFuZ1N0cmluZ3NWZXJzaW9uID0+CiAgICBTdHJpbmdTdG9yeVNlcnZpY2UuaW5zdGFuY2UuZ2VuZXJhdGVkRGVsZWdhdGUudmVyc2lvbkNvZGU7CgovLy8gU3VibWl0IHlvdXIgdHJhbnNsYXRpb25zCi8vLyAtIEVudHJ5Ci8vLyAgIC0gUHJvZ3Jlc3MKLy8vICAgLSBTaG93IE15IENoYW5nZXMKLy8vIC0gQ29udGFjdCBkYXRhCi8vLyAgIC0gTmFtZQovLy8gICAtIFVzZXJuYW1lCi8vLyAtIEFncmVlIGFuZCBzdWJtaXQKLy8vIC0gVGhhbmsgWW91CmNsYXNzIExvY2FsZVN1Ym1pdFNoZWV0IHsKICBMb2NhbGVTdWJtaXRTaGVldC5fKCk7CgogIHN0YXRpYyBGdXR1cmU8dm9pZD4gc2hvdygKICAgIEJ1aWxkQ29udGV4dCBjb250ZXh0LCB7CiAgICByZXF1aXJlZCBTbGFuZ0VkaXRvckN1Yml0IGVkaXRvckN1Yml0LAogICAgcmVxdWlyZWQgU2xhbmdCYXNlQ3ViaXQgYmFzZUN1Yml0LAogIH0pIGFzeW5jIHsKICAgIGZpbmFsIGJhc2VTdGF0ZSA9IGJhc2VDdWJpdC5zdGF0ZS5tYXliZU1hcCgKICAgICAgZGF0YTogKGl0KSA9PiBpdCwKICAgICAgb3JFbHNlOiAoKSA9PiBudWxsLAogICAgKTsKCiAgICBpZiAoYmFzZVN0YXRlID09IG51bGwpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGZpbmFsIGNvbnRyb2xsZXIgPSBfU2hlZXRzQ29udHJvbGxlcigKICAgICAgY29udGFjdERhdGE6CiAgICAgICAgICBTdHJpbmdTdG9yeVNlcnZpY2UuaW5zdGFuY2UuaW5BcHBFZGl0b3JDb25maWcuZ2V0VXNlckNvbnRhY3REYXRhKCksCiAgICAgIG9uU3VibWl0Q29udGFjdERhdGE6IChjb250YWN0RGF0YSkgewogICAgICAgIGJhc2VDdWJpdC5zZXRDb250YWN0RGF0YShjb250YWN0RGF0YSk7CiAgICAgICAgU3RyaW5nU3RvcnlTZXJ2aWNlLmluc3RhbmNlLmluQXBwRWRpdG9yQ29uZmlnCiAgICAgICAgICAgIC5zZXRVc2VyQ29udGFjdERhdGEoY29udGFjdERhdGEpOwogICAgICB9LAogICAgICBzdWJtaXRUcmFuc2xhdGlvbkRhdGE6ICgpIGFzeW5jID0+CiAgICAgICAgICBhd2FpdCBfc3VibWl0VHJhbnNsYXRpb25zKHNsYW5nQmFzZUN1Yml0OiBiYXNlQ3ViaXQpLAogICAgICBvbkV4aXQ6ICgpIHsKICAgICAgICBOYXZpZ2F0b3Iub2YoY29udGV4dCkucG9wKCk7CiAgICAgIH0sCiAgICApOwoKICAgIGF3YWl0IFdvbHRNb2RhbFNoZWV0LnNob3coCiAgICAgIHBhZ2VJbmRleE5vdGlmaWVyOiBjb250cm9sbGVyLl9wb3NpdGlvbiwKICAgICAgY29udGV4dDogY29udGV4dCwKICAgICAgcGFnZUxpc3RCdWlsZGVyOiAoXykgPT4gX1NoZWV0cy52YWx1ZXMubWFwKChpdCkgPT4gaXQuYnVpbGRlcigpKS50b0xpc3QoKSwKICAgICAgbW9kYWxEZWNvcmF0b3I6IChjaGlsZCkgPT4gTXVsdGlQcm92aWRlcigKICAgICAgICBwcm92aWRlcnM6IFsKICAgICAgICAgIFByb3ZpZGVyLnZhbHVlKAogICAgICAgICAgICB2YWx1ZTogY29udHJvbGxlciwKICAgICAgICAgICksCiAgICAgICAgICBCbG9jUHJvdmlkZXI8U2xhbmdFZGl0b3JDdWJpdD4udmFsdWUoCiAgICAgICAgICAgIHZhbHVlOiBlZGl0b3JDdWJpdCwKICAgICAgICAgICksCiAgICAgICAgXSwKICAgICAgICBjaGlsZDogY2hpbGQsCiAgICAgICksCiAgICApOwoKICAgIGNvbnRyb2xsZXIuZGlzcG9zZSgpOwogIH0KfQoKY2xhc3MgX1NoZWV0c0NvbnRyb2xsZXIgewogIGZpbmFsIF9wb3NpdGlvbiA9IFZhbHVlTm90aWZpZXIoMCk7CiAgbGF0ZSBmaW5hbCBsaXN0ZW5hYmxlID0gTGlzdGVuYWJsZS5tZXJnZShbCiAgICBfcG9zaXRpb24sCiAgICBlbWFpbENvbnRyb2xsZXIsCiAgICBuYW1lQ29udHJvbGxlciwKICAgIHdlYkNvbnRyb2xsZXIsCiAgICBlbWFpbEVycm9yLAogICAgbmFtZUVycm9yLAogICAgd2ViRXJyb3IsCiAgICBkYXRhU3RhdHVzLAogIF0pOwogIGZpbmFsIF9oaXN0b3J5ID0gPF9TaGVldHM+W107CiAgZmluYWwgVm9pZENhbGxiYWNrIG9uRXhpdDsKICBmaW5hbCBUZXh0RWRpdGluZ0NvbnRyb2xsZXIgZW1haWxDb250cm9sbGVyOwogIGZpbmFsIFRleHRFZGl0aW5nQ29udHJvbGxlciBuYW1lQ29udHJvbGxlcjsKICBmaW5hbCBUZXh0RWRpdGluZ0NvbnRyb2xsZXIgd2ViQ29udHJvbGxlcjsKICBmaW5hbCBlbWFpbEVycm9yID0gVmFsdWVOb3RpZmllcjxTdHJpbmc/PihudWxsKTsKICBmaW5hbCBuYW1lRXJyb3IgPSBWYWx1ZU5vdGlmaWVyPFN0cmluZz8+KG51bGwpOwogIGZpbmFsIHdlYkVycm9yID0gVmFsdWVOb3RpZmllcjxTdHJpbmc/PihudWxsKTsKICBmaW5hbCB2b2lkIEZ1bmN0aW9uKFVzZXJDb250YWN0RGF0YSBkYXRhKSBvblN1Ym1pdENvbnRhY3REYXRhOwogIGZpbmFsIEZ1dHVyZTx2b2lkPiBGdW5jdGlvbigpIHN1Ym1pdFRyYW5zbGF0aW9uRGF0YTsKICBmaW5hbCBkYXRhU3RhdHVzID0gVmFsdWVOb3RpZmllcjxfRGF0YVN0YXR1cz4oY29uc3QgX0RhdGFTdGF0dXNJZGxlKCkpOwoKICBfU2hlZXRzQ29udHJvbGxlcih7CiAgICByZXF1aXJlZCB0aGlzLm9uRXhpdCwKICAgIHJlcXVpcmVkIHRoaXMub25TdWJtaXRDb250YWN0RGF0YSwKICAgIHJlcXVpcmVkIHRoaXMuc3VibWl0VHJhbnNsYXRpb25EYXRhLAogICAgVXNlckNvbnRhY3REYXRhPyBjb250YWN0RGF0YSwKICB9KSAgOiBlbWFpbENvbnRyb2xsZXIgPSBUZXh0RWRpdGluZ0NvbnRyb2xsZXIodGV4dDogY29udGFjdERhdGE/LmVtYWlsKSwKICAgICAgICBuYW1lQ29udHJvbGxlciA9IFRleHRFZGl0aW5nQ29udHJvbGxlcih0ZXh0OiBjb250YWN0RGF0YT8ubmFtZSksCiAgICAgICAgd2ViQ29udHJvbGxlciA9IFRleHRFZGl0aW5nQ29udHJvbGxlcih0ZXh0OiBjb250YWN0RGF0YT8ud2Vic2l0ZSkgewogICAgbW92ZVRvKF9TaGVldHMuZW50cnkpOwogIH0KCiAgdm9pZCBtb3ZlVG8oX1NoZWV0cyBzaGVldCkgewogICAgX3Bvc2l0aW9uLnZhbHVlID0gX1NoZWV0cy52YWx1ZXMuaW5kZXhPZihzaGVldCk7CiAgICBfaGlzdG9yeS5hZGQoc2hlZXQpOwogIH0KCiAgYm9vbCBjaGVja0NvbnRhY3REYXRhKCkgewogICAgZmluYWwgZW1haWwgPSBlbWFpbENvbnRyb2xsZXIudGV4dDsKICAgIGZpbmFsIGlzRW1haWxWYWxpZCA9IEVtYWlsVmFsaWRhdG9yLnZhbGlkYXRlKGVtYWlsKTsKICAgIGZpbmFsIGlzTmFtZVZhbGlkID0gbmFtZUNvbnRyb2xsZXIudGV4dC50cmltKCkuaXNOb3RFbXB0eTsKICAgIGlmIChpc0VtYWlsVmFsaWQpIHsKICAgICAgZW1haWxFcnJvci52YWx1ZSA9IG51bGw7CiAgICB9IGVsc2UgewogICAgICBlbWFpbEVycm9yLnZhbHVlID0gc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5pbnZhbGlkRW1haWxBZGRyZXNzOwogICAgfQogICAgaWYgKGlzTmFtZVZhbGlkKSB7CiAgICAgIG5hbWVFcnJvci52YWx1ZSA9IG51bGw7CiAgICB9IGVsc2UgewogICAgICBuYW1lRXJyb3IudmFsdWUgPSBzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLm5hbWVDYW5ub3RCZUVtcHR5OwogICAgfQoKICAgIHJldHVybiBpc0VtYWlsVmFsaWQgJiYgaXNOYW1lVmFsaWQ7CiAgfQoKICB2b2lkIG1vdmVUb0FncmVlbWVudCgpIHsKICAgIGZpbmFsIGFsbEdvb2QgPSBjaGVja0NvbnRhY3REYXRhKCk7CiAgICBpZiAoYWxsR29vZCkgewogICAgICBvblN1Ym1pdENvbnRhY3REYXRhKAogICAgICAgIFVzZXJDb250YWN0RGF0YSgKICAgICAgICAgIGVtYWlsOiBlbWFpbENvbnRyb2xsZXIudGV4dC50cmltKCksCiAgICAgICAgICBuYW1lOiBuYW1lQ29udHJvbGxlci50ZXh0LnRyaW0oKSwKICAgICAgICAgIHdlYnNpdGU6IHdlYkNvbnRyb2xsZXIudGV4dC50cmltKCksCiAgICAgICAgKSwKICAgICAgKTsKICAgICAgbW92ZVRvKF9TaGVldHMuYWdyZWVtZW50KTsKICAgIH0KICB9CgogIEZ1dHVyZTx2b2lkPiBzdWJtaXRUcmFuc2xhdGlvbnMoKSBhc3luYyB7CiAgICBtb3ZlVG8oX1NoZWV0cy5zZW5kaW5nKTsKICAgIGlmIChkYXRhU3RhdHVzLnZhbHVlID09IGNvbnN0IF9EYXRhU3RhdHVzSW5Qcm9ncmVzcygpKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHRyeSB7CiAgICAgIGRhdGFTdGF0dXMudmFsdWUgPSBjb25zdCBfRGF0YVN0YXR1c0luUHJvZ3Jlc3MoKTsKICAgICAgYXdhaXQgc3VibWl0VHJhbnNsYXRpb25EYXRhKCk7CiAgICAgIGRhdGFTdGF0dXMudmFsdWUgPSBjb25zdCBfRGF0YVN0YXR1c09LKCk7CiAgICAgIG1vdmVUbyhfU2hlZXRzLnRoYW5rWW91KTsKICAgICAgYXdhaXQgRnV0dXJlLmRlbGF5ZWQoY29uc3QgRHVyYXRpb24oc2Vjb25kczogNSkpOwogICAgICBvbkV4aXQoKTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgZGF0YVN0YXR1cy52YWx1ZSA9IF9EYXRhU3RhdHVzRmFpbChlKTsKICAgIH0KICB9CgogIGJvb2wgY2FuR29CYWNrKCkgPT4gX2hpc3RvcnkubGVuZ3RoID4gMTsKCiAgdm9pZCBnb0JhY2soKSB7CiAgICBpZiAoY2FuR29CYWNrKCkpIHsKICAgICAgX2hpc3RvcnkucmVtb3ZlTGFzdCgpOwogICAgICBfcG9zaXRpb24udmFsdWUgPSBfU2hlZXRzLnZhbHVlcy5pbmRleE9mKF9oaXN0b3J5Lmxhc3QpOwogICAgfSBlbHNlIHsKICAgICAgb25FeGl0KCk7CiAgICB9CiAgfQoKICB2b2lkIGRpc3Bvc2UoKSB7CiAgICBlbWFpbENvbnRyb2xsZXIuZGlzcG9zZSgpOwogICAgbmFtZUNvbnRyb2xsZXIuZGlzcG9zZSgpOwogIH0KfQoKZW51bSBfU2hlZXRzIHsKICBlbnRyeShfZW50cnkpLAogIGRpZmYoX2RpZmYpLAogIGNvbnRhY3REYXRhKF9jb250YWN0RGF0YSksCiAgYWdyZWVtZW50KF9hZ3JlZUFuZFN1Ym1pdCksCiAgc2VuZGluZyhfc2VuZGluZyksCiAgdGhhbmtZb3UoX3RoYW5rWW91KTsKCiAgZmluYWwgU2xpdmVyV29sdE1vZGFsU2hlZXRQYWdlIEZ1bmN0aW9uKCkgYnVpbGRlcjsKCiAgY29uc3QgX1NoZWV0cyh0aGlzLmJ1aWxkZXIpOwp9Cgpjb25zdCBfYm90dG9tU2FmZVBhZGRpbmcgPSBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgY2hpbGQ6IFNhZmVBcmVhQm90dG9tKAogICAgbWluaW11bVBhZGRpbmc6IERpbWVuc2lvbnNEb3VibGUubSwKICApLAopOwoKU2xpdmVyV29sdE1vZGFsU2hlZXRQYWdlIF9lbnRyeSgpIHsKICByZXR1cm4gU2xpdmVyV29sdE1vZGFsU2hlZXRQYWdlKAogICAgbGVhZGluZ05hdkJhcldpZGdldDogY29uc3QgX0xlYWRpbmdCdXR0b24oKSwKICAgIG1haW5Db250ZW50U2xpdmVyc0J1aWxkZXI6IChjb250ZXh0KSB7CiAgICAgIGZpbmFsIGVkaXRvclN0YXRlID0gY29udGV4dC53YXRjaDxTbGFuZ0VkaXRvckN1Yml0PigpLnN0YXRlOwogICAgICBmaW5hbCBiYXNlU3RhdGUgPSBjb250ZXh0LndhdGNoPFNsYW5nQmFzZUN1Yml0PigpLnN0YXRlLm1heWJlTWFwKAogICAgICAgICAgICBkYXRhOiAoaXQpID0+IGl0LAogICAgICAgICAgICBvckVsc2U6ICgpID0+IG51bGwsCiAgICAgICAgICApOwogICAgICBmaW5hbCB0b3RhbENvdW50ID0gU3RyaW5nS2V5LnZhbHVlcy5sZW5ndGg7CiAgICAgIGZpbmFsIGRpZmZDb3VudCA9IGVkaXRvclN0YXRlLmRpZmZLZXlzLmxlbmd0aDsKICAgICAgZmluYWwgYXBwcm92ZWRDb3VudCA9IGJhc2VTdGF0ZT8uYXBwcm92ZWRLZXlzLmxlbmd0aCA/PyAwOwoKICAgICAgcmV0dXJuIFsKICAgICAgICBTbGl2ZXJQYWRkaW5nKAogICAgICAgICAgcGFkZGluZzogUF9NLAogICAgICAgICAgc2xpdmVyOiBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgICAgICAgICAgIGNoaWxkOiBDb2x1bW4oCiAgICAgICAgICAgICAgY3Jvc3NBeGlzQWxpZ25tZW50OiBDcm9zc0F4aXNBbGlnbm1lbnQuc3RyZXRjaCwKICAgICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgICAgVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnRvdGFsV29yZHModG90YWxDb3VudCkpLAogICAgICAgICAgICAgICAgSG9va0J1aWxkZXIoYnVpbGRlcjogKGNvbnRleHQpIHsKICAgICAgICAgICAgICAgICAgZmluYWwgY292ZXJlZEtleXMgPSB1c2VNZW1vaXplZCgoKSB7CiAgICAgICAgICAgICAgICAgICAgZmluYWwgY292ZXJlZEtleXMgPSA8U3RyaW5nS2V5Pnt9OwogICAgICAgICAgICAgICAgICAgIGZvciAoZmluYWwgc3RvcnkgaW4gc3RyaW5nU3RvcmllcygpKSB7CiAgICAgICAgICAgICAgICAgICAgICBjb3ZlcmVkS2V5cy5hZGRBbGwoc3Rvcnkua2V5cyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb3ZlcmVkS2V5czsKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICBpZiAoY292ZXJlZEtleXMubGVuZ3RoID09IHRvdGFsQ291bnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uc3QgU2l6ZWRCb3guc2hyaW5rKCk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGZpbmFsIG1pc3NpbmdDb3VudCA9IHRvdGFsQ291bnQgLSBjb3ZlcmVkS2V5cy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgIGZpbmFsIG1pc3NpbmcgPSBTZXQ8U3RyaW5nS2V5Pi5mcm9tKFN0cmluZ0tleS52YWx1ZXMpCiAgICAgICAgICAgICAgICAgICAgLi5yZW1vdmVBbGwoY292ZXJlZEtleXMpOwoKICAgICAgICAgICAgICAgICAgcmV0dXJuIFRleHQoCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5taXNzaW5nU3RvcmllcygKICAgICAgICAgICAgICAgICAgICAgICAgbWlzc2luZ0NvdW50LCBtaXNzaW5nLm1hcCgoaXQpID0+IGl0LmtleSkuam9pbigiLCAiKSksCiAgICAgICAgICAgICAgICAgICAgc3R5bGU6IFRleHRTdHlsZShjb2xvcjogY29udGV4dC5jb2xvcnMuZXJyb3IpLAogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBUZXh0KHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MuY29ycmVjdGVkKGRpZmZDb3VudCkpLAogICAgICAgICAgICAgICAgVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLmFwcHJvdmVkKGFwcHJvdmVkQ291bnQpKSwKICAgICAgICAgICAgICBdLAogICAgICAgICAgICApLAogICAgICAgICAgKSwKICAgICAgICApLAogICAgICAgIFNsaXZlclRvQm94QWRhcHRlcigKICAgICAgICAgIGNoaWxkOiBQYWRkaW5nKAogICAgICAgICAgICBwYWRkaW5nOiBQSF9NLAogICAgICAgICAgICBjaGlsZDogT3V0bGluZWRCdXR0b24oCiAgICAgICAgICAgICAgb25QcmVzc2VkOiAoKSBhc3luYyB7CiAgICAgICAgICAgICAgICBjb250ZXh0LnJlYWQ8X1NoZWV0c0NvbnRyb2xsZXI+KCkubW92ZVRvKF9TaGVldHMuZGlmZik7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjaGlsZDogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnZpZXdNeUNoYW5nZXMpLAogICAgICAgICAgICApLAogICAgICAgICAgKSwKICAgICAgICApLAogICAgICAgIGNvbnN0IFNsaXZlclRvQm94QWRhcHRlcigKICAgICAgICAgIGNoaWxkOiBTVl9NLAogICAgICAgICksCiAgICAgICAgU2xpdmVyVG9Cb3hBZGFwdGVyKAogICAgICAgICAgY2hpbGQ6IFBhZGRpbmcoCiAgICAgICAgICAgIHBhZGRpbmc6IFBIX00sCiAgICAgICAgICAgIGNoaWxkOiBPdXRsaW5lZEJ1dHRvbigKICAgICAgICAgICAgICBvblByZXNzZWQ6ICgpIGFzeW5jIHsKICAgICAgICAgICAgICAgIC8vIGRldGVybWluZSB3aGF0IGlzIG5leHQKICAgICAgICAgICAgICAgIGNvbnRleHQucmVhZDxfU2hlZXRzQ29udHJvbGxlcj4oKS5tb3ZlVG8oX1NoZWV0cy5jb250YWN0RGF0YSk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjaGlsZDogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnN1Ym1pdE15Q2hhbmdlcyksCiAgICAgICAgICAgICksCiAgICAgICAgICApLAogICAgICAgICksCiAgICAgICAgX2JvdHRvbVNhZmVQYWRkaW5nLAogICAgICBdOwogICAgfSwKICApOwp9CgpTbGl2ZXJXb2x0TW9kYWxTaGVldFBhZ2UgX2RpZmYoKSB7CiAgcmV0dXJuIFNsaXZlcldvbHRNb2RhbFNoZWV0UGFnZSgKICAgICAgbGVhZGluZ05hdkJhcldpZGdldDogY29uc3QgX0xlYWRpbmdCdXR0b24oKSwKICAgICAgdG9wQmFyVGl0bGU6IFRleHQoc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5teUNoYW5nZXMpLAogICAgICBpc1RvcEJhckxheWVyQWx3YXlzVmlzaWJsZTogdHJ1ZSwKICAgICAgbWFpbkNvbnRlbnRTbGl2ZXJzQnVpbGRlcjogKGNvbnRleHQpIHsKICAgICAgICBmaW5hbCBkaWZmS2V5cyA9CiAgICAgICAgICAgIGNvbnRleHQuc2VsZWN0KChTbGFuZ0VkaXRvckN1Yml0IGN1Yml0KSA9PiBjdWJpdC5zdGF0ZS5kaWZmS2V5cyk7CgogICAgICAgIHJldHVybiBbCiAgICAgICAgICBpZiAoZGlmZktleXMuaXNFbXB0eSkKICAgICAgICAgICAgU2xpdmVyVG9Cb3hBZGFwdGVyKAogICAgICAgICAgICAgIGNoaWxkOiBTdHJpbmdTdG9yeUVtcHR5U3RhdGUoCiAgICAgICAgICAgICAgICBpY29uOiBJY29uKEljb25zLmxhbmd1YWdlKSwKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLm5vQ2hhbmdlc1lldCwKICAgICAgICAgICAgICApLAogICAgICAgICAgICApLAogICAgICAgICAgU2xpdmVyTGlzdC5idWlsZGVyKAogICAgICAgICAgICBpdGVtQ291bnQ6IGRpZmZLZXlzLmxlbmd0aCwKICAgICAgICAgICAgaXRlbUJ1aWxkZXI6IChjb250ZXh0LCBpbmRleCkgewogICAgICAgICAgICAgIHJldHVybiBfRGlmZldpZGdldChzbGFuZ0tleTogZGlmZktleXNbaW5kZXhdKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICksCiAgICAgICAgICBfYm90dG9tU2FmZVBhZGRpbmcsCiAgICAgICAgXTsKICAgICAgfSk7Cn0KClNsaXZlcldvbHRNb2RhbFNoZWV0UGFnZSBfY29udGFjdERhdGEoKSB7CiAgcmV0dXJuIFNsaXZlcldvbHRNb2RhbFNoZWV0UGFnZSgKICAgIGlzVG9wQmFyTGF5ZXJBbHdheXNWaXNpYmxlOiB0cnVlLAogICAgbGVhZGluZ05hdkJhcldpZGdldDogY29uc3QgX0xlYWRpbmdCdXR0b24oKSwKICAgIHRvcEJhclRpdGxlOiBUZXh0KHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MueW91ckNvbnRhY3REYXRhKSwKICAgIG1haW5Db250ZW50U2xpdmVyc0J1aWxkZXI6IChjb250ZXh0KSB7CiAgICAgIGZpbmFsIHNoZWV0Q29udHJvbGxlciA9IGNvbnRleHQucmVhZDxfU2hlZXRzQ29udHJvbGxlcj4oKTsKICAgICAgcmV0dXJuIFsKICAgICAgICBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgICAgICAgICBjaGlsZDogUGFkZGluZygKICAgICAgICAgICAgcGFkZGluZzogUF9NLAogICAgICAgICAgICBjaGlsZDogU2ltcGxlUmljaFRleHQoCiAgICAgICAgICAgICAgc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5jb250YWN0RGF0YVJhdGlvbmFsZSwKICAgICAgICAgICAgICBzdHlsZTogVGV4dFN0eWxlKAogICAgICAgICAgICAgICAgY29sb3I6IGNvbnRleHQuY29sb3JzLm9uU3VyZmFjZSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIHRleHRBbGlnbjogVGV4dEFsaWduLmp1c3RpZnksCiAgICAgICAgICAgICksCiAgICAgICAgICApLAogICAgICAgICksCiAgICAgICAgU2xpdmVyVG9Cb3hBZGFwdGVyKAogICAgICAgICAgY2hpbGQ6IEhvb2tCdWlsZGVyKGJ1aWxkZXI6IChjb250ZXh0KSB7CiAgICAgICAgICAgIHJldHVybiBTaGVldElucHV0KAogICAgICAgICAgICAgIHBhZGRpbmc6IFBIX00sCiAgICAgICAgICAgICAga2V5OiBjb25zdCBWYWx1ZUtleSgiY29udHJpYnV0b3JOYW1lIiksCiAgICAgICAgICAgICAgdGV4dENvbnRyb2xsZXI6IHNoZWV0Q29udHJvbGxlci5uYW1lQ29udHJvbGxlciwKICAgICAgICAgICAgICBoaW50VGV4dDogc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5uYW1lT3JOaWNrTmFtZSwKICAgICAgICAgICAgICBwcmVmaXhJY29uOiBjb25zdCBJY29uKEljb25zLnBlcnNvbiksCiAgICAgICAgICAgICAgZXJyb3JUZXh0OiB1c2VMaXN0ZW5hYmxlKHNoZWV0Q29udHJvbGxlci5uYW1lRXJyb3IpLnZhbHVlLAogICAgICAgICAgICApOwogICAgICAgICAgfSksCiAgICAgICAgKSwKICAgICAgICBjb25zdCBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgICAgICAgICBjaGlsZDogU1ZfTSwKICAgICAgICApLAogICAgICAgIFNsaXZlclRvQm94QWRhcHRlcigKICAgICAgICAgIGNoaWxkOiBIb29rQnVpbGRlcihidWlsZGVyOiAoY29udGV4dCkgewogICAgICAgICAgICByZXR1cm4gU2hlZXRJbnB1dCgKICAgICAgICAgICAgICBwYWRkaW5nOiBQSF9NLAogICAgICAgICAgICAgIGtleTogY29uc3QgVmFsdWVLZXkoImVtYWlsQWRkcmVzcyIpLAogICAgICAgICAgICAgIHRleHRDb250cm9sbGVyOiBzaGVldENvbnRyb2xsZXIuZW1haWxDb250cm9sbGVyLAogICAgICAgICAgICAgIGhpbnRUZXh0OiBzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLmVtYWlsQWRkcmVzcywKICAgICAgICAgICAgICBwcmVmaXhJY29uOiBjb25zdCBJY29uKEljb25zLmVtYWlsX291dGxpbmVkKSwKICAgICAgICAgICAgICBlcnJvclRleHQ6IHVzZUxpc3RlbmFibGUoc2hlZXRDb250cm9sbGVyLmVtYWlsRXJyb3IpLnZhbHVlLAogICAgICAgICAgICApOwogICAgICAgICAgfSksCiAgICAgICAgKSwKICAgICAgICBjb25zdCBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgICAgICAgICBjaGlsZDogU1ZfTSwKICAgICAgICApLAogICAgICAgIFNsaXZlclRvQm94QWRhcHRlcigKICAgICAgICAgIGNoaWxkOiBIb29rQnVpbGRlcihidWlsZGVyOiAoY29udGV4dCkgewogICAgICAgICAgICByZXR1cm4gU2hlZXRJbnB1dCgKICAgICAgICAgICAgICBwYWRkaW5nOiBQSF9NLAogICAgICAgICAgICAgIGtleTogY29uc3QgVmFsdWVLZXkoIndlYnNpdGVBZGRyZXNzIiksCiAgICAgICAgICAgICAgdGV4dENvbnRyb2xsZXI6IHNoZWV0Q29udHJvbGxlci53ZWJDb250cm9sbGVyLAogICAgICAgICAgICAgIGhpbnRUZXh0OiBzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLm5hbWVPck5pY2tOYW1lLAogICAgICAgICAgICAgIHByZWZpeEljb246IGNvbnN0IEljb24oSWNvbnMud2ViX3NoYXJwKSwKICAgICAgICAgICAgICBlcnJvclRleHQ6IHVzZUxpc3RlbmFibGUoc2hlZXRDb250cm9sbGVyLndlYkVycm9yKS52YWx1ZSwKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pLAogICAgICAgICksCiAgICAgICAgY29uc3QgU2xpdmVyVG9Cb3hBZGFwdGVyKAogICAgICAgICAgY2hpbGQ6IFNWX1hMLAogICAgICAgICksCiAgICAgICAgU2xpdmVyVG9Cb3hBZGFwdGVyKAogICAgICAgICAgY2hpbGQ6IFBhZGRpbmcoCiAgICAgICAgICAgIHBhZGRpbmc6IFBIX00sCiAgICAgICAgICAgIGNoaWxkOiBPdXRsaW5lZEJ1dHRvbigKICAgICAgICAgICAgICBvblByZXNzZWQ6ICgpIGFzeW5jIHsKICAgICAgICAgICAgICAgIC8vIGRldGVybWluZSB3aGF0IGlzIG5leHQKICAgICAgICAgICAgICAgIGNvbnRleHQucmVhZDxfU2hlZXRzQ29udHJvbGxlcj4oKS5tb3ZlVG9BZ3JlZW1lbnQoKTsKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGNoaWxkOiBUZXh0KHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MubmV4dCksCiAgICAgICAgICAgICksCiAgICAgICAgICApLAogICAgICAgICksCiAgICAgICAgX2JvdHRvbVNhZmVQYWRkaW5nLAogICAgICBdOwogICAgfSwKICApOwp9CgpTbGl2ZXJXb2x0TW9kYWxTaGVldFBhZ2UgX2FncmVlQW5kU3VibWl0KCkgewogIHJldHVybiBTbGl2ZXJXb2x0TW9kYWxTaGVldFBhZ2UoCiAgICBpc1RvcEJhckxheWVyQWx3YXlzVmlzaWJsZTogdHJ1ZSwKICAgIGxlYWRpbmdOYXZCYXJXaWRnZXQ6IGNvbnN0IF9MZWFkaW5nQnV0dG9uKCksCiAgICB0b3BCYXJUaXRsZTogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLmFncmVlbWVudCksCiAgICBtYWluQ29udGVudFNsaXZlcnNCdWlsZGVyOiAoY29udGV4dCkgPT4gWwogICAgICBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgICAgICAgY2hpbGQ6IFBhZGRpbmcoCiAgICAgICAgICBwYWRkaW5nOiBQX00sCiAgICAgICAgICBjaGlsZDogVGV4dCgKICAgICAgICAgICAgc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5hZ3JlZW1lbnRDb250ZW50LAogICAgICAgICAgICB0ZXh0QWxpZ246IFRleHRBbGlnbi5qdXN0aWZ5LAogICAgICAgICAgKSwKICAgICAgICApLAogICAgICApLAogICAgICBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgICAgICAgY2hpbGQ6IFBhZGRpbmcoCiAgICAgICAgICBwYWRkaW5nOiBQSF9NLAogICAgICAgICAgY2hpbGQ6IE91dGxpbmVkQnV0dG9uKAogICAgICAgICAgICBvblByZXNzZWQ6ICgpIGFzeW5jIHsKICAgICAgICAgICAgICAvLyBkZXRlcm1pbmUgd2hhdCBpcyBuZXh0CiAgICAgICAgICAgICAgY29udGV4dC5yZWFkPF9TaGVldHNDb250cm9sbGVyPigpLnN1Ym1pdFRyYW5zbGF0aW9ucygpOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjaGlsZDogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLmFncmVlQW5kU3VibWl0KSwKICAgICAgICAgICksCiAgICAgICAgKSwKICAgICAgKSwKICAgICAgX2JvdHRvbVNhZmVQYWRkaW5nLAogICAgXSwKICApOwp9CgpzZWFsZWQgY2xhc3MgX0RhdGFTdGF0dXMgewogIGNvbnN0IF9EYXRhU3RhdHVzKCk7Cn0KCmNsYXNzIF9EYXRhU3RhdHVzSWRsZSBleHRlbmRzIF9EYXRhU3RhdHVzIHsKICBjb25zdCBfRGF0YVN0YXR1c0lkbGUoKTsKfQoKY2xhc3MgX0RhdGFTdGF0dXNPSyBleHRlbmRzIF9EYXRhU3RhdHVzIHsKICBjb25zdCBfRGF0YVN0YXR1c09LKCk7Cn0KCmNsYXNzIF9EYXRhU3RhdHVzRmFpbCBleHRlbmRzIF9EYXRhU3RhdHVzIHsKICBjb25zdCBfRGF0YVN0YXR1c0ZhaWwodGhpcy5yZWFzb24pOwoKICBmaW5hbCBkeW5hbWljIHJlYXNvbjsKfQoKY2xhc3MgX0RhdGFTdGF0dXNJblByb2dyZXNzIGV4dGVuZHMgX0RhdGFTdGF0dXMgewogIGNvbnN0IF9EYXRhU3RhdHVzSW5Qcm9ncmVzcygpOwp9CgpTbGl2ZXJXb2x0TW9kYWxTaGVldFBhZ2UgX3NlbmRpbmcoKSB7CiAgcmV0dXJuIFNsaXZlcldvbHRNb2RhbFNoZWV0UGFnZSgKICAgICAgaXNUb3BCYXJMYXllckFsd2F5c1Zpc2libGU6IHRydWUsCiAgICAgIGxlYWRpbmdOYXZCYXJXaWRnZXQ6IGNvbnN0IF9MZWFkaW5nQnV0dG9uKCksCiAgICAgIHRvcEJhclRpdGxlOiBUZXh0KHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3Muc2VuZGluZ0RhdGEpLAogICAgICBtYWluQ29udGVudFNsaXZlcnNCdWlsZGVyOiAoY29udGV4dCkgewogICAgICAgIGZpbmFsIGNvbnRyb2xsZXIgPSBjb250ZXh0LnJlYWQ8X1NoZWV0c0NvbnRyb2xsZXI+KCk7CiAgICAgICAgcmV0dXJuIFsKICAgICAgICAgIFNsaXZlclRvQm94QWRhcHRlcigKICAgICAgICAgICAgY2hpbGQ6IEhvb2tCdWlsZGVyKGJ1aWxkZXI6IChjb250ZXh0KSB7CiAgICAgICAgICAgICAgdXNlTGlzdGVuYWJsZShjb250cm9sbGVyLmRhdGFTdGF0dXMpOwogICAgICAgICAgICAgIHJldHVybiBzd2l0Y2ggKGNvbnRyb2xsZXIuZGF0YVN0YXR1cy52YWx1ZSkgewogICAgICAgICAgICAgICAgX0RhdGFTdGF0dXNGYWlsKDpmaW5hbCByZWFzb24pID0+IENvbHVtbigKICAgICAgICAgICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgICAgICAgICAgU3RyaW5nU3RvcnlTZXJ2aWNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5pbnN0YW5jZS5pbkFwcEVkaXRvckNvbmZpZy5idWlsZEVycm9yV2lkZ2V0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8uY2FsbChyZWFzb24pID8/CiAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dChyZWFzb24udG9TdHJpbmcoKSksCiAgICAgICAgICAgICAgICAgICAgICBQYWRkaW5nKAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiBQSF9NLAogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZDogT3V0bGluZWRCdXR0b24oCiAgICAgICAgICAgICAgICAgICAgICAgICAgb25QcmVzc2VkOiAoKSBhc3luYyB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlYWQ8X1NoZWV0c0NvbnRyb2xsZXI+KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3VibWl0VHJhbnNsYXRpb25zKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZDogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnRyeUFnYWluKSwKICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgX0RhdGFTdGF0dXNJblByb2dyZXNzKCkgPT4gU2hlZXRJbnB1dEhpbnQoCiAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy50cmFuc2xhdGlvbnNBcmVVcGxvYWRlZCwKICAgICAgICAgICAgICAgICAgICBzaG93U3Bpbm5lcjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIChfKSA9PiBjb25zdCBTaXplZEJveChoZWlnaHQ6IERpbWVuc2lvbnNEb3VibGUueHhsKSwKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KSwKICAgICAgICAgICksCiAgICAgICAgICBfYm90dG9tU2FmZVBhZGRpbmcsCiAgICAgICAgXTsKICAgICAgfSk7Cn0KClNsaXZlcldvbHRNb2RhbFNoZWV0UGFnZSBfdGhhbmtZb3UoKSB7CiAgcmV0dXJuIFNsaXZlcldvbHRNb2RhbFNoZWV0UGFnZSgKICAgIGlzVG9wQmFyTGF5ZXJBbHdheXNWaXNpYmxlOiB0cnVlLAogICAgdG9wQmFyVGl0bGU6IFRleHQoc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5hbGxEb25lKSwKICAgIG1haW5Db250ZW50U2xpdmVyc0J1aWxkZXI6IChjb250ZXh0KSA9PiBbCiAgICAgIFNsaXZlclRvQm94QWRhcHRlcigKICAgICAgICBjaGlsZDogUGFkZGluZygKICAgICAgICAgIHBhZGRpbmc6IFBfTSwKICAgICAgICAgIGNoaWxkOiBDb2x1bW4oCiAgICAgICAgICAgIGNyb3NzQXhpc0FsaWdubWVudDogQ3Jvc3NBeGlzQWxpZ25tZW50LnN0cmV0Y2gsCiAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgVGV4dCgKICAgICAgICAgICAgICAgIHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MudGhhbmtZb3VIZWFkbGluZSwKICAgICAgICAgICAgICAgIHRleHRBbGlnbjogVGV4dEFsaWduLmNlbnRlciwKICAgICAgICAgICAgICAgIHN0eWxlOiBUZXh0U3R5bGUoZm9udFNpemU6IERpbWVuc2lvbnNEb3VibGUueGwpLAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgVGV4dCgKICAgICAgICAgICAgICAgIHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MudGhhbmtZb3VTZWNvbmRMaW5lLAogICAgICAgICAgICAgICAgdGV4dEFsaWduOiBUZXh0QWxpZ24uY2VudGVyLAogICAgICAgICAgICAgICksCiAgICAgICAgICAgIF0sCiAgICAgICAgICApLAogICAgICAgICksCiAgICAgICksCiAgICAgIF9ib3R0b21TYWZlUGFkZGluZywKICAgIF0sCiAgKTsKfQoKY2xhc3MgX0xlYWRpbmdCdXR0b24gZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBjb25zdCBfTGVhZGluZ0J1dHRvbigpOwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGZpbmFsIGNvbnRyb2xsZXIgPSBjb250ZXh0LnJlYWQ8X1NoZWV0c0NvbnRyb2xsZXI+KCk7CiAgICB1c2VMaXN0ZW5hYmxlKGNvbnRyb2xsZXIubGlzdGVuYWJsZSk7CgogICAgcmV0dXJuIEljb25CdXR0b24oCiAgICAgIHBhZGRpbmc6IFBfTSwKICAgICAgaWNvbjogSWNvbihjb250cm9sbGVyLmNhbkdvQmFjaygpID8gSWNvbnMuY2hldnJvbl9sZWZ0IDogSWNvbnMuY2xvc2UpLAogICAgICBvblByZXNzZWQ6ICgpIGFzeW5jIHsKICAgICAgICBjb250cm9sbGVyLmdvQmFjaygpOwogICAgICB9LAogICAgKTsKICB9Cn0KCmNsYXNzIF9EaWZmV2lkZ2V0IGV4dGVuZHMgU3RhdGVsZXNzV2lkZ2V0IHsKICBjb25zdCBfRGlmZldpZGdldCh7CiAgICByZXF1aXJlZCB0aGlzLnNsYW5nS2V5LAogIH0pOwoKICBmaW5hbCBTdHJpbmcgc2xhbmdLZXk7CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgZmluYWwgKGJlZm9yZSwgYWZ0ZXIpID0gY29udGV4dC5zZWxlY3QoKFNsYW5nRWRpdG9yQ3ViaXQgY3ViaXQpIHsKICAgICAgZmluYWwgc3RhdGUgPSBjdWJpdC5zdGF0ZTsKICAgICAgcmV0dXJuIChzdGF0ZS5vdlNsYW5nSnNvbltzbGFuZ0tleV0sIHN0YXRlLnNsYW5nSnNvbltzbGFuZ0tleV0pOwogICAgfSk7CgogICAgU3RyaW5nIHByZXR0eShkeW5hbWljIHZhbHVlKSB7CiAgICAgIGlmICh2YWx1ZSBpcyBNYXApIHsKICAgICAgICByZXR1cm4gY29uc3QgSnNvbkVuY29kZXIud2l0aEluZGVudCgnICAnKS5jb252ZXJ0KHZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBQYWRkaW5nKAogICAgICBwYWRkaW5nOiBQSF9NICsgUFZfWFMsCiAgICAgIGNoaWxkOiBDb2x1bW4oCiAgICAgICAgY3Jvc3NBeGlzQWxpZ25tZW50OiBDcm9zc0F4aXNBbGlnbm1lbnQuc3RhcnQsCiAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgIFN0cmluZ1N0b3J5U2VjdGlvbldpZGdldCgKICAgICAgICAgICAgc2xhbmdLZXksCiAgICAgICAgICAgIHBhZGRpbmc6IEVkZ2VJbnNldHMuemVybywKICAgICAgICAgICksCiAgICAgICAgICBTVl9YUywKICAgICAgICAgIFJvdygKICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICBFeHBhbmRlZCgKICAgICAgICAgICAgICAgIGZsZXg6IDEsCiAgICAgICAgICAgICAgICBjaGlsZDogVGV4dCgKICAgICAgICAgICAgICAgICAgcHJldHR5KGJlZm9yZSksCiAgICAgICAgICAgICAgICAgIHN0eWxlOiBjb250ZXh0LnRleHRTdHlsZXMubGFiZWxNZWRpdW0sCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgSWNvbigKICAgICAgICAgICAgICAgIEljb25zLmFycm93X2ZvcndhcmQsCiAgICAgICAgICAgICAgICBzaXplOiBEaW1lbnNpb25zRG91YmxlLm0sCiAgICAgICAgICAgICAgICBjb2xvcjogY29udGV4dC5jb2xvcnMucHJpbWFyeUZpeGVkRGltLAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgU0hfWFMsCiAgICAgICAgICAgICAgRXhwYW5kZWQoCiAgICAgICAgICAgICAgICBmbGV4OiAxLAogICAgICAgICAgICAgICAgY2hpbGQ6IFRleHQoCiAgICAgICAgICAgICAgICAgIHByZXR0eShhZnRlciksCiAgICAgICAgICAgICAgICAgIHN0eWxlOiBjb250ZXh0LnRleHRTdHlsZXMubGFiZWxNZWRpdW0sCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgSW5rV2VsbCgKICAgICAgICAgICAgICAgIG9uVGFwOiAoKSB7CiAgICAgICAgICAgICAgICAgIGNvbnRleHQucmVhZDxTbGFuZ0VkaXRvckN1Yml0PigpLnJlc2V0S2V5KHNsYW5nS2V5KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjaGlsZDogSWNvbigKICAgICAgICAgICAgICAgICAgSWNvbnMuZGVsZXRlLAogICAgICAgICAgICAgICAgICBzaXplOiBEaW1lbnNpb25zRG91YmxlLm0sCiAgICAgICAgICAgICAgICAgIGNvbG9yOiBjb250ZXh0LmNvbG9ycy5lcnJvciwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgKQogICAgICAgICAgICBdLAogICAgICAgICAgKSwKICAgICAgICBdLAogICAgICApLAogICAgKTsKICB9Cn0KCkZ1dHVyZTx2b2lkPiBfc3VibWl0VHJhbnNsYXRpb25zKHsKICByZXF1aXJlZCBTbGFuZ0Jhc2VDdWJpdCBzbGFuZ0Jhc2VDdWJpdCwKfSkgYXN5bmMgewogIGZpbmFsIGRpZmZDb250ZW50ID0gYXdhaXQgc2xhbmdCYXNlQ3ViaXQuZXhwb3J0RGlmZkNvbnRlbnQoKTsKCiAgYXdhaXQgU3RyaW5nU3RvcnlTZXJ2aWNlLmluc3RhbmNlLmluQXBwRWRpdG9yQ29uZmlnCiAgICAgIC5zdWJtaXRUcmFuc2xhdGlvbnMoZGlmZkNvbnRlbnQsIF9zbGFuZ1N0cmluZ3NWZXJzaW9uKTsKCiAgc2xhbmdCYXNlQ3ViaXQubWFya1N1Ym1pdHRlZCgpOwp9Cg==';
  static String get assets_locale_submit_sheet_mustache =>
      _decode(_assets_locale_submit_sheet_mustache);
  static const String _assets_generate_translations_prompt_mustache =
      'VHJhbnNsYXRlIHRoZSB0ZXh0IHNwZWNpZmllZCBhZnRlciAnLS0tJyBmcm9tIHRoZSB7e2Zyb219fSBsYW5ndWFnZSB0byB0aGUge3t0b319IGxhbmd1YWdlLgoKS2VlcCB0aGUgb3JpZ2luYWwgZm9ybWF0aW5nIChpbmNsdWRpbmcgbmV3bGluZXMpLCByZXR1cm4gdGhlIHRyYW5zbGF0ZWQgdGV4dCBvbmx5LgoKLS0tCnt7dGV4dH19';
  static String get assets_generate_translations_prompt_mustache =>
      _decode(_assets_generate_translations_prompt_mustache);
}

String _decode(String base64String) => utf8.decode(base64Decode(base64String));
