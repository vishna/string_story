// GENERATED CODE - DO NOT MODIFY BY HAND
// ignore_for_file: constant_identifier_names, non_constant_identifier_names
import 'dart:convert';

class Assets {
  static const String _assets_string_key_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdwYWNrYWdlOmNvbGxlY3Rpb24vY29sbGVjdGlvbi5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnN0cmluZ19zdG9yeS9zdHJpbmdfc3RvcnkuZGFydCc7CgplbnVtIFN0cmluZ0tleSB7Cnt7IyBpdGVtcyB9fSAge3tuYW1lfX0oJ3t7dmFsdWV9fScpe3t0ZXJtaW5hdG9yfX0Ke3svIGl0ZW1zIH19CgogIGZpbmFsIFN0cmluZyBrZXk7CgogIGNvbnN0IFN0cmluZ0tleSh0aGlzLmtleSk7Cn0KCmV4dGVuc2lvbiBTdHJpbmdLZXlFeHQgb24gU3RyaW5nS2V5IHsKICBzdGF0aWMgU3RyaW5nS2V5PyBmcm9tU3RyaW5nKFN0cmluZyB2YWx1ZSkgewogICAgZmluYWwga2V5ID0gdmFsdWUuc3BsaXQoIi4iKS5maXJzdDsKCiAgICBmaW5hbCBzaW1wbGVLZXkgPSBTdHJpbmdLZXkudmFsdWVzLmZpcnN0V2hlcmVPck51bGwoKGl0KSA9PiBpdC5rZXkgPT0ga2V5KTsKCiAgICBpZiAoc2ltcGxlS2V5ICE9IG51bGwpIHsKICAgICAgcmV0dXJuIHNpbXBsZUtleTsKICAgIH0KCiAgICBmaW5hbCBjb21wbGV4S2V5ID0gU3RyaW5nS2V5LnZhbHVlcy5maXJzdFdoZXJlT3JOdWxsKChpdCkgewogICAgICByZXR1cm4gaXQua2V5LnJlbW92ZVByZWZpeChrZXkpLnN0YXJ0c1dpdGgoIigiKTsKICAgIH0pOwoKICAgIHJldHVybiBjb21wbGV4S2V5OwogIH0KfQ==';
  static String get assets_string_key_mustache =>
      _decode(_assets_string_key_mustache);
  static const String _assets_string_story_core_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdwYWNrYWdlOmVxdWF0YWJsZS9lcXVhdGFibGUuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyL21hdGVyaWFsLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlcl9ibG9jL2ZsdXR0ZXJfYmxvYy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXJfaG9va3MvZmx1dHRlcl9ob29rcy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXJfbG9jYWxpemF0aW9ucy9mbHV0dGVyX2xvY2FsaXphdGlvbnMuZGFydCc7CmltcG9ydCAncGFja2FnZTp7e3BhY2thZ2VOYW1lfX0ve3t7c3RyaW5nU3Rvcnl9fX0vc3RyaW5nX3N0b3J5LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6e3twYWNrYWdlTmFtZX19L3t7e2kxOG59fX0vc3RyaW5ncy5nLmRhcnQnOwoKY2xhc3MgU3RyaW5nU3RvcnlTZWxlY3Rpb24gZXh0ZW5kcyBFcXVhdGFibGUgewogIGNvbnN0IFN0cmluZ1N0b3J5U2VsZWN0aW9uKHsKICAgIHJlcXVpcmVkIHRoaXMua2V5LAogIH0pOwoKICBmaW5hbCBTdHJpbmdLZXk/IGtleTsKCiAgQG92ZXJyaWRlCiAgTGlzdDxPYmplY3Q/PiBnZXQgcHJvcHMgPT4gWwogICAgICAgIGtleSwKICAgICAgXTsKCiAgc3RhdGljIFN0cmluZ1N0b3J5U2VsZWN0aW9uPyBtYXliZU9mKEJ1aWxkQ29udGV4dCBjb250ZXh0KSA9PgogICAgICBjb250ZXh0LnJlYWQ8U3RyaW5nU3RvcnlTZWxlY3Rpb24/PigpOwp9CgpjbGFzcyBTdHJpbmdTdG9yeSBleHRlbmRzIEVxdWF0YWJsZSB7CiAgY29uc3QgU3RyaW5nU3RvcnkoewogICAgcmVxdWlyZWQgdGhpcy5rZXlzLAogICAgcmVxdWlyZWQgdGhpcy50aXRsZSwKICAgIHJlcXVpcmVkIHRoaXMuYnVpbGRlciwKICB9KTsKCiAgZmluYWwgTGlzdDxTdHJpbmdLZXk+IGtleXM7CiAgZmluYWwgU3RyaW5nIHRpdGxlOwogIGZpbmFsIFdpZGdldEJ1aWxkZXIgYnVpbGRlcjsKCiAgQG92ZXJyaWRlCiAgTGlzdDxPYmplY3Q/PiBnZXQgcHJvcHMgPT4gW2tleXMsIHRpdGxlXTsKfQoKY2xhc3MgU3RyaW5nU3RvcnlBcHAgZXh0ZW5kcyBTdGF0ZWxlc3NXaWRnZXQgewogIGNvbnN0IFN0cmluZ1N0b3J5QXBwKHsKICAgIHN1cGVyLmtleSwKICAgIHJlcXVpcmVkIHRoaXMuYnVpbGRlciwKICAgIHRoaXMubmF2aWdhdG9yS2V5LAogICAgdGhpcy5saWdodFRoZW1lLAogICAgdGhpcy5kYXJrVGhlbWUsCiAgICB0aGlzLnRoZW1lTW9kZSwKICB9KTsKCiAgZmluYWwgV2lkZ2V0QnVpbGRlciBidWlsZGVyOwogIGZpbmFsIEdsb2JhbEtleTxOYXZpZ2F0b3JTdGF0ZT4/IG5hdmlnYXRvcktleTsKICBmaW5hbCBUaGVtZURhdGE/IGxpZ2h0VGhlbWU7CiAgZmluYWwgVGhlbWVEYXRhPyBkYXJrVGhlbWU7CiAgZmluYWwgVGhlbWVNb2RlPyB0aGVtZU1vZGU7CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgZmluYWwgbG9jYWxpemF0aW9uc0RlbGVnYXRlcyA9IFsKICAgICAgR2xvYmFsTWF0ZXJpYWxMb2NhbGl6YXRpb25zLmRlbGVnYXRlLAogICAgICBHbG9iYWxXaWRnZXRzTG9jYWxpemF0aW9ucy5kZWxlZ2F0ZSwKICAgICAgR2xvYmFsQ3VwZXJ0aW5vTG9jYWxpemF0aW9ucy5kZWxlZ2F0ZSwKICAgICAgX1N0cmluZ1N0b3J5RGVsZWdhdGUoY29udGV4dC5zdHJpbmdzKSwKICAgIF07CgogICAgcmV0dXJuIE1hdGVyaWFsQXBwKAogICAgICBuYXZpZ2F0b3JLZXk6IG5hdmlnYXRvcktleSwKICAgICAgdGhlbWU6IGxpZ2h0VGhlbWUgPz8gVGhlbWUub2YoY29udGV4dCksCiAgICAgIGRhcmtUaGVtZTogZGFya1RoZW1lLAogICAgICB0aGVtZU1vZGU6IHRoZW1lTW9kZSwKICAgICAgZGVidWdTaG93Q2hlY2tlZE1vZGVCYW5uZXI6IGZhbHNlLAogICAgICBsb2NhbGl6YXRpb25zRGVsZWdhdGVzOiBsb2NhbGl6YXRpb25zRGVsZWdhdGVzLAogICAgICBzdXBwb3J0ZWRMb2NhbGVzOiBBcHBMb2NhbGVVdGlscy5zdXBwb3J0ZWRMb2NhbGVzLAogICAgICBob21lOiBCdWlsZGVyKAogICAgICAgIGJ1aWxkZXI6IGJ1aWxkZXIsCiAgICAgICksCiAgICApOwogIH0KfQoKY2xhc3MgU3RyaW5nU3RvcnlBdXRvT3BlbiBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgY29uc3QgU3RyaW5nU3RvcnlBdXRvT3Blbih7CiAgICBzdXBlci5rZXksCiAgICByZXF1aXJlZCB0aGlzLm9uT3BlbiwKICAgIHRoaXMubmF2aWdhdG9yS2V5LAogIH0pOwoKICBmaW5hbCB2b2lkIEZ1bmN0aW9uKEJ1aWxkQ29udGV4dCBjb250ZXh0KSBvbk9wZW47CiAgZmluYWwgR2xvYmFsS2V5PE5hdmlnYXRvclN0YXRlPj8gbmF2aWdhdG9yS2V5OwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IF8pIHsKICAgIHJldHVybiBTdHJpbmdTdG9yeUFwcCgKICAgICAgbmF2aWdhdG9yS2V5OiBuYXZpZ2F0b3JLZXksCiAgICAgIGJ1aWxkZXI6IChfKSB7CiAgICAgICAgcmV0dXJuIFNjYWZmb2xkKAogICAgICAgICAgYm9keTogU2FmZUFyZWEoCiAgICAgICAgICAgIGNoaWxkOiBIb29rQnVpbGRlcigKICAgICAgICAgICAgICBidWlsZGVyOiAoY29udGV4dCkgewogICAgICAgICAgICAgICAgZmluYWwgZGlkT3BlbiA9IHVzZVJlZihmYWxzZSk7CgogICAgICAgICAgICAgICAgdXNlRWZmZWN0KCgpIHsKICAgICAgICAgICAgICAgICAgV2lkZ2V0c0JpbmRpbmcuaW5zdGFuY2UuYWRkUG9zdEZyYW1lQ2FsbGJhY2soKF8pIHsKICAgICAgICAgICAgICAgICAgICBvbk9wZW4oY29udGV4dCk7CiAgICAgICAgICAgICAgICAgICAgZGlkT3Blbi52YWx1ZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgICAgIH0sIFtdKTsKCiAgICAgICAgICAgICAgICByZXR1cm4gY29uc3QgU2l6ZWRCb3guc2hyaW5rKCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgKSwKICAgICAgICAgICksCiAgICAgICAgKTsKICAgICAgfSwKICAgICk7CiAgfQp9CgpjbGFzcyBfU3RyaW5nU3RvcnlEZWxlZ2F0ZSBleHRlbmRzIExvY2FsaXphdGlvbnNEZWxlZ2F0ZTxUcmFuc2xhdGlvbnM+IHsKICBmaW5hbCBTIHN0cmluZ3M7CgogIF9TdHJpbmdTdG9yeURlbGVnYXRlKHRoaXMuc3RyaW5ncyk7CgogIEBvdmVycmlkZQogIGJvb2wgaXNTdXBwb3J0ZWQoTG9jYWxlIGxvY2FsZSkgPT4gdHJ1ZTsKCiAgQG92ZXJyaWRlCiAgRnV0dXJlPFRyYW5zbGF0aW9ucz4gbG9hZChMb2NhbGUgbG9jYWxlKSBhc3luYyA9PiBzdHJpbmdzOwoKICBAb3ZlcnJpZGUKICBib29sIHNob3VsZFJlbG9hZChjb3ZhcmlhbnQgTG9jYWxpemF0aW9uc0RlbGVnYXRlPFRyYW5zbGF0aW9ucz4gb2xkKSA9PgogICAgICBvbGQgIT0gdGhpczsKfQo=';
  static String get assets_string_story_core_mustache =>
      _decode(_assets_string_story_core_mustache);
  static const String _assets_string_story_screen_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdwYWNrYWdlOmNvbGxlY3Rpb24vY29sbGVjdGlvbi5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmRldmljZV9mcmFtZS9kZXZpY2VfZnJhbWUuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyL21hdGVyaWFsLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlcl9ibG9jL2ZsdXR0ZXJfYmxvYy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXJfaG9va3MvZmx1dHRlcl9ob29rcy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnt7cGFja2FnZU5hbWV9fS97e3tzdHJpbmdTdG9yeX19fS9zdHJpbmdfc3RvcnkuZGFydCc7CmltcG9ydCAncGFja2FnZTpwcm92aWRlci9wcm92aWRlci5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnN0cmluZ19zdG9yeS9zdHJpbmdfc3RvcnkuZGFydCc7CgpjbGFzcyBTdHJpbmdTdG9yeVNjcmVlbiBleHRlbmRzIEhvb2tXaWRnZXQgewogIGNvbnN0IFN0cmluZ1N0b3J5U2NyZWVuKHtzdXBlci5rZXl9KTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICB1c2VFZmZlY3QoKCkgewogICAgICBTdHJpbmdTdG9yeVNlcnZpY2UuaW5zdGFuY2UuaW5BcHBFZGl0b3JDb25maWcub25FbnRlcj8uY2FsbCgpOwogICAgICByZXR1cm4gU3RyaW5nU3RvcnlTZXJ2aWNlLmluc3RhbmNlLmluQXBwRWRpdG9yQ29uZmlnLm9uRXhpdDsKICAgIH0sIFtdKTsKCiAgICByZXR1cm4gQmxvY1Byb3ZpZGVyKAogICAgICBjcmVhdGU6IChjb250ZXh0KSB7CiAgICAgICAgcmV0dXJuIFNsYW5nRWRpdG9yQ3ViaXQoCiAgICAgICAgICBiYXNlQ3ViaXQ6IGNvbnRleHQucmVhZDxTbGFuZ0Jhc2VDdWJpdD4oKSwKICAgICAgICAgIHNjb3BlZEtleXM6IHt9LAogICAgICAgICAgb3ZMb2NhbGU6IFN0cmluZ1N0b3J5U2VydmljZS5pbnN0YW5jZS5jb25maWcuYXBwTGFuZ3VhZ2VDb2RlLAogICAgICAgICk7CiAgICAgIH0sCiAgICAgIGNoaWxkOiBjb25zdCBfUGFuZXMoKSwKICAgICk7CiAgfQp9CgpjbGFzcyBfUGFuZXMgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBjb25zdCBfUGFuZXMoKTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBzaGFyZWQgPSB1c2VNZW1vaXplZCgoKSA9PiBfU2hhcmVkKGNvbnRleHQucmVhZCgpKSk7CiAgICB1c2VFZmZlY3QoKCkgewogICAgICByZXR1cm4gKCkgewogICAgICAgIHNoYXJlZC5kaXNwb3NlKCk7CiAgICAgIH07CiAgICB9LCBbc2hhcmVkXSk7CgogICAgZmluYWwgbG9nUGFuZUJ1aWxkZXIgPQogICAgICAgIFN0cmluZ1N0b3J5U2VydmljZS5pbnN0YW5jZS5pbkFwcEVkaXRvckNvbmZpZy5kZXZlbG9wZXJMb2dQYW5lQnVpbGRlcjsKCiAgICByZXR1cm4gUHJvdmlkZXIudmFsdWUoCiAgICAgIHZhbHVlOiBzaGFyZWQsCiAgICAgIGNoaWxkOiBIb29rQnVpbGRlcigKICAgICAgICBidWlsZGVyOiAoY29udGV4dCkgewogICAgICAgICAgZmluYWwgaXNSZXBvcnRpbmcgPSB1c2VMaXN0ZW5hYmxlKHNoYXJlZC5pc1JlcG9ydGluZykudmFsdWU7CiAgICAgICAgICBpZiAoaXNSZXBvcnRpbmcpIHsKICAgICAgICAgICAgcmV0dXJuIFNjYWZmb2xkKAogICAgICAgICAgICAgIGJvZHk6IFJvdygKICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgICAgIEZsZXhpYmxlKAogICAgICAgICAgICAgICAgICAgIGNoaWxkOiBfQ29udGVudChpc01vYmlsZTogZmFsc2UsIGtleTogc2hhcmVkLmNvbnRlbnRLZXkpLAogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICBGbGV4aWJsZSgKICAgICAgICAgICAgICAgICAgICBjaGlsZDogbG9nUGFuZUJ1aWxkZXIgIT0gbnVsbAogICAgICAgICAgICAgICAgICAgICAgICA/IEJ1aWxkZXIoYnVpbGRlcjogbG9nUGFuZUJ1aWxkZXIpCiAgICAgICAgICAgICAgICAgICAgICAgIDogY29uc3QgUGxhY2Vob2xkZXIoKSwKICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gU3RyaW5nU3RvcnlBZGFwdGl2ZUxheW91dCgKICAgICAgICAgICAgbW9iaWxlOiAoXykgPT4gY29uc3QgX01vYmlsZUNvbnRlbnQoKSwKICAgICAgICAgICAgZGVza3RvcDogKF8pID0+IFNjYWZmb2xkKAogICAgICAgICAgICAgIGJvZHk6IFN0cmluZ1N0b3J5R29sZGVuUGFuZXMoCiAgICAgICAgICAgICAgICBmbGlwcGVkOiBmYWxzZSwKICAgICAgICAgICAgICAgIHNob3dEaXZpZGVyOiB0cnVlLAogICAgICAgICAgICAgICAgc21hbGxlclBhbmU6IF9LZXlzVHJlZShrZXk6IHNoYXJlZC5rZXlzVHJlZUtleSksCiAgICAgICAgICAgICAgICBiaWdnZXJQYW5lOiBfQ29udGVudChpc01vYmlsZTogZmFsc2UsIGtleTogc2hhcmVkLmNvbnRlbnRLZXkpLAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICksCiAgICAgICAgICApOwogICAgICAgIH0sCiAgICAgICksCiAgICApOwogIH0KfQoKY2xhc3MgX0tleXNUcmVlIGV4dGVuZHMgSG9va1dpZGdldCB7CiAgY29uc3QgX0tleXNUcmVlKHtyZXF1aXJlZCBzdXBlci5rZXksIHRoaXMuc2VhcmNoRmFkZUNvbG9yc30pOwoKICBmaW5hbCBMaXN0PENvbG9yPj8gc2VhcmNoRmFkZUNvbG9yczsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBzaGFyZWQgPSBjb250ZXh0LnJlYWQ8X1NoYXJlZD4oKTsKICAgIGZpbmFsIFZhbHVlTm90aWZpZXI8X1N0b3J5U3RhdGU/PiBzdGF0ZSA9IHNoYXJlZC5zdGF0ZTsKICAgIHVzZUxpc3RlbmFibGUoc3RhdGUpOwoKICAgIHJldHVybiBMb2NhbGVFZGl0b3JXaWRnZXQoCiAgICAgIGtleTogc2hhcmVkLmxvY2FsZUVkaXRvcktleSwKICAgICAgaXNTZWFyY2hBdmFpbGFibGU6IHRydWUsCiAgICAgIHNob3dTY29wZWRWYWx1ZXM6IGZhbHNlLAogICAgICBzZWFyY2hGYWRlQ29sb3JzOiBzZWFyY2hGYWRlQ29sb3JzLAogICAgICBvbkpzb25QYXRoU2VsZWN0ZWQ6ICh2YWx1ZSkgewogICAgICAgIGZpbmFsIHNlbGVjdGVkU3RyaW5nS2V5ID0gU3RyaW5nS2V5RXh0LmZyb21TdHJpbmcodmFsdWUpOwogICAgICAgIHNoYXJlZC5zZXRBY3RpdmVTdG9yeShrZXk6IHNlbGVjdGVkU3RyaW5nS2V5KTsKCiAgICAgICAgY29udGV4dC5yZWFkPFNsYW5nQmFzZUN1Yml0PigpLnNldExhc3RTZWxlY3RlZEtleSgKICAgICAgICAgIHNlbGVjdGVkU3RyaW5nS2V5Py5rZXksCiAgICAgICAgKTsKICAgICAgfSwKICAgICk7CiAgfQp9CgpjbGFzcyBfQ29udGVudCBleHRlbmRzIEhvb2tXaWRnZXQgewogIGNvbnN0IF9Db250ZW50KHtyZXF1aXJlZCBzdXBlci5rZXksIHJlcXVpcmVkIHRoaXMuaXNNb2JpbGV9KTsKCiAgZmluYWwgYm9vbCBpc01vYmlsZTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBzaGFyZWQgPSBjb250ZXh0LnJlYWQ8X1NoYXJlZD4oKTsKCiAgICBmaW5hbCBzdGF0ZSA9IHVzZUxpc3RlbmFibGUoc2hhcmVkLnN0YXRlKS52YWx1ZTsKICAgIGZpbmFsIGlzUmVwb3J0aW5nID0gdXNlTGlzdGVuYWJsZShzaGFyZWQuaXNSZXBvcnRpbmcpLnZhbHVlOwoKICAgIGZpbmFsIHNob3dDb250cm9scyA9IChzdGF0ZT8uc2hvd0NvbnRyb2xzID8/IGZhbHNlKSAmJiAhaXNSZXBvcnRpbmc7CgogICAgZmluYWwgZ2xvYmFsS2V5ID0gdXNlTWVtb2l6ZWQoKCkgPT4gR2xvYmFsS2V5KCksIFsKICAgICAgc3RhdGU/LmVmZmVjdGl2ZVN0cmluZ1N0b3J5LAogICAgICBzdGF0ZT8uYWN0aXZlS2V5LAogICAgICBzdGF0ZT8ucmVmcmVzaENvdW50ZXIsCiAgICBdKTsKCiAgICB2b2lkIHByZXYoKSB7CiAgICAgIHNoYXJlZC5zdGF0ZS52YWx1ZSA9IHNoYXJlZC5zdGF0ZS52YWx1ZT8ucHJldigpOwogICAgfQoKICAgIHZvaWQgbmV4dCgpIHsKICAgICAgc2hhcmVkLnN0YXRlLnZhbHVlID0gc2hhcmVkLnN0YXRlLnZhbHVlPy5uZXh0KCk7CiAgICB9CgogICAgZmluYWwgZGlzYWJsZVByZXZpZXdGb2N1cyA9IGNvbnRleHQuc2VsZWN0KAogICAgICAoU2xhbmdFZGl0b3JDdWJpdCBjKSA9PiBjLnN0YXRlLmRpc2FibGVQcmV2aWV3Rm9jdXMsCiAgICApOwoKICAgIHJldHVybiBQcm92aWRlcjxTdHJpbmdTdG9yeVNlbGVjdGlvbj4udmFsdWUoCiAgICAgIHZhbHVlOiBTdHJpbmdTdG9yeVNlbGVjdGlvbihrZXk6IHN0YXRlPy5hY3RpdmVLZXkpLAogICAgICBjaGlsZDogQ29sdW1uKAogICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICBpZiAoIWlzTW9iaWxlKSAuLi5bY29uc3QgX0FwcEJhcigpLCBTVl9TXSwKICAgICAgICAgIENlbnRlcihjaGlsZDogVGV4dChzaGFyZWQuc3RhdGUudmFsdWU/LmVmZmVjdGl2ZVRpdGxlID8/ICIiKSksCiAgICAgICAgICBTVl9YUywKICAgICAgICAgIEV4cGFuZGVkKAogICAgICAgICAgICBjaGlsZDogRGV2aWNlRnJhbWUoCiAgICAgICAgICAgICAgZGV2aWNlOiBEZXZpY2VzLmlvcy5pUGhvbmUxMywKICAgICAgICAgICAgICBzY3JlZW46IElua1dlbGwoCiAgICAgICAgICAgICAgICBvblRhcDogZGlzYWJsZVByZXZpZXdGb2N1cwogICAgICAgICAgICAgICAgICAgID8gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LnJlYWQ8U2xhbmdFZGl0b3JDdWJpdD4oKS5lbmFibGVGb2N1c1ByZXZpZXcoKTsKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICA6IG51bGwsCiAgICAgICAgICAgICAgICBvbkxvbmdQcmVzczogKCkgewogICAgICAgICAgICAgICAgICBzaGFyZWQuY3VycmVudFJlcG9ydCgpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGNoaWxkOiBJZ25vcmVGb2N1cygKICAgICAgICAgICAgICAgICAgaWdub3Jpbmc6IGRpc2FibGVQcmV2aWV3Rm9jdXMsCiAgICAgICAgICAgICAgICAgIGNoaWxkOiBJZ25vcmVQb2ludGVyKAogICAgICAgICAgICAgICAgICAgIGlnbm9yaW5nOiBkaXNhYmxlUHJldmlld0ZvY3VzLAogICAgICAgICAgICAgICAgICAgIGNoaWxkOiBDb2xvcmVkQm94KAogICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGNvbnRleHQuY29sb3JzLnN1cmZhY2UsCiAgICAgICAgICAgICAgICAgICAgICBjaGlsZDogVHJhbnNsYXRpb25TY29wZSgKICAgICAgICAgICAgICAgICAgICAgICAga2V5OiBWYWx1ZUtleSgKICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZT8uZWZmZWN0aXZlU3RyaW5nU3Rvcnk/LnRpdGxlID8/ICJOTyBTVE9SWSIsCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAgIGRlYnVnTGFiZWw6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZT8uZWZmZWN0aXZlU3RyaW5nU3Rvcnk/LnRpdGxlID8/ICJOTyBTVE9SWSIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3BlS2V5czogc2hhcmVkLmdldFNjb3BlS2V5c0J5U3RyaW5nU3RvcnkoCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU/LmVmZmVjdGl2ZVN0cmluZ1N0b3J5LAogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICBjaGlsZDogQnVpbGRlcigKICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6IGdsb2JhbEtleSwKICAgICAgICAgICAgICAgICAgICAgICAgICBidWlsZGVyOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZT8uZWZmZWN0aXZlU3RyaW5nU3Rvcnk/LmJ1aWxkZXIgPz8KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2VtcHR5UGF0aFN0YXRlLAogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICApLAogICAgICAgICAgKSwKICAgICAgICAgIFJvdygKICAgICAgICAgICAgbWFpbkF4aXNBbGlnbm1lbnQ6IE1haW5BeGlzQWxpZ25tZW50LmNlbnRlciwKICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICBpZiAoc2hvd0NvbnRyb2xzKQogICAgICAgICAgICAgICAgSWNvbkJ1dHRvbigKICAgICAgICAgICAgICAgICAgb25QcmVzc2VkOiBwcmV2LAogICAgICAgICAgICAgICAgICBpY29uOiBjb25zdCBJY29uKEljb25zLmNoZXZyb25fbGVmdCksCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIFNIX1hMLAogICAgICAgICAgICAgIEljb25CdXR0b24oCiAgICAgICAgICAgICAgICBvblByZXNzZWQ6IHNoYXJlZC5yZWZyZXNoLAogICAgICAgICAgICAgICAgaWNvbjogY29uc3QgSWNvbihJY29ucy5yZWZyZXNoKSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIFNIX1hMLAogICAgICAgICAgICAgIGlmIChzaG93Q29udHJvbHMpCiAgICAgICAgICAgICAgICBJY29uQnV0dG9uKAogICAgICAgICAgICAgICAgICBvblByZXNzZWQ6IG5leHQsCiAgICAgICAgICAgICAgICAgIGljb246IGNvbnN0IEljb24oSWNvbnMuY2hldnJvbl9yaWdodCksCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICBdLAogICAgICAgICAgKSwKICAgICAgICAgIFNWX1MsCiAgICAgICAgXSwKICAgICAgKSwKICAgICk7CiAgfQp9CgpXaWRnZXQgX2VtcHR5UGF0aFN0YXRlKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgZmluYWwgc3RyaW5nU3RvcnlLZXkgPSBjb250ZXh0LnJlYWQ8U3RyaW5nU3RvcnlTZWxlY3Rpb24+KCkua2V5OwoKICBpZiAoc3RyaW5nU3RvcnlLZXkgPT0gbnVsbCkgewogICAgcmV0dXJuIENvbHVtbigKICAgICAgbWFpbkF4aXNBbGlnbm1lbnQ6IE1haW5BeGlzQWxpZ25tZW50LmNlbnRlciwKICAgICAgY3Jvc3NBeGlzQWxpZ25tZW50OiBDcm9zc0F4aXNBbGlnbm1lbnQuc3RyZXRjaCwKICAgICAgY2hpbGRyZW46IFsKICAgICAgICBQYWRkaW5nKAogICAgICAgICAgcGFkZGluZzogUF9NLAogICAgICAgICAgY2hpbGQ6IEhlbHBUcmFuc2xhdGVDYXJkKAogICAgICAgICAgICB0aXRsZTogc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5ob3d0b1RyYW5zbGF0ZVRpdGxlLAogICAgICAgICAgICBtZXNzYWdlOiBzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLmhvd3RvVHJhbnNsYXRlTWVzc2FnZSwKICAgICAgICAgICksCiAgICAgICAgKSwKICAgICAgXSwKICAgICk7CiAgfQoKICByZXR1cm4gQ2VudGVyKAogICAgY2hpbGQ6IFNoZWV0SW5wdXRIaW50KAogICAgICB0ZXh0OiBzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLm5vU3RvcnlGb3Ioc3RyaW5nU3RvcnlLZXkubmFtZSksCiAgICApLAogICk7Cn0KCmNsYXNzIF9Nb2JpbGVDb250ZW50IGV4dGVuZHMgSG9va1dpZGdldCB7CiAgY29uc3QgX01vYmlsZUNvbnRlbnQoKTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBzaGFyZWQgPSBjb250ZXh0LnJlYWQ8X1NoYXJlZD4oKTsKCiAgICB1c2VFZmZlY3QoKCkgewogICAgICBzaGFyZWQubW9iaWxlVGFiLnZhbHVlID0gX01vYmlsZVRhYnMua2V5czsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9LCBbXSk7CgogICAgcmV0dXJuIFNjYWZmb2xkKAogICAgICBhcHBCYXI6IGNvbnN0IF9BcHBCYXIoKSwKICAgICAgYm9keTogTGF5b3V0QnVpbGRlcigKICAgICAgICBidWlsZGVyOiAoY29udGV4dCwgY29uc3RyYWludHMpIHsKICAgICAgICAgIGZpbmFsIGNlbGxXaWR0aCA9IGNvbnN0cmFpbnRzLm1heFdpZHRoOwogICAgICAgICAgcmV0dXJuIFNpbmdsZUNoaWxkU2Nyb2xsVmlldygKICAgICAgICAgICAgY29udHJvbGxlcjogc2hhcmVkLnNjcm9sbENvbnRyb2xsZXIsCiAgICAgICAgICAgIHBoeXNpY3M6IGNvbnN0IE5ldmVyU2Nyb2xsYWJsZVNjcm9sbFBoeXNpY3MoKSwKICAgICAgICAgICAgc2Nyb2xsRGlyZWN0aW9uOiBBeGlzLmhvcml6b250YWwsCiAgICAgICAgICAgIGNoaWxkOiBSb3coCiAgICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICAgIFNpemVkQm94KAogICAgICAgICAgICAgICAgICB3aWR0aDogY2VsbFdpZHRoLAogICAgICAgICAgICAgICAgICBjaGlsZDogX0tleXNUcmVlKAogICAgICAgICAgICAgICAgICAgIGtleTogc2hhcmVkLmtleXNUcmVlS2V5LAogICAgICAgICAgICAgICAgICAgIHNlYXJjaEZhZGVDb2xvcnM6IFsKICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY29sb3JzLnN1cmZhY2UsCiAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbG9ycy5zdXJmYWNlLndpdGhBbHBoYSgwKSwKICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIFNpemVkQm94KAogICAgICAgICAgICAgICAgICB3aWR0aDogY2VsbFdpZHRoLAogICAgICAgICAgICAgICAgICBjaGlsZDogX0NvbnRlbnQoaXNNb2JpbGU6IHRydWUsIGtleTogc2hhcmVkLmNvbnRlbnRLZXkpLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICBdLAogICAgICAgICAgICApLAogICAgICAgICAgKTsKICAgICAgICB9LAogICAgICApLAogICAgICBmbG9hdGluZ0FjdGlvbkJ1dHRvbjogY29uc3QgX0ZhYigpLAogICAgKTsKICB9Cn0KCmNsYXNzIF9BcHBCYXIgZXh0ZW5kcyBIb29rV2lkZ2V0IGltcGxlbWVudHMgUHJlZmVycmVkU2l6ZVdpZGdldCB7CiAgY29uc3QgX0FwcEJhcigpOwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGZpbmFsIHNoYXJlZCA9IGNvbnRleHQucmVhZDxfU2hhcmVkPigpOwogICAgZmluYWwgaXNEZXZlbG9wZXIgPSBTdHJpbmdTdG9yeVNlcnZpY2UuaW5zdGFuY2UuY29uZmlnLmlzRGV2ZWxvcGVyOwogICAgdXNlTGlzdGVuYWJsZShzaGFyZWQuc3RhdGUpOwogICAgZmluYWwgaXNSZXBvcnRpbmcgPSB1c2VMaXN0ZW5hYmxlKHNoYXJlZC5pc1JlcG9ydGluZykudmFsdWU7CiAgICBmaW5hbCBoYXNUcnlUaGVBcHAgPQogICAgICAgIFN0cmluZ1N0b3J5U2VydmljZS5pbnN0YW5jZS5pbkFwcEVkaXRvckNvbmZpZy5vblRyeVRoZUFwcCAhPSBudWxsOwoKICAgIGZpbmFsIGNhblBvcCA9IE5hdmlnYXRvci5vZihjb250ZXh0KS5jYW5Qb3AoKTsKICAgIHJldHVybiBTdHJpbmdTdG9yeUFwcEJhcigKICAgICAgbGVhZGluZzogUm93KAogICAgICAgIG1haW5BeGlzU2l6ZTogTWFpbkF4aXNTaXplLm1pbiwKICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgaWYgKCFpc1JlcG9ydGluZyAmJiBjYW5Qb3ApIGNvbnN0IFN0cmluZ1N0b3J5QXBwQmFyTGVhZGluZygpLAogICAgICAgICAgaWYgKGlzRGV2ZWxvcGVyICYmICFpc1JlcG9ydGluZykgU0hfWFMsCiAgICAgICAgICBpZiAoaXNEZXZlbG9wZXIpCiAgICAgICAgICAgIEljb25CdXR0b24oCiAgICAgICAgICAgICAgb25QcmVzc2VkOiAoKSB7CiAgICAgICAgICAgICAgICBpZiAoIXNoYXJlZC5pc1JlcG9ydGluZy52YWx1ZSkgewogICAgICAgICAgICAgICAgICBzaGFyZWQucGxheSgpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgc2hhcmVkLnN0b3AoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGljb246IGNvbnN0IEljb24oSWNvbnMuYnVnX3JlcG9ydCksCiAgICAgICAgICAgICksCiAgICAgICAgICBpZiAoaGFzVHJ5VGhlQXBwKQogICAgICAgICAgICBPdXRsaW5lZEJ1dHRvbigKICAgICAgICAgICAgICBvblByZXNzZWQ6CiAgICAgICAgICAgICAgICAgIFN0cmluZ1N0b3J5U2VydmljZS5pbnN0YW5jZS5pbkFwcEVkaXRvckNvbmZpZy5vblRyeVRoZUFwcCwKICAgICAgICAgICAgICBjaGlsZDogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnRyeVRoZUFwcCksCiAgICAgICAgICAgICksCiAgICAgICAgXSwKICAgICAgKSwKICAgICAgcHJvZ3Jlc3NXaWRnZXQ6IGlzUmVwb3J0aW5nCiAgICAgICAgICA/IGNvbnN0IF9JbnNwZWN0b3JQcm9ncmVzc0luZGljYXRvcigpCiAgICAgICAgICA6IGNvbnN0IF9TdHJpbmdzUHJvZ3Jlc3NJbmRpY2F0b3IoKSwKICAgICAgdGl0bGU6IGlzUmVwb3J0aW5nCiAgICAgICAgICA/ICIiCiAgICAgICAgICA6IGNvbnRleHQuc2VsZWN0KChTbGFuZ0VkaXRvckN1Yml0IGMpIHsKICAgICAgICAgICAgICBpZiAoYy5zdGF0ZS5wcm9ncmVzcyA9PSAwLjApIHsKICAgICAgICAgICAgICAgIHJldHVybiAiIjsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKGMuc3RhdGUucHJvZ3Jlc3MgPT0gMS4wKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5hbGxEb25lRXhjbGFtYXRpb247CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnBlcmNlbnRDb21wbGV0ZWQoCiAgICAgICAgICAgICAgICAoYy5zdGF0ZS5wcm9ncmVzcyAqIDEwMCkudG9TdHJpbmdBc0ZpeGVkKDIpLAogICAgICAgICAgICAgICk7CiAgICAgICAgICAgIH0pLAogICAgICB0cmFpbGluZzogaXNSZXBvcnRpbmcKICAgICAgICAgID8gbnVsbAogICAgICAgICAgOiBPdXRsaW5lZEJ1dHRvbigKICAgICAgICAgICAgICBvblByZXNzZWQ6ICgpIHsKICAgICAgICAgICAgICAgIExvY2FsZVN1Ym1pdFNoZWV0LnNob3coCiAgICAgICAgICAgICAgICAgIGNvbnRleHQsCiAgICAgICAgICAgICAgICAgIGVkaXRvckN1Yml0OiBjb250ZXh0LnJlYWQoKSwKICAgICAgICAgICAgICAgICAgYmFzZUN1Yml0OiBjb250ZXh0LnJlYWQoKSwKICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjaGlsZDogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnN1Ym1pdCksCiAgICAgICAgICAgICksCiAgICApOwogIH0KCiAgQG92ZXJyaWRlCiAgU2l6ZSBnZXQgcHJlZmVycmVkU2l6ZSA9PiBjb25zdCBTaXplLmZyb21IZWlnaHQoRGltZW5zaW9uc0RvdWJsZS54eGwpOwp9CgpjbGFzcyBfU3RyaW5nc1Byb2dyZXNzSW5kaWNhdG9yIGV4dGVuZHMgSG9va1dpZGdldCB7CiAgY29uc3QgX1N0cmluZ3NQcm9ncmVzc0luZGljYXRvcigpOwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGZpbmFsIHNsYW5nRWRpdG9yID0gY29udGV4dC53YXRjaDxTbGFuZ0VkaXRvckN1Yml0PigpOwogICAgZmluYWwgZWRpdG9yU3RhdGUgPSBzbGFuZ0VkaXRvci5zdGF0ZTsKICAgIGZpbmFsIGFwcHJvdmVkS2V5cyA9CiAgICAgICAgY29udGV4dC5zZWxlY3QoCiAgICAgICAgICAoU2xhbmdCYXNlQ3ViaXQgYykgPT4gYy5zdGF0ZS5tYXliZU1hcCgKICAgICAgICAgICAgZGF0YTogKGl0KSA9PiBpdC5hcHByb3ZlZEtleXMsCiAgICAgICAgICAgIG9yRWxzZTogKCkgPT4gbnVsbCwKICAgICAgICAgICksCiAgICAgICAgKSA/PwogICAgICAgIDxTdHJpbmc+W107CiAgICBmaW5hbCBzZWxlY3RlZEtleSA9IHVzZU1lbW9pemVkKCgpIHsKICAgICAgZmluYWwgbm9ybWFsaXplZCA9IGVkaXRvclN0YXRlLnNlbGVjdGVkS2V5Py5zcGxpdCgiLiIpLmZpcnN0OwogICAgICByZXR1cm4gU3RyaW5nS2V5LnZhbHVlcy5maXJzdFdoZXJlT3JOdWxsKChpdCkgPT4gaXQua2V5ID09IG5vcm1hbGl6ZWQpOwogICAgfSwgW2VkaXRvclN0YXRlLnNlbGVjdGVkS2V5XSk7CiAgICBmaW5hbCBrZXlTdGF0dXNlcyA9IFN0cmluZ0tleS52YWx1ZXMubWFwKAogICAgICAoa2V5KSA9PiBTdHJpbmdLZXlTdGF0dXMoCiAgICAgICAgaXNBcHByb3ZlZDogYXBwcm92ZWRLZXlzLmNvbnRhaW5zKGtleS5rZXkpLAogICAgICAgIGlzQ2hhbmdlZDogZWRpdG9yU3RhdGUuaGFzS2V5Q2hhbmdlZChrZXkua2V5KSwKICAgICAgICBpc1NlbGVjdGVkOiBzZWxlY3RlZEtleSA9PSBrZXksCiAgICAgICAgaXNTZWFyY2hlZDogZWRpdG9yU3RhdGUuc2VhcmNoUmVzdWx0cy5jb250YWlucyhrZXkua2V5KSwKICAgICAgKSwKICAgICk7CgogICAgcmV0dXJuIF9Qcm9ncmVzc0luZGljYXRvcihrZXlTdGF0dXNlcy5tYXAoKGl0KSA9PiBpdC5hc0NvbG9yKCkpLnRvTGlzdCgpKTsKICB9Cn0KCmNsYXNzIF9JbnNwZWN0b3JQcm9ncmVzc0luZGljYXRvciBleHRlbmRzIEhvb2tXaWRnZXQgewogIGNvbnN0IF9JbnNwZWN0b3JQcm9ncmVzc0luZGljYXRvcigpOwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGZpbmFsIGNvbG9ycyA9IHVzZUxpc3RlbmFibGUoCiAgICAgIGNvbnRleHQucmVhZDxfU2hhcmVkPigpLnJlcG9ydGVyc0luZGljYXRvciwKICAgICkudmFsdWU7CgogICAgcmV0dXJuIF9Qcm9ncmVzc0luZGljYXRvcihjb2xvcnMpOwogIH0KfQoKY2xhc3MgX1Byb2dyZXNzSW5kaWNhdG9yIGV4dGVuZHMgSG9va1dpZGdldCB7CiAgY29uc3QgX1Byb2dyZXNzSW5kaWNhdG9yKHRoaXMuY29sb3JzKTsKCiAgc3RhdGljIGNvbnN0IGhlaWdodCA9IERpbWVuc2lvbnNEb3VibGUuczsKICBmaW5hbCBMaXN0PENvbG9yPiBjb2xvcnM7CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgZmluYWwgZGVmYXVsdENvbG9yID0gY29udGV4dC5jb2xvcnMub25TdXJmYWNlLndpdGhWYWx1ZXMoYWxwaGE6IDAuMik7CiAgICByZXR1cm4gU2l6ZWRCb3goCiAgICAgIGhlaWdodDogaGVpZ2h0LAogICAgICB3aWR0aDogZG91YmxlLmluZmluaXR5LAogICAgICBjaGlsZDogQ2xpcFJSZWN0KAogICAgICAgIGJvcmRlclJhZGl1czogY29uc3QgQm9yZGVyUmFkaXVzLmFsbCgKICAgICAgICAgIFJhZGl1cy5jaXJjdWxhcihEaW1lbnNpb25zRG91YmxlLnMgLyAyKSwKICAgICAgICApLAogICAgICAgIGNoaWxkOiBTdGFjaygKICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgIFBvc2l0aW9uZWQuZmlsbChjaGlsZDogQ29sb3JlZEJveChjb2xvcjogZGVmYXVsdENvbG9yKSksCiAgICAgICAgICAgIFBvc2l0aW9uZWQuZmlsbChjaGlsZDogX0NvbG9yc1Byb2dyZXNzQmFyKGNvbG9yczogY29sb3JzKSksCiAgICAgICAgICBdLAogICAgICAgICksCiAgICAgICksCiAgICApOwogIH0KfQoKY2xhc3MgX0NvbG9yc1Byb2dyZXNzQmFyIGV4dGVuZHMgU3RhdGVsZXNzV2lkZ2V0IHsKICBmaW5hbCBMaXN0PENvbG9yPiBjb2xvcnM7CgogIGNvbnN0IF9Db2xvcnNQcm9ncmVzc0Jhcih7cmVxdWlyZWQgdGhpcy5jb2xvcnN9KTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gQ3VzdG9tUGFpbnQocGFpbnRlcjogX0NvbG9yc1Byb2dyZXNzQmFyUGFpbnRlcihjb2xvcnM6IGNvbG9ycykpOwogIH0KfQoKY2xhc3MgX0NvbG9yc1Byb2dyZXNzQmFyUGFpbnRlciBleHRlbmRzIEN1c3RvbVBhaW50ZXIgewogIGZpbmFsIExpc3Q8Q29sb3I+IGNvbG9yczsKCiAgX0NvbG9yc1Byb2dyZXNzQmFyUGFpbnRlcih7cmVxdWlyZWQgdGhpcy5jb2xvcnN9KTsKCiAgQG92ZXJyaWRlCiAgdm9pZCBwYWludChDYW52YXMgY2FudmFzLCBTaXplIHNpemUpIHsKICAgIGRvdWJsZSBiYXJXaWR0aCA9IHNpemUud2lkdGggLyBjb2xvcnMubGVuZ3RoOwoKICAgIGZvciAoaW50IGkgPSAwOyBpIDwgY29sb3JzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGZpbmFsIHBhaW50ID0gUGFpbnQoKQogICAgICAgIC4uY29sb3IgPSBjb2xvcnNbaV0KICAgICAgICAuLnN0eWxlID0gUGFpbnRpbmdTdHlsZS5maWxsOwoKICAgICAgY2FudmFzLmRyYXdSZWN0KAogICAgICAgIC8vIEFkZCBhIHNtYWxsIG92ZXJsYXAgdG8gZWxpbWluYXRlIHRoZSBsaW5lcwogICAgICAgIFJlY3QuZnJvbUxUV0goaSAqIGJhcldpZHRoLCAwLCBiYXJXaWR0aCAqIDEuMSwgc2l6ZS5oZWlnaHQpLAogICAgICAgIHBhaW50LAogICAgICApOwogICAgfQogIH0KCiAgQG92ZXJyaWRlCiAgYm9vbCBzaG91bGRSZXBhaW50KGNvdmFyaWFudCBDdXN0b21QYWludGVyIG9sZERlbGVnYXRlKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9Cn0KCmNsYXNzIF9TdG9yeVN0YXRlIHsKICBmaW5hbCBTdHJpbmdLZXkgYWN0aXZlS2V5OwogIGZpbmFsIExpc3Q8U3RyaW5nU3Rvcnk+IGF2YWlsYWJsZVN0b3JpZXM7CiAgZmluYWwgaW50IHNlbGVjdGVkU3RvcnlJbmRleDsKICBmaW5hbCBpbnQgcmVmcmVzaENvdW50ZXI7CgogIF9TdG9yeVN0YXRlKHsKICAgIHJlcXVpcmVkIHRoaXMuYWN0aXZlS2V5LAogICAgcmVxdWlyZWQgdGhpcy5hdmFpbGFibGVTdG9yaWVzLAogICAgcmVxdWlyZWQgdGhpcy5zZWxlY3RlZFN0b3J5SW5kZXgsCiAgICByZXF1aXJlZCB0aGlzLnJlZnJlc2hDb3VudGVyLAogIH0pOwoKICBib29sIGdldCBzaG93Q29udHJvbHMgPT4gYXZhaWxhYmxlU3Rvcmllcy5sZW5ndGggPiAxOwogIFN0cmluZ1N0b3J5PyBnZXQgZWZmZWN0aXZlU3RyaW5nU3RvcnkgPT4KICAgICAgYXZhaWxhYmxlU3Rvcmllcy5pc0VtcHR5ID8gbnVsbCA6IGF2YWlsYWJsZVN0b3JpZXNbc2VsZWN0ZWRTdG9yeUluZGV4XTsKICBTdHJpbmcgZ2V0IGVmZmVjdGl2ZVRpdGxlID0+IGVmZmVjdGl2ZVN0cmluZ1N0b3J5Py50aXRsZSA/PyAiIjsKCiAgX1N0b3J5U3RhdGUgbmV4dCgpIHsKICAgIGlmIChzZWxlY3RlZFN0b3J5SW5kZXggPCBhdmFpbGFibGVTdG9yaWVzLmxlbmd0aCAtIDEpIHsKICAgICAgcmV0dXJuIGNvcHlXaXRoKHNlbGVjdGVkU3RvcnlJbmRleDogc2VsZWN0ZWRTdG9yeUluZGV4ICsgMSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gY29weVdpdGgoc2VsZWN0ZWRTdG9yeUluZGV4OiAwKTsKICAgIH0KICB9CgogIF9TdG9yeVN0YXRlIHByZXYoKSB7CiAgICBpZiAoc2VsZWN0ZWRTdG9yeUluZGV4ID4gMCkgewogICAgICByZXR1cm4gY29weVdpdGgoc2VsZWN0ZWRTdG9yeUluZGV4OiBzZWxlY3RlZFN0b3J5SW5kZXggLSAxKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBjb3B5V2l0aChzZWxlY3RlZFN0b3J5SW5kZXg6IGF2YWlsYWJsZVN0b3JpZXMubGVuZ3RoIC0gMSk7CiAgICB9CiAgfQoKICBfU3RvcnlTdGF0ZSByZWZyZXNoKCkgewogICAgcmV0dXJuIGNvcHlXaXRoKHJlZnJlc2hDb3VudGVyOiByZWZyZXNoQ291bnRlciArIDEpOwogIH0KCiAgX1N0b3J5U3RhdGUgY29weVdpdGgoewogICAgU3RyaW5nS2V5PyBhY3RpdmVLZXksCiAgICBMaXN0PFN0cmluZ1N0b3J5Pj8gYXZhaWxhYmxlU3RvcmllcywKICAgIGludD8gc2VsZWN0ZWRTdG9yeUluZGV4LAogICAgaW50PyByZWZyZXNoQ291bnRlciwKICB9KSA9PiBfU3RvcnlTdGF0ZSgKICAgIGFjdGl2ZUtleTogYWN0aXZlS2V5ID8/IHRoaXMuYWN0aXZlS2V5LAogICAgYXZhaWxhYmxlU3RvcmllczogYXZhaWxhYmxlU3RvcmllcyA/PyB0aGlzLmF2YWlsYWJsZVN0b3JpZXMsCiAgICBzZWxlY3RlZFN0b3J5SW5kZXg6IHNlbGVjdGVkU3RvcnlJbmRleCA/PyB0aGlzLnNlbGVjdGVkU3RvcnlJbmRleCwKICAgIHJlZnJlc2hDb3VudGVyOiByZWZyZXNoQ291bnRlciA/PyB0aGlzLnJlZnJlc2hDb3VudGVyLAogICk7Cn0KCmNsYXNzIF9TaGFyZWQgewogIF9TaGFyZWQodGhpcy5lZGl0b3IpOwogIGZpbmFsIGtleXNUcmVlS2V5ID0gR2xvYmFsS2V5KCk7CiAgZmluYWwgY29udGVudEtleSA9IEdsb2JhbEtleSgpOwogIGZpbmFsIGxvY2FsZUVkaXRvcktleSA9IEdsb2JhbEtleSgpOwogIGZpbmFsIHN0YXRlID0gVmFsdWVOb3RpZmllcjxfU3RvcnlTdGF0ZT8+KG51bGwpOwoKICBmaW5hbCBzdHJpbmdTdG9yaWVzTWVtb2l6ZWQgPSBzdHJpbmdTdG9yaWVzKCk7CgogIGZpbmFsIHNjcm9sbENvbnRyb2xsZXIgPSBTY3JvbGxDb250cm9sbGVyKCk7CiAgZmluYWwgbW9iaWxlVGFiID0gVmFsdWVOb3RpZmllcihfTW9iaWxlVGFicy5rZXlzKTsKICBmaW5hbCByZXBvcnRlcnNJbmRpY2F0b3IgPSBWYWx1ZU5vdGlmaWVyPExpc3Q8Q29sb3I+PihbXSk7CgogIGZpbmFsIF9yZXBvcnRlcnMgPSA8U3RyaW5nU3RvcnksIF9TdG9yeVJlcG9ydGVyPnt9OwogIGZpbmFsIGlzUmVwb3J0aW5nID0gVmFsdWVOb3RpZmllcihmYWxzZSk7CiAgZmluYWwgU2xhbmdFZGl0b3JDdWJpdCBlZGl0b3I7CgogIHZvaWQgcmVmcmVzaCgpIHsKICAgIHN0YXRlLnZhbHVlID0gc3RhdGUudmFsdWU/LnJlZnJlc2goKTsKICB9CgogIHZvaWQgY3VycmVudFJlcG9ydCgpIHsKICAgIGZpbmFsIHJlcG9ydGVyID0gX3JlcG9ydGVyc1tzdGF0ZS52YWx1ZT8uZWZmZWN0aXZlU3RyaW5nU3RvcnldOwogICAgaWYgKHJlcG9ydGVyID09IG51bGwpIHsKICAgICAgX2xvZy5lKCJjdXJyZW50UmVwb3J0KCkgOiBDb3VsZCBub3QgZmluZCBhIHJlcG9ydGVyIik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHJlcG9ydGVyLmxvZ1JlcG9ydCgpOwogIH0KCiAgX1N0b3J5U3RhdGUgY3JlYXRlKFN0cmluZ0tleSBrZXkpIHsKICAgIGZpbmFsIGF2YWlsYWJsZVN0b3JpZXMgPSBzdHJpbmdTdG9yaWVzTWVtb2l6ZWQKICAgICAgICAud2hlcmUoKGl0KSA9PiBpdC5rZXlzLmNvbnRhaW5zKGtleSkpCiAgICAgICAgLnRvTGlzdCgpOwoKICAgIHJldHVybiBfU3RvcnlTdGF0ZSgKICAgICAgYWN0aXZlS2V5OiBrZXksCiAgICAgIGF2YWlsYWJsZVN0b3JpZXM6IGF2YWlsYWJsZVN0b3JpZXMsCiAgICAgIHNlbGVjdGVkU3RvcnlJbmRleDogMCwKICAgICAgcmVmcmVzaENvdW50ZXI6IDAsCiAgICApOwogIH0KCiAgdm9pZCBzZXRBY3RpdmVTdG9yeSh7U3RyaW5nS2V5PyBrZXl9KSB7CiAgICBpZiAoa2V5ID09IG51bGwpIHsKICAgICAgc3RhdGUudmFsdWUgPSBudWxsOwogICAgICByZXR1cm47CiAgICB9CgogICAgc3RhdGUudmFsdWUgPSBjcmVhdGUoa2V5KTsKICB9CgogIFRyYW5zbGF0aW9uU2NvcGVLZXlzPyBnZXRTY29wZUtleXNCeVN0cmluZ1N0b3J5KFN0cmluZ1N0b3J5PyBzdG9yeSkgewogICAgaWYgKHN0b3J5ID09IG51bGwpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgdmFyIHJlcG9ydGVyID0gX3JlcG9ydGVyc1tzdG9yeV07CiAgICBpZiAocmVwb3J0ZXIgPT0gbnVsbCkgewogICAgICByZXBvcnRlciA9IF9TdG9yeVJlcG9ydGVyKAogICAgICAgIHRpdGxlOiBzdG9yeS50aXRsZSwKICAgICAgICBleHBlY3RlZDogU2V0LmZyb20oc3Rvcnkua2V5cyksCiAgICAgICk7CiAgICAgIF9yZXBvcnRlcnNbc3RvcnldID0gcmVwb3J0ZXI7CiAgICB9CgogICAgcmV0dXJuIHJlcG9ydGVyLmtleXM7CiAgfQoKICB2b2lkIG1vdmVUb01vYmlsZVRhYihfTW9iaWxlVGFicyB0YWIpIHsKICAgIHN3aXRjaCAodGFiKSB7CiAgICAgIGNhc2UgX01vYmlsZVRhYnMua2V5czoKICAgICAgICBzY3JvbGxDb250cm9sbGVyLmp1bXBUbygwKTsKICAgICAgY2FzZSBfTW9iaWxlVGFicy5wcmV2aWV3OgogICAgICAgIHNjcm9sbENvbnRyb2xsZXIuanVtcFRvKHNjcm9sbENvbnRyb2xsZXIucG9zaXRpb24ubWF4U2Nyb2xsRXh0ZW50KTsKICAgICAgICByZWZyZXNoKCk7CiAgICB9CiAgICBtb2JpbGVUYWIudmFsdWUgPSB0YWI7CiAgfQoKICB2b2lkIF9jb21wdXRlUmVwb3J0ZXJDb2xvcnMoKSB7CiAgICBmaW5hbCBjb2xvcnMgPSBzdHJpbmdTdG9yaWVzTWVtb2l6ZWQubWFwKChpdCkgPT4gX3JlcG9ydGVyc1tpdF0pLm1hcCgoaXQpIHsKICAgICAgaWYgKGl0ID09IG51bGwgfHwgIWl0LmdvdENhbGxlZCkgewogICAgICAgIHJldHVybiBDb2xvcnMudHJhbnNwYXJlbnQ7CiAgICAgIH0KICAgICAgaWYgKGl0Lm1pc3NpbmdLZXlzKCkuaXNOb3RFbXB0eSkgewogICAgICAgIHJldHVybiBDb2xvcnMuYW1iZXJBY2NlbnQ7CiAgICAgIH0KICAgICAgcmV0dXJuIENvbG9ycy5ncmVlbkFjY2VudDsKICAgIH0pLnRvTGlzdCgpOwogICAgcmVwb3J0ZXJzSW5kaWNhdG9yLnZhbHVlID0gY29sb3JzOwogIH0KCiAgdm9pZCBkaXNwb3NlKCkgewogICAgc2Nyb2xsQ29udHJvbGxlci5kaXNwb3NlKCk7CiAgICBpc1JlcG9ydGluZy52YWx1ZSA9IGZhbHNlOwogIH0KCiAgRnV0dXJlPHZvaWQ+IHN0b3AoKSBhc3luYyB7CiAgICBpc1JlcG9ydGluZy52YWx1ZSA9IGZhbHNlOwogIH0KCiAgc3RhdGljIGNvbnN0IGtTdGVwRHVyYXRpb24gPSBEdXJhdGlvbihtaWxsaXNlY29uZHM6IDMwMCk7CgogIEZ1dHVyZTx2b2lkPiBwbGF5KCkgYXN5bmMgewogICAgX2NvbXB1dGVSZXBvcnRlckNvbG9ycygpOwogICAgaXNSZXBvcnRpbmcudmFsdWUgPSB0cnVlOwoKICAgIC8vIGNsZWFyIHN0YWdlCiAgICBzdGF0ZS52YWx1ZSA9IG51bGw7CiAgICBhd2FpdCBGdXR1cmUuZGVsYXllZChrU3RlcER1cmF0aW9uKTsKICAgIF9yZXBvcnRlcnMuZm9yRWFjaCgoXywgaXQpID0+IGl0LmNsZWFyKCkpOwoKICAgIHN3aXRjaFRvKFN0cmluZ1N0b3J5IHN0b3J5LCB7U3RyaW5nS2V5PyBwcmVmZXJyZWRLZXl9KSB7CiAgICAgIGZpbmFsIGVmZmVjdGl2ZUtleSA9IHByZWZlcnJlZEtleSA/PyBzdG9yeS5rZXlzLmZpcnN0OwogICAgICB2YXIgbmV4dFN0YXRlID0gY3JlYXRlKGVmZmVjdGl2ZUtleSk7CiAgICAgIGFzc2VydChzdG9yeS5rZXlzLmNvbnRhaW5zKGVmZmVjdGl2ZUtleSkpOwogICAgICBmaW5hbCBpbmRleCA9IG5leHRTdGF0ZS5hdmFpbGFibGVTdG9yaWVzLmluZGV4T2Yoc3RvcnkpOwogICAgICBpZiAoaW5kZXggIT0gLTEpIHsKICAgICAgICBuZXh0U3RhdGUgPSBuZXh0U3RhdGUuY29weVdpdGgoc2VsZWN0ZWRTdG9yeUluZGV4OiBpbmRleCk7CiAgICAgIH0KICAgICAgc3RhdGUudmFsdWUgPSBuZXh0U3RhdGU7CiAgICB9CgogICAgLy8gaXRlcmF0ZSBvdmVyIGVhY2ggc3RvcnkKICAgIGZvciAoZmluYWwgc3RvcnkgaW4gc3RyaW5nU3Rvcmllc01lbW9pemVkKSB7CiAgICAgIGlmICghaXNSZXBvcnRpbmcudmFsdWUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgc3dpdGNoVG8oc3RvcnkpOwogICAgICBhd2FpdCBGdXR1cmUuZGVsYXllZChrU3RlcER1cmF0aW9uKTsKICAgICAgZmluYWwgcmVwb3J0ZXIgPSBfcmVwb3J0ZXJzW3N0b3J5XTsKICAgICAgaWYgKHJlcG9ydGVyID09IG51bGwpIHsKICAgICAgICBpc1JlcG9ydGluZy52YWx1ZSA9IGZhbHNlOwogICAgICAgIF9sb2cuZSgKICAgICAgICAgICJTb21ldGhpbmcgd2VudCB3cm9uZyAtIGNvdWxkIG5vdCBmaW5kIHJlcG9ydGVyIGZvciAke3N0b3J5LnRpdGxlfSIsCiAgICAgICAgKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGZpbmFsIG1pc3NpbmdLZXlzID0gcmVwb3J0ZXIubWlzc2luZ0tleXMoKTsKICAgICAgZm9yIChmaW5hbCBtaXNzaW5nS2V5IGluIG1pc3NpbmdLZXlzKSB7CiAgICAgICAgaWYgKHJlcG9ydGVyLm1pc3NpbmdLZXlzKCkuaXNFbXB0eSkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGlmICghaXNSZXBvcnRpbmcudmFsdWUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgc3dpdGNoVG8oc3RvcnksIHByZWZlcnJlZEtleTogbWlzc2luZ0tleSk7CiAgICAgICAgYXdhaXQgRnV0dXJlLmRlbGF5ZWQoa1N0ZXBEdXJhdGlvbik7CiAgICAgIH0KICAgICAgX2NvbXB1dGVSZXBvcnRlckNvbG9ycygpOwogICAgICByZXBvcnRlci5sb2dSZXBvcnQoKTsKICAgIH0KCiAgICAvLyBsb2cgc3VtbWFyeQogICAgZmluYWwgdG90YWxTdG9yaWVzID0gc3RyaW5nU3Rvcmllc01lbW9pemVkLmxlbmd0aDsKICAgIGZpbmFsIG9rU3RvcmllcyA9IF9yZXBvcnRlcnMudmFsdWVzCiAgICAgICAgLndoZXJlKChpdCkgPT4gaXQubWlzc2luZ0tleXMoKS5pc0VtcHR5KQogICAgICAgIC5sZW5ndGg7CiAgICBmaW5hbCBzdG9yaWVzV2l0aE1pc3NpbmdLZXlzID0gX3JlcG9ydGVycy52YWx1ZXMud2hlcmUoCiAgICAgIChpdCkgPT4gaXQubWlzc2luZ0tleXMoKS5pc05vdEVtcHR5ICYmIGl0LmdvdENhbGxlZCwKICAgICk7CiAgICBmaW5hbCBzdG9yaWVzTm90Q2FsbGVkID0gX3JlcG9ydGVycy52YWx1ZXMud2hlcmUoCiAgICAgIChpdCkgPT4gaXQuZ290Q2FsbGVkID09IGZhbHNlLAogICAgKTsKCiAgICBmaW5hbCBzYiA9IFN0cmluZ0J1ZmZlcigpCiAgICAgIC4ud3JpdGVsbigpCiAgICAgIC4ud3JpdGVsbigiVG90YWwgU3RvcmllczogJHRvdGFsU3RvcmllcyIpCiAgICAgIC4ud3JpdGVsbigiT0sgU3RvcmllczogJG9rU3RvcmllcyIpOwoKICAgIGlmIChzdG9yaWVzV2l0aE1pc3NpbmdLZXlzLmlzTm90RW1wdHkpIHsKICAgICAgc2Iud3JpdGVsbigiU3RvcmllcyBXaXRoIE1pc3NpbmcgS2V5czogJHtzdG9yaWVzV2l0aE1pc3NpbmdLZXlzLmxlbmd0aH0iKTsKICAgICAgZm9yIChmaW5hbCBzdG9yeSBpbiBzdG9yaWVzV2l0aE1pc3NpbmdLZXlzKSB7CiAgICAgICAgc2Iud3JpdGVsbigiICAtICR7c3RvcnkudGl0bGV9Iik7CiAgICAgIH0KICAgIH0KCiAgICBpZiAoc3Rvcmllc05vdENhbGxlZC5pc05vdEVtcHR5KSB7CiAgICAgIHNiLndyaXRlbG4oIlN0b3JpZXMgTm90IENhbGxlZDogJHtzdG9yaWVzTm90Q2FsbGVkLmxlbmd0aH0iKTsKICAgICAgZm9yIChmaW5hbCBzdG9yeSBpbiBzdG9yaWVzTm90Q2FsbGVkKSB7CiAgICAgICAgc2Iud3JpdGVsbigiICAtICR7c3RvcnkudGl0bGV9Iik7CiAgICAgIH0KICAgIH0KICAgIF9sb2cuaShzYi50b1N0cmluZygpKTsKICB9Cn0KCmVudW0gX01vYmlsZVRhYnMgeyBrZXlzLCBwcmV2aWV3IH0KCmNsYXNzIF9GYWIgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBjb25zdCBfRmFiKCk7CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgZmluYWwgc2hhcmVkID0gY29udGV4dC5yZWFkPF9TaGFyZWQ+KCk7CiAgICB1c2VMaXN0ZW5hYmxlKHNoYXJlZC5tb2JpbGVUYWIpOwogICAgcmV0dXJuIEZsb2F0aW5nQWN0aW9uQnV0dG9uLnNtYWxsKAogICAgICBvblByZXNzZWQ6ICgpIHsKICAgICAgICBmaW5hbCBuZXh0VGFiID0gc3dpdGNoIChzaGFyZWQubW9iaWxlVGFiLnZhbHVlKSB7CiAgICAgICAgICBfTW9iaWxlVGFicy5rZXlzID0+IF9Nb2JpbGVUYWJzLnByZXZpZXcsCiAgICAgICAgICBfTW9iaWxlVGFicy5wcmV2aWV3ID0+IF9Nb2JpbGVUYWJzLmtleXMsCiAgICAgICAgfTsKICAgICAgICBzaGFyZWQubW92ZVRvTW9iaWxlVGFiKG5leHRUYWIpOwogICAgICB9LAogICAgICBjaGlsZDogSWNvbihzd2l0Y2ggKHNoYXJlZC5tb2JpbGVUYWIudmFsdWUpIHsKICAgICAgICBfTW9iaWxlVGFicy5rZXlzID0+IEljb25zLnBob25lX2FuZHJvaWRfb3V0bGluZWQsCiAgICAgICAgX01vYmlsZVRhYnMucHJldmlldyA9PiBJY29ucy5lZGl0LAogICAgICB9KSwKICAgICk7CiAgfQp9CgpmaW5hbCBfbG9nID0gU3RyaW5nU3RvcnlMb2dnZXIoIlN0b3J5UmVwb3J0Iik7CgpjbGFzcyBfU3RvcnlSZXBvcnRlciB7CiAgX1N0b3J5UmVwb3J0ZXIoe3JlcXVpcmVkIHRoaXMudGl0bGUsIHJlcXVpcmVkIHRoaXMuZXhwZWN0ZWR9KTsKICBmaW5hbCBTdHJpbmcgdGl0bGU7CiAgbGF0ZSBmaW5hbCBUcmFuc2xhdGlvblNjb3BlS2V5cyBrZXlzID0gVHJhbnNsYXRpb25TY29wZUtleXMob25BZGQ6IG9uQWRkKTsKICBmaW5hbCBTZXQ8U3RyaW5nS2V5PiBleHBlY3RlZDsKICBmaW5hbCBvY2N1cmVkID0gPFN0cmluZ0tleT57fTsKICB2YXIgZ290Q2FsbGVkID0gZmFsc2U7CgogIHZvaWQgY2xlYXIoKSB7CiAgICBnb3RDYWxsZWQgPSBmYWxzZTsKICAgIG9jY3VyZWQuY2xlYXIoKTsKICB9CgogIFNldDxTdHJpbmdLZXk+IG1pc3NpbmdLZXlzKCkgPT4KICAgICAgU2V0PFN0cmluZ0tleT4uZnJvbShleHBlY3RlZCkuLnJlbW92ZUFsbChvY2N1cmVkKTsKCiAgdm9pZCBvbkFkZChTdHJpbmcgdmFsdWUpIHsKICAgIGZpbmFsIHN0cmluZ0tleSA9IFN0cmluZ0tleUV4dC5mcm9tU3RyaW5nKHZhbHVlKTsKICAgIGlmIChzdHJpbmdLZXkgPT0gbnVsbCkgewogICAgICBfbG9nLmQoIlskdGl0bGVdIGRpZG4ndCBmaW5kIGEgU3RyaW5nS2V5IGVudW0gZm9yICR2YWx1ZSIpOwogICAgICByZXR1cm47CiAgICB9CiAgICBvY2N1cmVkLmFkZChzdHJpbmdLZXkpOwogICAgZ290Q2FsbGVkID0gdHJ1ZTsKICB9CgogIHZvaWQgbG9nUmVwb3J0KCkgewogICAgZmluYWwgcmVwb3J0ID0gdGhpczsKICAgIGZpbmFsIG1pc3NpbmdLZXlzID0gdGhpcy5taXNzaW5nS2V5cygpOwogICAgZmluYWwgb3ZlclJlcG9ydGVkID0gU2V0PFN0cmluZ0tleT4uZnJvbShyZXBvcnQub2NjdXJlZCkKICAgICAgLi5yZW1vdmVBbGwocmVwb3J0LmV4cGVjdGVkKTsKICAgIGZpbmFsIGlzTWlzc2luZ0tleXMgPSBtaXNzaW5nS2V5cy5pc05vdEVtcHR5OwogICAgZmluYWwgaGFzT3ZlclJlcG9ydGVkID0gb3ZlclJlcG9ydGVkLmlzTm90RW1wdHk7CgogICAgZmluYWwgc2IgPSBTdHJpbmdCdWZmZXIoKTsKICAgIHNiLndyaXRlbG4oW3JlcG9ydC50aXRsZV0pOwogICAgc2Iud3JpdGVsbigiICBvY2N1cmVkOiAke29jY3VyZWQubGVuZ3RofSIpOwogICAgc2Iud3JpdGVsbigiICBleHBlY3RlZDogJHtleHBlY3RlZC5sZW5ndGh9Iik7CgogICAgaWYgKGlzTWlzc2luZ0tleXMpIHsKICAgICAgc2Iud3JpdGVsbigiICBtaXNzaW5nOiAke21pc3NpbmdLZXlzLmxlbmd0aH0iKTsKICAgICAgc2Iud3JpdGVsbktleXMobWlzc2luZ0tleXMpOwogICAgfQoKICAgIGlmIChoYXNPdmVyUmVwb3J0ZWQpIHsKICAgICAgc2Iud3JpdGVsbigiICBleHRyYTogJHtvdmVyUmVwb3J0ZWQubGVuZ3RofSIpOwogICAgICBzYi53cml0ZWxuS2V5cyhvdmVyUmVwb3J0ZWQpOwogICAgfQoKICAgIGlmIChpc01pc3NpbmdLZXlzKSB7CiAgICAgIF9sb2cudyhzYi50b1N0cmluZygpLnRyaW0oKSk7CiAgICB9IGVsc2UgewogICAgICBfbG9nLmQoc2IudG9TdHJpbmcoKS50cmltKCkpOwogICAgfQogIH0KfQoKZXh0ZW5zaW9uIF9TdHJpbmdCdWZmZXJFeHQgb24gU3RyaW5nQnVmZmVyIHsKICB3cml0ZWxuS2V5cyhJdGVyYWJsZTxTdHJpbmdLZXk+IGtleXMpIHsKICAgIGZvciAoZmluYWwga2V5IGluIGtleXMpIHsKICAgICAgd3JpdGVsbigiICAgIC0gJHtrZXkua2V5fSIpOwogICAgfQogIH0KfQo=';
  static String get assets_string_story_screen_mustache =>
      _decode(_assets_string_story_screen_mustache);
  static const String _assets_strings_extension_mustache =
      'aW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvd2lkZ2V0cy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnt7cGFja2FnZU5hbWV9fS97e3tpMThufX19L3N0cmluZ3MuZy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnN5bmNocm9uaXplZC9zeW5jaHJvbml6ZWQuZGFydCc7CmltcG9ydCAncGFja2FnZTppbnRsL2RhdGVfc3ltYm9sX2RhdGFfbG9jYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpjb2xsZWN0aW9uL2NvbGxlY3Rpb24uZGFydCc7Cgp0eXBlZGVmIFMgPSBUcmFuc2xhdGlvbnM7CgpleHRlbnNpb24gU3RyaW5nc0V4dGVuc2lvbiBvbiBCdWlsZENvbnRleHQgewogIFMgZ2V0IHN0cmluZ3MgPT4gTG9jYWxpemF0aW9ucy5vZjxUcmFuc2xhdGlvbnM+KHRoaXMsIFRyYW5zbGF0aW9ucykhOwp9CgpjbGFzcyBTbGFuZ0RlbGVnYXRlIGV4dGVuZHMgTG9jYWxpemF0aW9uc0RlbGVnYXRlPFRyYW5zbGF0aW9ucz4gewogIFNsYW5nRGVsZWdhdGUoe3RoaXMub3ZlcnJpZGVUcmFuc2xhdGlvbn0pOwoKICBzdGF0aWMgZmluYWwgZGVsZWdhdGUgPSBTbGFuZ0RlbGVnYXRlKCk7CgogIGZpbmFsIF9sb2FkZWRUcmFuc2xhdGlvbnMgPSA8TG9jYWxlLCBUcmFuc2xhdGlvbnM+e307CiAgZmluYWwgX2xvYWRMb2NrID0gTG9jaygpOwogIHZhciBfaW5pdGlhbGl6ZURhdGVGb3JtYXR0aW5nQ2FsbGVkQXRMZWFzdE9uY2UgPSBmYWxzZTsKICBmaW5hbCBUcmFuc2xhdGlvbnM/IG92ZXJyaWRlVHJhbnNsYXRpb247CgogIEBvdmVycmlkZQogIEZ1dHVyZTxUcmFuc2xhdGlvbnM+IGxvYWQoTG9jYWxlIGxvY2FsZSkgYXN5bmMgewogICAgaWYgKG92ZXJyaWRlVHJhbnNsYXRpb24gIT0gbnVsbCkgewogICAgICByZXR1cm4gb3ZlcnJpZGVUcmFuc2xhdGlvbiE7CiAgICB9CgogICAgaWYgKF9sb2FkZWRUcmFuc2xhdGlvbnNbbG9jYWxlXSBjYXNlIGZpbmFsIFRyYW5zbGF0aW9ucyB2YWx1ZSkgewogICAgICByZXR1cm4gdmFsdWU7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gX2xvYWRMb2NrLnN5bmNocm9uaXplZCgoKSBhc3luYyB7CiAgICAgICAgaWYgKCFfaW5pdGlhbGl6ZURhdGVGb3JtYXR0aW5nQ2FsbGVkQXRMZWFzdE9uY2UpIHsKICAgICAgICAgIGF3YWl0IGluaXRpYWxpemVEYXRlRm9ybWF0dGluZygpOwogICAgICAgICAgX2luaXRpYWxpemVEYXRlRm9ybWF0dGluZ0NhbGxlZEF0TGVhc3RPbmNlID0gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgaWYgKF9sb2FkZWRUcmFuc2xhdGlvbnNbbG9jYWxlXSAhPSBudWxsKSB7CiAgICAgICAgICByZXR1cm4gX2xvYWRlZFRyYW5zbGF0aW9uc1tsb2NhbGVdITsKICAgICAgICB9CgogICAgICAgIGZpbmFsIHRyYW5zbGF0aW9ucyA9IGF3YWl0IGxvY2FsZS5hc0FwcExvY2FsZSgpLmJ1aWxkKCk7CiAgICAgICAgX2xvYWRlZFRyYW5zbGF0aW9uc1tsb2NhbGVdID0gdHJhbnNsYXRpb25zOwogICAgICAgIHJldHVybiB0cmFuc2xhdGlvbnM7CiAgICAgIH0pOwogICAgfQogIH0KCiAgc3RhdGljIFRyYW5zbGF0aW9ucyBsb2FkU3luYyhMb2NhbGUgbG9jYWxlKSB7CiAgICByZXR1cm4gZGVsZWdhdGUuX2xvYWRlZFRyYW5zbGF0aW9uc1tsb2NhbGVdITsKICB9CgogIHN0YXRpYyBmaW5hbCBMaXN0PFN0cmluZz4gX3N1cHBvcnRlZExhbmd1YWdlQ29kZXMgPQogICAgICBBcHBMb2NhbGVVdGlscy5zdXBwb3J0ZWRMb2NhbGVzLm1hcCgoaXQpID0+IGl0Lmxhbmd1YWdlQ29kZSkudG9MaXN0KCk7CgogIEBvdmVycmlkZQogIGJvb2wgaXNTdXBwb3J0ZWQoTG9jYWxlIGxvY2FsZSkgPT4KICAgICAgX3N1cHBvcnRlZExhbmd1YWdlQ29kZXMuY29udGFpbnMobG9jYWxlLmxhbmd1YWdlQ29kZSk7CgogIEBvdmVycmlkZQogIGJvb2wgc2hvdWxkUmVsb2FkKFNsYW5nRGVsZWdhdGUgb2xkKSA9PiBvbGQgIT0gdGhpczsKfQoKZXh0ZW5zaW9uIEFwcExvY2FsZUV4dCBvbiBMb2NhbGUgewogIEFwcExvY2FsZSBhc0FwcExvY2FsZSgpIHsKICAgIGZpbmFsIGxvY2FsZSA9IHRoaXM7CiAgICBmaW5hbCBhcHBMb2NhbGUgPSBBcHBMb2NhbGUudmFsdWVzLmZpcnN0V2hlcmVPck51bGwoKGl0KSA9PgogICAgICAgICAgICBpdC5sYW5ndWFnZUNvZGUgPT0gbG9jYWxlLmxhbmd1YWdlQ29kZSAmJgogICAgICAgICAgICBpdC5jb3VudHJ5Q29kZSA9PSBsb2NhbGUuY291bnRyeUNvZGUgJiYKICAgICAgICAgICAgaXQuc2NyaXB0Q29kZSA9PSBsb2NhbGUuc2NyaXB0Q29kZSkgPz8KICAgICAgICBBcHBMb2NhbGUudmFsdWVzLmZpcnN0V2hlcmVPck51bGwoKGl0KSA9PgogICAgICAgICAgICBpdC5sYW5ndWFnZUNvZGUgPT0gbG9jYWxlLmxhbmd1YWdlQ29kZSAmJgogICAgICAgICAgICBpdC5jb3VudHJ5Q29kZSA9PSBsb2NhbGUuY291bnRyeUNvZGUpID8/CiAgICAgICAgQXBwTG9jYWxlLnZhbHVlcwogICAgICAgICAgICAuZmlyc3RXaGVyZU9yTnVsbCgoaXQpID0+IGl0Lmxhbmd1YWdlQ29kZSA9PSBsb2NhbGUubGFuZ3VhZ2VDb2RlKTsKICAgIGlmIChhcHBMb2NhbGUgPT0gbnVsbCkgewogICAgICB0aHJvdyBTdGF0ZUVycm9yKCJEaWRuJ3QgZmluZCBBcHBMb2NhbGUgZm9yIExvY2FsZSgkbG9jYWxlKSIpOwogICAgfQogICAgcmV0dXJuIGFwcExvY2FsZTsKICB9Cn0K';
  static String get assets_strings_extension_mustache =>
      _decode(_assets_strings_extension_mustache);
  static const String _assets_translation_scope_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyX2hvb2tzL2ZsdXR0ZXJfaG9va3MuZGFydCc7CmltcG9ydCAncGFja2FnZTp7e3BhY2thZ2VOYW1lfX0ve3t7aTE4bn19fS9zdHJpbmdzLmcuZGFydCc7CmltcG9ydCAncGFja2FnZTp7e3BhY2thZ2VOYW1lfX0ve3t7c3RyaW5nU3Rvcnl9fX0vc3RyaW5nX3N0b3J5LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6c2xhbmcvZ2VuZXJhdGVkLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6cHJvdmlkZXIvcHJvdmlkZXIuZGFydCc7CgpjbGFzcyBUcmFuc2xhdGlvblNjb3BlS2V5cyB7CiAgVHJhbnNsYXRpb25TY29wZUtleXMoe3RoaXMub25BZGR9KTsKCiAgZmluYWwgdm9pZCBGdW5jdGlvbihTdHJpbmcpPyBvbkFkZDsKICBmaW5hbCBfcGF0aHMgPSA8U3RyaW5nPnt9OwoKICB2b2lkIGFkZChTdHJpbmcga2V5KSB7CiAgICBfcGF0aHMuYWRkKGtleSk7CiAgICBvbkFkZD8uY2FsbChrZXkpOwogIH0KCiAgU2V0PFN0cmluZz4gZ2V0IHZhbHVlID0+IFNldDxTdHJpbmc+Lm9mKF9wYXRocyk7CgogIHN0YXRpYyBUcmFuc2xhdGlvblNjb3BlS2V5cz8gb2YoQnVpbGRDb250ZXh0IGNvbnRleHQpID0+CiAgICAgIGNvbnRleHQucmVhZDxUcmFuc2xhdGlvblNjb3BlS2V5cz8+KCk7Cn0KCmNsYXNzIFRyYW5zbGF0aW9uU2NvcGUgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBjb25zdCBUcmFuc2xhdGlvblNjb3BlKHsKICAgIHN1cGVyLmtleSwKICAgIHRoaXMuaXNFbmFibGVkID0gdHJ1ZSwKICAgIHJlcXVpcmVkIHRoaXMuY2hpbGQsCiAgICB0aGlzLnNjb3BlS2V5cywKICAgIHRoaXMuZGVidWdMYWJlbCwKICB9KTsKCiAgZmluYWwgYm9vbCBpc0VuYWJsZWQ7CiAgZmluYWwgV2lkZ2V0IGNoaWxkOwogIGZpbmFsIFRyYW5zbGF0aW9uU2NvcGVLZXlzPyBzY29wZUtleXM7CiAgZmluYWwgU3RyaW5nPyBkZWJ1Z0xhYmVsOwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGlmICghaXNFbmFibGVkKSB7CiAgICAgIHJldHVybiBjaGlsZDsKICAgIH0KCiAgICBmaW5hbCB0cmFuc2xhdGlvbnMgPSBjb250ZXh0LnN0cmluZ3M7CiAgICBmaW5hbCBtZXRhID0gdHJhbnNsYXRpb25zLiRtZXRhOwogICAgZmluYWwgZWZmZWN0aXZlU2NvcGVLZXlzID0gc2NvcGVLZXlzID8/IFRyYW5zbGF0aW9uU2NvcGVLZXlzKCk7CgogICAgZmluYWwgbWV0YVNweSA9IFNweVRyYW5zbGF0aW9uTWV0YWRhdGEoCiAgICAgIGRlYnVnTGFiZWw6IGRlYnVnTGFiZWwsCiAgICAgIGxvY2FsZTogbWV0YS5sb2NhbGUsCiAgICAgIG92ZXJyaWRlczogbWV0YS5vdmVycmlkZXMsCiAgICAgIGNhcmRpbmFsUmVzb2x2ZXI6IG1ldGEuY2FyZGluYWxSZXNvbHZlciwKICAgICAgb3JkaW5hbFJlc29sdmVyOiBtZXRhLm9yZGluYWxSZXNvbHZlciwKICAgICAgb25QYXRoQWNjZXNzZWQ6IChwYXRoKSB7CiAgICAgICAgZWZmZWN0aXZlU2NvcGVLZXlzLmFkZChwYXRoKTsKICAgICAgfSwKICAgICk7CgogICAgcmV0dXJuIExvY2FsaXphdGlvbnMub3ZlcnJpZGUoCiAgICAgIGNvbnRleHQ6IGNvbnRleHQsCiAgICAgIGRlbGVnYXRlczogWwogICAgICAgIFNsYW5nRGVsZWdhdGUoCiAgICAgICAgICBvdmVycmlkZVRyYW5zbGF0aW9uOiB0cmFuc2xhdGlvbnMuJGNvcHlXaXRoKG1ldGE6IG1ldGFTcHkpLAogICAgICAgICkKICAgICAgXSwKICAgICAgY2hpbGQ6IFByb3ZpZGVyLnZhbHVlKAogICAgICAgIHZhbHVlOiBlZmZlY3RpdmVTY29wZUtleXMsCiAgICAgICAgY2hpbGQ6IGNoaWxkLAogICAgICApLAogICAgKTsKICB9Cn0KCmNsYXNzIFNweVRyYW5zbGF0aW9uTWV0YWRhdGEKICAgIGV4dGVuZHMgVHJhbnNsYXRpb25NZXRhZGF0YTxBcHBMb2NhbGUsIFRyYW5zbGF0aW9ucz4gewogIFNweVRyYW5zbGF0aW9uTWV0YWRhdGEoewogICAgdGhpcy5kZWJ1Z0xhYmVsLAogICAgcmVxdWlyZWQgc3VwZXIubG9jYWxlLAogICAgcmVxdWlyZWQgc3VwZXIub3ZlcnJpZGVzLAogICAgcmVxdWlyZWQgc3VwZXIuY2FyZGluYWxSZXNvbHZlciwKICAgIHJlcXVpcmVkIHN1cGVyLm9yZGluYWxSZXNvbHZlciwKICAgIHJlcXVpcmVkIHRoaXMub25QYXRoQWNjZXNzZWQsCiAgfSk7CgogIGZpbmFsIFN0cmluZz8gZGVidWdMYWJlbDsKICBmaW5hbCB2b2lkIEZ1bmN0aW9uKFN0cmluZykgb25QYXRoQWNjZXNzZWQ7CgogIEBvdmVycmlkZQogIE5vZGU/IGdldE92ZXJyaWRlKFN0cmluZyBwYXRoKSB7CiAgICBvblBhdGhBY2Nlc3NlZChwYXRoKTsKICAgIHJldHVybiBzdXBlci5nZXRPdmVycmlkZShwYXRoKTsKICB9Cn0K';
  static String get assets_translation_scope_mustache =>
      _decode(_assets_translation_scope_mustache);
  static const String _assets_slang_base_state_ext_mustache =
      'aW1wb3J0ICdwYWNrYWdlOnt7cGFja2FnZU5hbWV9fS97e3tpMThufX19L3N0cmluZ3MuZy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnt7cGFja2FnZU5hbWV9fS97e3tzdHJpbmdTdG9yeX19fS9zdHJpbmdfc3RvcnkuZGFydCc7CmltcG9ydCAncGFja2FnZTpzdHJpbmdfc3Rvcnkvc3RyaW5nX3N0b3J5LmRhcnQnCiAgICBzaG93IFNsYW5nQmFzZVN0YXRlLCBTbGFuZ0Jhc2VTdGF0ZUlkbGUsIFNsYW5nQmFzZVN0YXRlRGF0YTsKCmV4dGVuc2lvbiBTbGFuZ0Jhc2VTdGF0ZUV4dCBvbiBTbGFuZ0Jhc2VTdGF0ZSB7CiAgU2xhbmdEZWxlZ2F0ZSBhc1NsYW5nRGVsZWdhdGUoKSB7CiAgICBmaW5hbCBzdGF0ZSA9IHRoaXM7CgogICAgcmV0dXJuIHN3aXRjaCAoc3RhdGUpIHsKICAgICAgU2xhbmdCYXNlU3RhdGVJZGxlKCkgPT4gU2xhbmdEZWxlZ2F0ZS5kZWxlZ2F0ZSwKICAgICAgU2xhbmdCYXNlU3RhdGVEYXRhKCkgPT4gU2xhbmdEZWxlZ2F0ZSgKICAgICAgICAgIG92ZXJyaWRlVHJhbnNsYXRpb246IEFwcExvY2FsZVV0aWxzLmJ1aWxkV2l0aE92ZXJyaWRlc0Zyb21NYXBTeW5jKAogICAgICAgICAgICBsb2NhbGU6IF9mcm9tTGFuZ3VhZ2VDb2RlKHN0YXRlLmxhbmd1YWdlQ29kZSksCiAgICAgICAgICAgIGlzRmxhdE1hcDogZmFsc2UsCiAgICAgICAgICAgIG1hcDogc3RhdGUuc2xhbmdKc29uLAogICAgICAgICAgKSwKICAgICAgICApLAogICAgfTsKICB9Cn0KCkFwcExvY2FsZSBfZnJvbUxhbmd1YWdlQ29kZShTdHJpbmcgY29kZSkgPT4KICAgIEFwcExvY2FsZS52YWx1ZXMuZmlyc3RXaGVyZSgoaXQpID0+IGl0Lmxhbmd1YWdlQ29kZSA9PSBjb2RlKTsK';
  static String get assets_slang_base_state_ext_mustache =>
      _decode(_assets_slang_base_state_ext_mustache);
  static const String _assets_string_story_generated_delegate_impl_mustache =
      'aW1wb3J0ICdkYXJ0OnVpJzsKCmltcG9ydCAncGFja2FnZTp7e3BhY2thZ2VOYW1lfX0ve3t7c3RyaW5nU3Rvcnl9fX0vc3RyaW5nX3N0b3J5LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6c3RyaW5nX3N0b3J5L3N0cmluZ19zdG9yeS5kYXJ0JzsKCmNsYXNzIFN0cmluZ1N0b3J5R2VuZXJhdGVkRGVsZWdhdGVJbXBsIGV4dGVuZHMgU3RyaW5nU3RvcnlHZW5lcmF0ZWREZWxlZ2F0ZSB7CiAgQG92ZXJyaWRlCiAgRnV0dXJlPHZvaWQ+IHByZWxvYWQoTG9jYWxlIGxvY2FsZSkgYXN5bmMgewogICAgYXdhaXQgU2xhbmdEZWxlZ2F0ZS5kZWxlZ2F0ZS5sb2FkKGxvY2FsZSk7CiAgfQoKICBAb3ZlcnJpZGUKICB2b2lkIHZhbGlkYXRlU3RhdGVEYXRhKFNsYW5nQmFzZVN0YXRlRGF0YSBzdGF0ZSkgewogICAgc3RhdGUuYXNTbGFuZ0RlbGVnYXRlKCk7CiAgfQoKICBAb3ZlcnJpZGUKICBMaXN0PFN0cmluZz4gZ2V0IHBlcm1pdHRlZEtleXMgPT4KICAgICAgU3RyaW5nS2V5LnZhbHVlcy5tYXAoKGl0KSA9PiBpdC5rZXkpLnRvTGlzdCgpOwoKICBAb3ZlcnJpZGUKICBpbnQgZ2V0IHZlcnNpb25Db2RlID0+IHt7dmVyc2lvbkNvZGV9fTsKCiAgQG92ZXJyaWRlCiAgU3RyaW5nIGdldCBqc29uQXNzZXRzUGF0aCA9PiAie3t7anNvbkFzc2V0c1BhdGh9fX0iOwoKICBAb3ZlcnJpZGUKICBTdHJpbmcgZ2V0IGJhc2VMb2NhbGUgPT4gInt7YmFzZUxvY2FsZX19IjsKfQo=';
  static String get assets_string_story_generated_delegate_impl_mustache =>
      _decode(_assets_string_story_generated_delegate_impl_mustache);
  static const String _assets_locale_editor_widget_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdwYWNrYWdlOmNvbGxlY3Rpb24vY29sbGVjdGlvbi5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmZsYWcvZmxhZy5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyX2Jsb2MvZmx1dHRlcl9ibG9jLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlcl9ob29rcy9mbHV0dGVyX2hvb2tzLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6e3twYWNrYWdlTmFtZX19L3t7e3N0cmluZ1N0b3J5fX19L3N0cmluZ19zdG9yeS5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnNjcm9sbHZpZXdfb2JzZXJ2ZXIvc2Nyb2xsdmlld19vYnNlcnZlci5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnNsaXZlcl90b29scy9zbGl2ZXJfdG9vbHMuZGFydCc7CmltcG9ydCAncGFja2FnZTpzdHJpbmdfc3Rvcnkvc3RyaW5nX3N0b3J5LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6ZXF1YXRhYmxlL2VxdWF0YWJsZS5kYXJ0JzsKCmNsYXNzIExvY2FsZUVkaXRvcldpZGdldCBleHRlbmRzIEhvb2tXaWRnZXQgewogIGNvbnN0IExvY2FsZUVkaXRvcldpZGdldCh7CiAgICBzdXBlci5rZXksCiAgICByZXF1aXJlZCB0aGlzLnNob3dTY29wZWRWYWx1ZXMsCiAgICByZXF1aXJlZCB0aGlzLmlzU2VhcmNoQXZhaWxhYmxlLAogICAgdGhpcy5zZWFyY2hGYWRlQ29sb3JzLAogICAgcmVxdWlyZWQgdGhpcy5vbkpzb25QYXRoU2VsZWN0ZWQsCiAgfSk7CgogIGZpbmFsIGJvb2wgc2hvd1Njb3BlZFZhbHVlczsKICBmaW5hbCBib29sIGlzU2VhcmNoQXZhaWxhYmxlOwogIGZpbmFsIExpc3Q8Q29sb3I+PyBzZWFyY2hGYWRlQ29sb3JzOwogIGZpbmFsIFZhbHVlQ2hhbmdlZDxTdHJpbmc+IG9uSnNvblBhdGhTZWxlY3RlZDsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBlZGl0b3IgPSBjb250ZXh0LndhdGNoPFNsYW5nRWRpdG9yQ3ViaXQ+KCk7CiAgICBmaW5hbCBhcHByb3ZlZEtleXMgPSBjb250ZXh0LnNlbGVjdCgoU2xhbmdCYXNlQ3ViaXQgYykgPT4gYy5zdGF0ZQogICAgICAgICAgICAubWF5YmVNYXAoZGF0YTogKGl0KSA9PiBpdC5hcHByb3ZlZEtleXMsIG9yRWxzZTogKCkgPT4gbnVsbCkpID8/CiAgICAgICAgPFN0cmluZz5bXTsKICAgIGZpbmFsIGVkaXRvclN0YXRlID0gZWRpdG9yLnN0YXRlOwogICAgZmluYWwgZGlzcGxheUFsbCA9IHVzZVN0YXRlKCFzaG93U2NvcGVkVmFsdWVzKTsKICAgIGZpbmFsIGZvY3VzUHJvdmlkZXIgPSB1c2VNZW1vaXplZCgoKSA9PiBfRm9jdXNQcm92aWRlcigpKTsKICAgIHVzZUVmZmVjdCgoKSB7CiAgICAgIHJldHVybiAoKSB7CiAgICAgICAgZm9jdXNQcm92aWRlci5kaXNwb3NlKCk7CiAgICAgIH07CiAgICB9LCBbZm9jdXNQcm92aWRlcl0pOwoKICAgIGZpbmFsIHNsaXZlckxpc3RDdHggPSB1c2VSZWY8QnVpbGRDb250ZXh0Pz4obnVsbCk7CiAgICBmaW5hbCBzY3JvbGxDb250cm9sbGVyID0gdXNlU2Nyb2xsQ29udHJvbGxlcigpOwogICAgZmluYWwgb2JzZXJ2ZXJDb250cm9sbGVyID0gdXNlTWVtb2l6ZWQoCiAgICAgICAgKCkgPT4gU2xpdmVyT2JzZXJ2ZXJDb250cm9sbGVyKGNvbnRyb2xsZXI6IHNjcm9sbENvbnRyb2xsZXIpLAogICAgICAgIFtzY3JvbGxDb250cm9sbGVyXSk7CgogICAgZmluYWwgc2xhbmdKc29uID0gZWRpdG9yU3RhdGUuZWZmZWN0aXZlU2xhbmdKc29uKGRpc3BsYXlBbGwudmFsdWUpOwogICAgZmluYWwga2V5cyA9IHNsYW5nSnNvbi5zdHJpbmdLZXlzOwoKICAgIGZpbmFsIHNlbGVjdGVkS2V5ID0gdXNlTWVtb2l6ZWQoKCkgewogICAgICBmaW5hbCBub3JtYWxpemVkID0gZWRpdG9yU3RhdGUuc2VsZWN0ZWRLZXk/LnNwbGl0KCIuIikuZmlyc3Q7CiAgICAgIHJldHVybiBTdHJpbmdLZXkudmFsdWVzLmZpcnN0V2hlcmVPck51bGwoKGl0KSA9PiBpdC5rZXkgPT0gbm9ybWFsaXplZCk7CiAgICB9LCBbZWRpdG9yU3RhdGUuc2VsZWN0ZWRLZXldKTsKCiAgICBGdXR1cmU8dm9pZD4gc2Nyb2xsVG8oU3RyaW5nS2V5IHN0cmluZ0tleSkgYXN5bmMgewogICAgICBmaW5hbCBpbmRleCA9IGVkaXRvci5zdGF0ZQogICAgICAgICAgLmVmZmVjdGl2ZVNsYW5nSnNvbihkaXNwbGF5QWxsLnZhbHVlKQogICAgICAgICAgLnN0cmluZ0tleXMKICAgICAgICAgIC5pbmRleE9mKHN0cmluZ0tleSk7CiAgICAgIGlmIChpbmRleCA9PSAtMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgYXdhaXQgb2JzZXJ2ZXJDb250cm9sbGVyLmFuaW1hdGVUbygKICAgICAgICBzbGl2ZXJDb250ZXh0OiBzbGl2ZXJMaXN0Q3R4LnZhbHVlLAogICAgICAgIGluZGV4OiBpbmRleCwKICAgICAgICBkdXJhdGlvbjogRHVyYXRpb25zLm1lZGl1bTEsCiAgICAgICAgY3VydmU6IEN1cnZlcy5lYXNlSW5PdXQsCiAgICAgICAgb2Zmc2V0OiAodGFyZ2V0T2Zmc2V0KSB7CiAgICAgICAgICByZXR1cm4gaXNTZWFyY2hBdmFpbGFibGUKICAgICAgICAgICAgICA/IEZsb2F0aW5nU2VhcmNoQmFyLnByZWZlcnJlZEhlaWdodChjb250ZXh0KQogICAgICAgICAgICAgIDogMDsKICAgICAgICB9LAogICAgICApOwogICAgICBpZiAoZWRpdG9yU3RhdGUuc2VhcmNoUmVzdWx0cy5pc0VtcHR5KSB7CiAgICAgICAgZm9jdXNQcm92aWRlci5yZXF1ZXN0Rm9jdXMoc3RyaW5nS2V5KTsKICAgICAgfQogICAgfQoKICAgIC8vIHNjcm9sbCB0byBrZXkgZWZmZWN0CiAgICB1c2VFZmZlY3QoKCkgewogICAgICBmaW5hbCBrZXkgPSBTdHJpbmdLZXkudmFsdWVzCiAgICAgICAgICAuZmlyc3RXaGVyZU9yTnVsbCgoaXQpID0+IGl0LmtleSA9PSBlZGl0b3JTdGF0ZS5zY3JvbGxUb0tleSk7CiAgICAgIGlmIChrZXkgIT0gbnVsbCkgewogICAgICAgIHNjcm9sbFRvKGtleSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwgW2VkaXRvclN0YXRlLnNjcm9sbFRvS2V5XSk7CgogICAgdm9pZCBtb3ZlKGludCBvZmZzZXQpIHsKICAgICAgZmluYWwgc2sgPSBzZWxlY3RlZEtleTsKICAgICAgaWYgKHNrID09IG51bGwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZmluYWwgaW5kZXggPSBrZXlzLmluZGV4T2Yoc2spOwogICAgICBpZiAoaW5kZXggPT0gLTEpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZmluYWwgbmV4dEluZGV4ID0gKGluZGV4ICsgb2Zmc2V0KSAlIGtleXMubGVuZ3RoOwogICAgICBmaW5hbCBuZXh0S2V5ID0ga2V5c1tuZXh0SW5kZXhdOwogICAgICBmb2N1c1Byb3ZpZGVyLm9idGFpbihuZXh0S2V5LmtleSkucmVxdWVzdEZvY3VzKCk7CiAgICB9CgogICAgdm9pZCBuZXh0KCkgPT4gbW92ZSgxKTsKCiAgICBXaWRnZXQgaXRlbUJ1aWxkZXIoQnVpbGRDb250ZXh0IGNvbnRleHQsIGludCBpbmRleCkgewogICAgICBzbGl2ZXJMaXN0Q3R4LnZhbHVlID0gY29udGV4dDsKICAgICAgZmluYWwga2V5ID0ga2V5c1tpbmRleF07CiAgICAgIGZpbmFsIHZhbHVlID0gc2xhbmdKc29uW2tleS5rZXldOwogICAgICBmaW5hbCBiYXNlVmFsdWUgPSBlZGl0b3JTdGF0ZS5iYXNlVmFsdWUoa2V5LmtleSk7CgogICAgICBmaW5hbCBzdHJpbmdLZXlTdGF0dXMgPSBTdHJpbmdLZXlTdGF0dXMoCiAgICAgICAgaXNBcHByb3ZlZDogYXBwcm92ZWRLZXlzLmNvbnRhaW5zKGtleS5rZXkpLAogICAgICAgIGlzQ2hhbmdlZDogZWRpdG9yU3RhdGUuaGFzS2V5Q2hhbmdlZChrZXkua2V5KSwKICAgICAgICBpc1NlbGVjdGVkOiBzZWxlY3RlZEtleSA9PSBrZXksCiAgICAgICAgaXNTZWFyY2hlZDogZWRpdG9yU3RhdGUuc2VhcmNoUmVzdWx0cy5jb250YWlucyhrZXkua2V5KSwKICAgICAgKTsKCiAgICAgIHJldHVybiBfS2V5V2lkZ2V0KAogICAgICAgIGJhc2VMYW5ndWFnZUZsYWdDb2RlOiBTdHJpbmdTdG9yeVNlcnZpY2UKICAgICAgICAgICAgLmluc3RhbmNlLmdlbmVyYXRlZERlbGVnYXRlLmJhc2VMb2NhbGUKICAgICAgICAgICAgLnRvRmxhZ0NvZGUoKSwKICAgICAgICBzdHJpbmdLZXk6IGtleSwKICAgICAgICBzdHJpbmdLZXlTdGF0dXM6IHN0cmluZ0tleVN0YXR1cywKICAgICAgICB2YWx1ZTogdmFsdWUsCiAgICAgICAgYmFzZVZhbHVlOiBiYXNlVmFsdWUsCiAgICAgICAgaXNNdWx0aWxpbmU6IGJhc2VWYWx1ZSBpcyBTdHJpbmcgJiYgYmFzZVZhbHVlLmNvbnRhaW5zKCJcbiIpLAogICAgICAgIGZvY3VzUHJvdmlkZXI6IGZvY3VzUHJvdmlkZXIsCiAgICAgICAgbmV4dDogbmV4dCwKICAgICAgICBvbkpzb25QYXRoU2VsZWN0ZWQ6IChqc29uUGF0aCkgewogICAgICAgICAgZWRpdG9yLnNlbGVjdEtleShqc29uUGF0aCk7CiAgICAgICAgICBvbkpzb25QYXRoU2VsZWN0ZWQoanNvblBhdGgpOwogICAgICAgIH0sCiAgICAgICAgb25Db21taXRWYWx1ZTogKGpzb25QYXRoLCB2YWx1ZSkgewogICAgICAgICAgZmluYWwgYmFzZUN1Yml0ID0gY29udGV4dC5yZWFkPFNsYW5nQmFzZUN1Yml0PigpOwogICAgICAgICAgaWYgKCFqc29uUGF0aC5jb250YWlucygiLiIpKSB7CiAgICAgICAgICAgIGJhc2VDdWJpdC5hcHBseUNoYW5nZSh7anNvblBhdGg6IHZhbHVlfSk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhcHByb3ZlOiAoKSB7CiAgICAgICAgICBmaW5hbCBiYXNlQ3ViaXQgPSBjb250ZXh0LnJlYWQ8U2xhbmdCYXNlQ3ViaXQ+KCk7CiAgICAgICAgICBpZiAoc3RyaW5nS2V5U3RhdHVzLmlzQXBwcm92ZWQpIHsKICAgICAgICAgICAgYmFzZUN1Yml0LnVuYXBwcm92ZUtleShrZXkua2V5KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJhc2VDdWJpdC5hcHByb3ZlS2V5KGtleS5rZXkpOwogICAgICAgICAgICBuZXh0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICByZXNldDogKCkgewogICAgICAgICAgaWYgKHN0cmluZ0tleVN0YXR1cy5pc0FwcHJvdmVkKSB7CiAgICAgICAgICAgIGZpbmFsIGJhc2VDdWJpdCA9IGNvbnRleHQucmVhZDxTbGFuZ0Jhc2VDdWJpdD4oKTsKICAgICAgICAgICAgYmFzZUN1Yml0LnVuYXBwcm92ZUtleShrZXkua2V5KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVkaXRvci5yZXNldEtleShrZXkua2V5KTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICApOwogICAgfQoKICAgIHJldHVybiBGb2N1c1RyYXZlcnNhbEdyb3VwKAogICAgICBjaGlsZDogU2xpdmVyVmlld09ic2VydmVyKAogICAgICAgIGNvbnRyb2xsZXI6IG9ic2VydmVyQ29udHJvbGxlciwKICAgICAgICBjaGlsZDogQ3VzdG9tU2Nyb2xsVmlldygKICAgICAgICAgIGNvbnRyb2xsZXI6IHNjcm9sbENvbnRyb2xsZXIsCiAgICAgICAgICBzbGl2ZXJzOiBbCiAgICAgICAgICAgIGlmIChpc1NlYXJjaEF2YWlsYWJsZSkKICAgICAgICAgICAgICBTbGl2ZXJQaW5uZWRIZWFkZXIoCiAgICAgICAgICAgICAgICBjaGlsZDogX0tleVNlYXJjaEJhcigKICAgICAgICAgICAgICAgICAgc2VhcmNoRmFkZUNvbG9yczogc2VhcmNoRmFkZUNvbG9ycywKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgU2xpdmVyTGlzdC5idWlsZGVyKAogICAgICAgICAgICAgIGl0ZW1CdWlsZGVyOiBpdGVtQnVpbGRlciwKICAgICAgICAgICAgICBpdGVtQ291bnQ6IGtleXMubGVuZ3RoLAogICAgICAgICAgICApCiAgICAgICAgICBdLAogICAgICAgICksCiAgICAgICksCiAgICApOwogIH0KfQoKY2xhc3MgU3RyaW5nS2V5U3RhdHVzIGV4dGVuZHMgRXF1YXRhYmxlIHsKICBjb25zdCBTdHJpbmdLZXlTdGF0dXMoewogICAgcmVxdWlyZWQgdGhpcy5pc0FwcHJvdmVkLAogICAgcmVxdWlyZWQgdGhpcy5pc0NoYW5nZWQsCiAgICByZXF1aXJlZCB0aGlzLmlzU2VsZWN0ZWQsCiAgICByZXF1aXJlZCB0aGlzLmlzU2VhcmNoZWQsCiAgfSk7CgogIGZpbmFsIGJvb2wgaXNBcHByb3ZlZDsKICBmaW5hbCBib29sIGlzQ2hhbmdlZDsKICBmaW5hbCBib29sIGlzU2VsZWN0ZWQ7CiAgZmluYWwgYm9vbCBpc1NlYXJjaGVkOwoKICBAb3ZlcnJpZGUKICBMaXN0PE9iamVjdD8+IGdldCBwcm9wcyA9PiBbCiAgICAgICAgaXNBcHByb3ZlZCwKICAgICAgICBpc0NoYW5nZWQsCiAgICAgICAgaXNTZWxlY3RlZCwKICAgICAgICBpc1NlYXJjaGVkLAogICAgICBdOwp9CgpleHRlbnNpb24gU3RyaW5nS2V5U3RhdHVzRXh0ZW5zaW9uIG9uIFN0cmluZ0tleVN0YXR1cyB7CiAgQ29sb3IgYXNDb2xvcigpIHsKICAgIGlmIChpc1NlYXJjaGVkKSB7CiAgICAgIHJldHVybiBDb2xvcnMuYmx1ZUFjY2VudDsKICAgIH0gZWxzZSBpZiAoaXNDaGFuZ2VkKSB7CiAgICAgIHJldHVybiBDb2xvcnMuYW1iZXJBY2NlbnQ7CiAgICB9IGVsc2UgaWYgKGlzQXBwcm92ZWQpIHsKICAgICAgcmV0dXJuIENvbG9ycy5saWdodEdyZWVuQWNjZW50OwogICAgfSBlbHNlIGlmIChpc1NlbGVjdGVkKSB7CiAgICAgIHJldHVybiBDb2xvcnMuYmx1ZUdyZXkud2l0aFZhbHVlcyhhbHBoYTogMC4yKTsKICAgIH0KICAgIHJldHVybiBDb2xvcnMudHJhbnNwYXJlbnQ7CiAgfQp9CgphYnN0cmFjdCBjbGFzcyBfS2V5V2lkZ2V0QmFzZUNvbnRyb2xsZXIgewogIGZpbmFsIFN0cmluZ0tleSBrZXk7CgogIF9LZXlXaWRnZXRCYXNlQ29udHJvbGxlcih7cmVxdWlyZWQgdGhpcy5rZXl9KTsKCiAgT2JqZWN0PyBnZXRDb21taXRWYWx1ZSgpOwp9CgpjbGFzcyBfS2V5V2lkZ2V0U3RyaW5nQ29udHJvbGxlciBleHRlbmRzIF9LZXlXaWRnZXRCYXNlQ29udHJvbGxlciB7CiAgX0tleVdpZGdldFN0cmluZ0NvbnRyb2xsZXIoe3JlcXVpcmVkIHN1cGVyLmtleX0pOwoKICBUZXh0RWRpdGluZ0NvbnRyb2xsZXI/IF9jb250cm9sbGVyOwoKICB2b2lkIGF0dGFjaChUZXh0RWRpdGluZ0NvbnRyb2xsZXIgY29udHJvbGxlcikgewogICAgLy8gaWdub3JlOiB1bm5lY2Vzc2FyeV90aGlzCiAgICB0aGlzLl9jb250cm9sbGVyID0gY29udHJvbGxlcjsKICB9CgogIHZvaWQgZGV0YWNoKCkgewogICAgLy8gaWdub3JlOiB1bm5lY2Vzc2FyeV90aGlzCiAgICB0aGlzLl9jb250cm9sbGVyID0gbnVsbDsKICB9CgogIEBvdmVycmlkZQogIE9iamVjdD8gZ2V0Q29tbWl0VmFsdWUoKSB7CiAgICByZXR1cm4gX2NvbnRyb2xsZXI/LnRleHQ7CiAgfQp9CgpjbGFzcyBfS2V5V2lkZ2V0TWFwQ29udHJvbGxlciBleHRlbmRzIF9LZXlXaWRnZXRCYXNlQ29udHJvbGxlciB7CiAgX0tleVdpZGdldE1hcENvbnRyb2xsZXIoe3JlcXVpcmVkIHN1cGVyLmtleX0pOwoKICBmaW5hbCBjb250cm9sbGVycyA9IDxTdHJpbmcsIF9LZXlXaWRnZXRTdHJpbmdDb250cm9sbGVyPnt9OwoKICBfS2V5V2lkZ2V0U3RyaW5nQ29udHJvbGxlciBnZXRDb250cm9sbGVyRm9yS2V5KFN0cmluZyBzdWJLZXkpID0+IGNvbnRyb2xsZXJzCiAgICAgIC5wdXRJZkFic2VudChzdWJLZXksICgpID0+IF9LZXlXaWRnZXRTdHJpbmdDb250cm9sbGVyKGtleToga2V5KSk7CgogIHZvaWQgZGV0YWNoKCkgewogICAgY29udHJvbGxlcnMuY2xlYXIoKTsKICB9CgogIEBvdmVycmlkZQogIE9iamVjdD8gZ2V0Q29tbWl0VmFsdWUoKSB7CiAgICBmaW5hbCBrZXlzID0gTGlzdDxTdHJpbmc+LmZyb20oY29udHJvbGxlcnMua2V5cykuLnNvcnQoKTsKICAgIGlmIChrZXlzLmlzRW1wdHkpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgZm9yIChmaW5hbCBrZXkgaW4ga2V5cykga2V5OiBjb250cm9sbGVyc1trZXldIS5fY29udHJvbGxlciEudGV4dCwKICAgIH07CiAgfQp9CgpjbGFzcyBfS2V5V2lkZ2V0IGV4dGVuZHMgSG9va1dpZGdldCB7CiAgX0tleVdpZGdldCh7CiAgICByZXF1aXJlZCB0aGlzLnN0cmluZ0tleSwKICAgIHJlcXVpcmVkIHRoaXMuc3RyaW5nS2V5U3RhdHVzLAogICAgcmVxdWlyZWQgdGhpcy52YWx1ZSwKICAgIHJlcXVpcmVkIHRoaXMuYmFzZVZhbHVlLAogICAgcmVxdWlyZWQgdGhpcy5vbkpzb25QYXRoU2VsZWN0ZWQsCiAgICByZXF1aXJlZCB0aGlzLmlzTXVsdGlsaW5lLAogICAgcmVxdWlyZWQgdGhpcy5vbkNvbW1pdFZhbHVlLAogICAgcmVxdWlyZWQgdGhpcy5mb2N1c1Byb3ZpZGVyLAogICAgcmVxdWlyZWQgdGhpcy5uZXh0LAogICAgcmVxdWlyZWQgdGhpcy5yZXNldCwKICAgIHJlcXVpcmVkIHRoaXMuYXBwcm92ZSwKICAgIHJlcXVpcmVkIHRoaXMuYmFzZUxhbmd1YWdlRmxhZ0NvZGUsCiAgfSkgOiBzdXBlcihrZXk6IFZhbHVlS2V5KHN0cmluZ0tleSkpOwoKICBmaW5hbCBTdHJpbmdLZXkgc3RyaW5nS2V5OwogIGZpbmFsIFN0cmluZ0tleVN0YXR1cyBzdHJpbmdLZXlTdGF0dXM7CiAgZmluYWwgT2JqZWN0IHZhbHVlOwogIGZpbmFsIE9iamVjdCBiYXNlVmFsdWU7CiAgZmluYWwgYm9vbCBpc011bHRpbGluZTsKCiAgZmluYWwgVmFsdWVDaGFuZ2VkPFN0cmluZz4gb25Kc29uUGF0aFNlbGVjdGVkOwogIGZpbmFsIHZvaWQgRnVuY3Rpb24oU3RyaW5nIGpzb25QYXRoLCBPYmplY3QgdmFsdWUpIG9uQ29tbWl0VmFsdWU7CiAgZmluYWwgX0ZvY3VzUHJvdmlkZXIgZm9jdXNQcm92aWRlcjsKICBmaW5hbCBWb2lkQ2FsbGJhY2sgbmV4dDsKICBmaW5hbCBWb2lkQ2FsbGJhY2sgcmVzZXQ7CiAgZmluYWwgVm9pZENhbGxiYWNrIGFwcHJvdmU7CiAgZmluYWwgRmxhZ3NDb2RlIGJhc2VMYW5ndWFnZUZsYWdDb2RlOwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGZpbmFsIHZhbHVlID0gdGhpcy52YWx1ZTsKICAgIGZpbmFsIGJhY2tncm91bmRDb2xvciA9IHN0cmluZ0tleVN0YXR1cy5hc0NvbG9yKCk7CgogICAgZmluYWwgY29udHJvbGxlciA9IHVzZU1lbW9pemVkKCgpIHsKICAgICAgaWYgKHZhbHVlIGlzIFN0cmluZykgewogICAgICAgIHJldHVybiBfS2V5V2lkZ2V0U3RyaW5nQ29udHJvbGxlcihrZXk6IHN0cmluZ0tleSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIF9LZXlXaWRnZXRNYXBDb250cm9sbGVyKGtleTogc3RyaW5nS2V5KTsKICAgICAgfQogICAgfSwgW3N0cmluZ0tleV0pOwoKICAgIHZvaWQgd3JhcHBlZEFwcHJvdmUoKSB7CiAgICAgIGZpbmFsIHZhbHVlID0gY29udHJvbGxlci5nZXRDb21taXRWYWx1ZSgpOwogICAgICBpZiAodmFsdWUgIT0gbnVsbCkgewogICAgICAgIG9uQ29tbWl0VmFsdWUoc3RyaW5nS2V5LmtleSwgdmFsdWUpOwogICAgICB9CiAgICAgIGFwcHJvdmUoKTsKICAgIH0KCiAgICByZXR1cm4gU3RhY2soCiAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgQ29sdW1uKAogICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgU1ZfUywKICAgICAgICAgICAgRXhwYW5kYWJsZVdpZGdldCgKICAgICAgICAgICAgICBleHBhbmQ6IHN0cmluZ0tleVN0YXR1cy5pc1NlbGVjdGVkLAogICAgICAgICAgICAgIGNoaWxkOiBDb2x1bW4oCiAgICAgICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgICAgICBfVHJhbnNsYXRpb25CdWJibGUoCiAgICAgICAgICAgICAgICAgICAgdGV4dDogYmFzZVZhbHVlLnRvU3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgc2hvd0ZsYWc6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgYmFzZUxhbmd1YWdlRmxhZ0NvZGU6IGJhc2VMYW5ndWFnZUZsYWdDb2RlLAogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICBTVl9YUywKICAgICAgICAgICAgICAgICAgSWdub3JlRm9jdXMoCiAgICAgICAgICAgICAgICAgICAgY2hpbGQ6IFJvdygKICAgICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgICAgICAgICAgIFNIX00sCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFNwYWNlcigpLAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RyaW5nS2V5U3RhdHVzLmlzQ2hhbmdlZCB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nS2V5U3RhdHVzLmlzQXBwcm92ZWQpCiAgICAgICAgICAgICAgICAgICAgICAgICAgVGV4dEJ1dHRvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUHJlc3NlZDogcmVzZXQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZDogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnJlc2V0KSwKICAgICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXN0cmluZ0tleVN0YXR1cy5pc0FwcHJvdmVkICYmCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAhc3RyaW5nS2V5U3RhdHVzLmlzQ2hhbmdlZCkKICAgICAgICAgICAgICAgICAgICAgICAgICBUZXh0QnV0dG9uKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb25QcmVzc2VkOiB3cmFwcGVkQXBwcm92ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoaWxkOiBUZXh0KHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MuYXBwcm92ZSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgU0hfTQogICAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICBTVl9TTSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgKSwKICAgICAgICAgICAgaWYgKHZhbHVlIGlzIFN0cmluZykKICAgICAgICAgICAgICBQYWRkaW5nKAogICAgICAgICAgICAgICAgcGFkZGluZzogUEhfTSwKICAgICAgICAgICAgICAgIGNoaWxkOiBfU3RyaW5nS2V5V2lkZ2V0KAogICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiBjb250cm9sbGVyIGFzIF9LZXlXaWRnZXRTdHJpbmdDb250cm9sbGVyLAogICAgICAgICAgICAgICAgICBqc29uUGF0aDogc3RyaW5nS2V5LmtleSwKICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgICAgICAgICAgICBvbkpzb25QYXRoU2VsZWN0ZWQ6IG9uSnNvblBhdGhTZWxlY3RlZCwKICAgICAgICAgICAgICAgICAgaXNNdWx0aWxpbmU6IGlzTXVsdGlsaW5lLAogICAgICAgICAgICAgICAgICBmb2N1c1Byb3ZpZGVyOiBmb2N1c1Byb3ZpZGVyLAogICAgICAgICAgICAgICAgICBvbkNvbW1pdFZhbHVlOiAodmFsdWUpID0+IG9uQ29tbWl0VmFsdWUoCiAgICAgICAgICAgICAgICAgICAgc3RyaW5nS2V5LmtleSwKICAgICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgb25TdWJtaXQ6IG5leHQsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICksCiAgICAgICAgICAgIGlmICh2YWx1ZSBpcyBNYXA8U3RyaW5nLCBkeW5hbWljPikKICAgICAgICAgICAgICBfTWFwS2V5V2lkZ2V0KAogICAgICAgICAgICAgICAgY29udHJvbGxlcjogY29udHJvbGxlciBhcyBfS2V5V2lkZ2V0TWFwQ29udHJvbGxlciwKICAgICAgICAgICAgICAgIGpzb25QYXRoOiBzdHJpbmdLZXkua2V5LAogICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLAogICAgICAgICAgICAgICAgb25Kc29uUGF0aFNlbGVjdGVkOiBvbkpzb25QYXRoU2VsZWN0ZWQsCiAgICAgICAgICAgICAgICBmb2N1c1Byb3ZpZGVyOiBmb2N1c1Byb3ZpZGVyLAogICAgICAgICAgICAgICAgb25Db21taXRWYWx1ZTogKHZhbHVlKSA9PiBvbkNvbW1pdFZhbHVlKAogICAgICAgICAgICAgICAgICBzdHJpbmdLZXkua2V5LAogICAgICAgICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgU1ZfUywKICAgICAgICAgIF0sCiAgICAgICAgKSwKICAgICAgICBQb3NpdGlvbmVkKAogICAgICAgICAgdG9wOiAwLAogICAgICAgICAgYm90dG9tOiAwLAogICAgICAgICAgbGVmdDogMCwKICAgICAgICAgIGNoaWxkOiBTaXplZEJveCgKICAgICAgICAgICAgd2lkdGg6IERpbWVuc2lvbnNEb3VibGUucywKICAgICAgICAgICAgY2hpbGQ6IENvbG9yZWRCb3goCiAgICAgICAgICAgICAgY29sb3I6IGJhY2tncm91bmRDb2xvciwKICAgICAgICAgICAgKSwKICAgICAgICAgICksCiAgICAgICAgKQogICAgICBdLAogICAgKTsKICB9Cn0KCmNsYXNzIF9NYXBLZXlXaWRnZXQgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBfTWFwS2V5V2lkZ2V0KHsKICAgIHJlcXVpcmVkIHRoaXMuanNvblBhdGgsCiAgICByZXF1aXJlZCB0aGlzLnZhbHVlLAogICAgcmVxdWlyZWQgdGhpcy5vbkpzb25QYXRoU2VsZWN0ZWQsCiAgICByZXF1aXJlZCB0aGlzLmZvY3VzUHJvdmlkZXIsCiAgICByZXF1aXJlZCB0aGlzLm9uQ29tbWl0VmFsdWUsCiAgICByZXF1aXJlZCB0aGlzLmNvbnRyb2xsZXIsCiAgfSkgOiBzdXBlcihrZXk6IFZhbHVlS2V5KGpzb25QYXRoKSk7CgogIGZpbmFsIFN0cmluZyBqc29uUGF0aDsKICBmaW5hbCBNYXA8U3RyaW5nLCBkeW5hbWljPiB2YWx1ZTsKICBmaW5hbCBWYWx1ZUNoYW5nZWQ8U3RyaW5nPiBvbkpzb25QYXRoU2VsZWN0ZWQ7CiAgZmluYWwgX0ZvY3VzUHJvdmlkZXIgZm9jdXNQcm92aWRlcjsKICBmaW5hbCBWYWx1ZUNoYW5nZWQ8TWFwPFN0cmluZywgZHluYW1pYz4+IG9uQ29tbWl0VmFsdWU7CiAgZmluYWwgX0tleVdpZGdldE1hcENvbnRyb2xsZXIgY29udHJvbGxlcjsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBrZXlzID0gdXNlTWVtb2l6ZWQoKCkgPT4gTGlzdDxTdHJpbmc+LmZyb20odmFsdWUua2V5cykuLnNvcnQoKSwgW10pOwoKICAgIHVzZUVmZmVjdCgoKSB7CiAgICAgIC8vIG5vIGF0dGFjaGluZyBmdW5jdGlvbiBoZXJlLCBidXQgd2Ugc2hvdWxkIHN0aWxsIGRldGFjaAogICAgICByZXR1cm4gKCkgewogICAgICAgIGNvbnRyb2xsZXIuZGV0YWNoKCk7CiAgICAgIH07CiAgICB9KTsKCiAgICByZXR1cm4gUGFkZGluZygKICAgICAgcGFkZGluZzogUF9NLAogICAgICBjaGlsZDogSW5wdXREZWNvcmF0b3IoCiAgICAgICAgZGVjb3JhdGlvbjogSW5wdXREZWNvcmF0aW9uKAogICAgICAgICAgYm9yZGVyOiBjb25zdCBPdXRsaW5lSW5wdXRCb3JkZXIoKSwKICAgICAgICAgIGxhYmVsVGV4dDoganNvblBhdGguc3BsaXQoIi4iKS5sYXN0LAogICAgICAgICksCiAgICAgICAgY2hpbGQ6IENvbHVtbigKICAgICAgICAgIG1haW5BeGlzU2l6ZTogTWFpbkF4aXNTaXplLm1pbiwKICAgICAgICAgIGNyb3NzQXhpc0FsaWdubWVudDogQ3Jvc3NBeGlzQWxpZ25tZW50LnN0cmV0Y2gsCiAgICAgICAgICBzcGFjaW5nOiBEaW1lbnNpb25zRG91YmxlLnNtLAogICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgZm9yIChmaW5hbCBrZXkgaW4ga2V5cykKICAgICAgICAgICAgICBfU3RyaW5nS2V5V2lkZ2V0KAogICAgICAgICAgICAgICAgY29udHJvbGxlcjogY29udHJvbGxlci5nZXRDb250cm9sbGVyRm9yS2V5KGtleSksCiAgICAgICAgICAgICAgICBqc29uUGF0aDogIiRqc29uUGF0aC4ka2V5IiwKICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVtrZXldLAogICAgICAgICAgICAgICAgb25Kc29uUGF0aFNlbGVjdGVkOiBvbkpzb25QYXRoU2VsZWN0ZWQsCiAgICAgICAgICAgICAgICBpc011bHRpbGluZTogZmFsc2UsCiAgICAgICAgICAgICAgICBvbkNvbW1pdFZhbHVlOiAodikgewogICAgICAgICAgICAgICAgICBmaW5hbCBjb3B5ID0gTWFwPFN0cmluZywgZHluYW1pYz4uZnJvbSh2YWx1ZSk7CiAgICAgICAgICAgICAgICAgIGNvcHlba2V5XSA9IHY7CiAgICAgICAgICAgICAgICAgIG9uQ29tbWl0VmFsdWUoY29weSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgZm9jdXNQcm92aWRlcjogZm9jdXNQcm92aWRlciwKICAgICAgICAgICAgICAgIG9uU3VibWl0OiAoKSB7fSwKICAgICAgICAgICAgICApLAogICAgICAgICAgXSwKICAgICAgICApLAogICAgICApLAogICAgKTsKICB9Cn0KCmNsYXNzIF9TdHJpbmdLZXlXaWRnZXQgZXh0ZW5kcyBIb29rV2lkZ2V0IHsKICBfU3RyaW5nS2V5V2lkZ2V0KHsKICAgIHJlcXVpcmVkIHRoaXMuanNvblBhdGgsCiAgICByZXF1aXJlZCB0aGlzLnZhbHVlLAogICAgcmVxdWlyZWQgdGhpcy5vbkpzb25QYXRoU2VsZWN0ZWQsCiAgICByZXF1aXJlZCB0aGlzLmlzTXVsdGlsaW5lLAogICAgcmVxdWlyZWQgdGhpcy5vbkNvbW1pdFZhbHVlLAogICAgcmVxdWlyZWQgdGhpcy5mb2N1c1Byb3ZpZGVyLAogICAgcmVxdWlyZWQgdGhpcy5vblN1Ym1pdCwKICAgIHJlcXVpcmVkIHRoaXMuY29udHJvbGxlciwKICB9KSA6IHN1cGVyKGtleTogVmFsdWVLZXkoanNvblBhdGgpKTsKCiAgZmluYWwgU3RyaW5nIGpzb25QYXRoOwogIGZpbmFsIFN0cmluZyB2YWx1ZTsKICBmaW5hbCBWYWx1ZUNoYW5nZWQ8U3RyaW5nPiBvbkpzb25QYXRoU2VsZWN0ZWQ7CiAgZmluYWwgVmFsdWVDaGFuZ2VkPFN0cmluZz4gb25Db21taXRWYWx1ZTsKICBmaW5hbCBib29sIGlzTXVsdGlsaW5lOwogIGZpbmFsIF9Gb2N1c1Byb3ZpZGVyIGZvY3VzUHJvdmlkZXI7CiAgZmluYWwgVm9pZENhbGxiYWNrIG9uU3VibWl0OwogIGZpbmFsIF9LZXlXaWRnZXRTdHJpbmdDb250cm9sbGVyIGNvbnRyb2xsZXI7CgogIEBvdmVycmlkZQogIFdpZGdldCBidWlsZChCdWlsZENvbnRleHQgY29udGV4dCkgewogICAgZmluYWwgdGV4dENvbnRyb2xsZXIgPSB1c2VUZXh0RWRpdGluZ0NvbnRyb2xsZXIodGV4dDogdmFsdWUpOwoKICAgIHVzZUVmZmVjdCgoKSB7CiAgICAgIGNvbnRyb2xsZXIuYXR0YWNoKHRleHRDb250cm9sbGVyKTsKICAgICAgcmV0dXJuICgpIHsKICAgICAgICBjb250cm9sbGVyLmRldGFjaCgpOwogICAgICB9OwogICAgfSk7CgogICAgZmluYWwgZm9jdXNOb2RlID0gZm9jdXNQcm92aWRlci5vYnRhaW4oanNvblBhdGgpOwogICAgdm9pZCBjb21taXRWYWx1ZSgpIHsKICAgICAgaWYgKHRleHRDb250cm9sbGVyLnRleHQgIT0gdmFsdWUpIHsKICAgICAgICBvbkNvbW1pdFZhbHVlKHRleHRDb250cm9sbGVyLnRleHQpOwogICAgICB9CiAgICB9CgogICAgdXNlRWZmZWN0KCgpIHsKICAgICAgaWYgKHRleHRDb250cm9sbGVyLnRleHQgIT0gdmFsdWUpIHsKICAgICAgICB0ZXh0Q29udHJvbGxlci52YWx1ZSA9IHRleHRDb250cm9sbGVyLnZhbHVlLmNvcHlXaXRoKHRleHQ6IHZhbHVlKTsKICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0sIFt2YWx1ZV0pOwoKICAgIHVzZUVmZmVjdCgoKSB7CiAgICAgIHZvaWQgb25Gb2N1c0NoYW5nZSgpIHsKICAgICAgICBpZiAoZm9jdXNOb2RlLmhhc0ZvY3VzKSB7CiAgICAgICAgICBvbkpzb25QYXRoU2VsZWN0ZWQoanNvblBhdGgpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBXaWRnZXRzQmluZGluZy5pbnN0YW5jZS5hZGRQb3N0RnJhbWVDYWxsYmFjaygoXykgewogICAgICAgICAgICAvLyBPbmx5IGNvbW1pdCBpZiBmb2N1cyBtb3ZlZCB0byBhbm90aGVyIHRleHQgZmllbGQKICAgICAgICAgICAgZmluYWwgcHJpbWFyeUZvY3VzID0gRm9jdXNNYW5hZ2VyLmluc3RhbmNlLnByaW1hcnlGb2N1czsKICAgICAgICAgICAgaWYgKCFmb2N1c05vZGUuaGFzRm9jdXMgJiYgZm9jdXNQcm92aWRlci5pc01hbmFnZWQocHJpbWFyeUZvY3VzKSkgewogICAgICAgICAgICAgIGNvbW1pdFZhbHVlKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9jdXNOb2RlLmFkZExpc3RlbmVyKG9uRm9jdXNDaGFuZ2UpOwogICAgICByZXR1cm4gKCkgewogICAgICAgIGZvY3VzTm9kZS5yZW1vdmVMaXN0ZW5lcihvbkZvY3VzQ2hhbmdlKTsKICAgICAgfTsKICAgIH0sIFtmb2N1c05vZGVdKTsKCiAgICByZXR1cm4gVGV4dEZpZWxkKAogICAgICBtYXhMaW5lczogbnVsbCwKICAgICAgdGV4dElucHV0QWN0aW9uOgogICAgICAgICAgaXNNdWx0aWxpbmUgPyBUZXh0SW5wdXRBY3Rpb24ubmV3bGluZSA6IFRleHRJbnB1dEFjdGlvbi5uZXh0LAogICAgICBmb2N1c05vZGU6IGZvY3VzTm9kZSwKICAgICAgY29udHJvbGxlcjogdGV4dENvbnRyb2xsZXIsCiAgICAgIGRlY29yYXRpb246IElucHV0RGVjb3JhdGlvbigKICAgICAgICBib3JkZXI6IGNvbnN0IE91dGxpbmVJbnB1dEJvcmRlcigpLAogICAgICAgIGxhYmVsVGV4dDoganNvblBhdGguc3BsaXQoIi4iKS5sYXN0LAogICAgICApLAogICAgICBvblN1Ym1pdHRlZDogKF8pIHsKICAgICAgICBjb21taXRWYWx1ZSgpOwogICAgICAgIG9uU3VibWl0KCk7CiAgICAgIH0sCiAgICApOwogIH0KfQoKY2xhc3MgX1RyYW5zbGF0aW9uQnViYmxlIGV4dGVuZHMgU3RhdGVsZXNzV2lkZ2V0IHsKICBjb25zdCBfVHJhbnNsYXRpb25CdWJibGUoewogICAgcmVxdWlyZWQgdGhpcy50ZXh0LAogICAgcmVxdWlyZWQgdGhpcy5zaG93RmxhZywKICAgIHJlcXVpcmVkIHRoaXMuYmFzZUxhbmd1YWdlRmxhZ0NvZGUsCiAgfSk7CgogIGZpbmFsIFN0cmluZyB0ZXh0OwogIGZpbmFsIGJvb2wgc2hvd0ZsYWc7CgogIGZpbmFsIEZsYWdzQ29kZSBiYXNlTGFuZ3VhZ2VGbGFnQ29kZTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICByZXR1cm4gUGFkZGluZygKICAgICAgcGFkZGluZzogUEhfTSwKICAgICAgY2hpbGQ6IERlY29yYXRlZEJveCgKICAgICAgICBkZWNvcmF0aW9uOiBCb3hEZWNvcmF0aW9uKAogICAgICAgICAgY29sb3I6IGNvbnRleHQuY29sb3JzLnByaW1hcnlDb250YWluZXIsCiAgICAgICAgICBib3JkZXJSYWRpdXM6IFJhZGlpLmJvcmRlclMsCiAgICAgICAgKSwKICAgICAgICBjaGlsZDogUGFkZGluZygKICAgICAgICAgIHBhZGRpbmc6IFBfWFMsCiAgICAgICAgICBjaGlsZDogUm93KAogICAgICAgICAgICBjcm9zc0F4aXNBbGlnbm1lbnQ6IENyb3NzQXhpc0FsaWdubWVudC5zdGFydCwKICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICBQYWRkaW5nKAogICAgICAgICAgICAgICAgcGFkZGluZzogY29uc3QgRWRnZUluc2V0cy5vbmx5KHRvcDogMiksCiAgICAgICAgICAgICAgICBjaGlsZDogRmxhZ0JhbGwoCiAgICAgICAgICAgICAgICAgIGZsYWdDb2RlOiBiYXNlTGFuZ3VhZ2VGbGFnQ29kZSwKICAgICAgICAgICAgICAgICAgc2l6ZTogRGltZW5zaW9uc0RvdWJsZS5tLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIFNIX1MsCiAgICAgICAgICAgICAgRXhwYW5kZWQoCiAgICAgICAgICAgICAgICBjaGlsZDogVGV4dCgKICAgICAgICAgICAgICAgICAgdGV4dCwKICAgICAgICAgICAgICAgICAgc3R5bGU6IFRleHRTdHlsZShjb2xvcjogY29udGV4dC5jb2xvcnMub25QcmltYXJ5Q29udGFpbmVyKSwKICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgXSwKICAgICAgICAgICksCiAgICAgICAgKSwKICAgICAgKSwKICAgICk7CiAgfQp9CgpjbGFzcyBfRm9jdXNQcm92aWRlciB7CiAgZmluYWwgX25vZGVzID0gPFN0cmluZywgRm9jdXNOb2RlPnt9OwoKICB2b2lkIHJlcXVlc3RGb2N1cyhTdHJpbmdLZXkgc3RyaW5nS2V5KSB7CiAgICBfbm9kZXNbc3RyaW5nS2V5LmtleV0/LnJlcXVlc3RGb2N1cygpOwogIH0KCiAgYm9vbCBpc01hbmFnZWQoRm9jdXNOb2RlPyBmb2N1c05vZGUpID0+IF9ub2Rlcy5jb250YWluc1ZhbHVlKGZvY3VzTm9kZSk7CgogIEZvY3VzTm9kZSBvYnRhaW4oU3RyaW5nIGpzb25QYXRoKSA9PgogICAgICBfbm9kZXMucHV0SWZBYnNlbnQoanNvblBhdGgsICgpID0+IEZvY3VzTm9kZShkZWJ1Z0xhYmVsOiBqc29uUGF0aCkpOwoKICB2b2lkIGRpc3Bvc2UoKSB7CiAgICBmb3IgKGZpbmFsIG5vZGUgaW4gX25vZGVzLnZhbHVlcykgewogICAgICBub2RlLmRpc3Bvc2UoKTsKICAgIH0KICB9Cn0KCmV4dGVuc2lvbiBfU2xhbmdFZGl0b3JTdGF0ZSBvbiBTbGFuZ0VkaXRvclN0YXRlIHsKICBNYXA8U3RyaW5nLCBkeW5hbWljPiBlZmZlY3RpdmVTbGFuZ0pzb24oYm9vbCBkaXNwbGF5QWxsKSA9PgogICAgICBkaXNwbGF5QWxsID8gc2xhbmdKc29uIDogc2xhbmdTY29wZWRKc29uOwp9CgpleHRlbnNpb24gX0tleXMgb24gTWFwPFN0cmluZywgZHluYW1pYz4gewogIExpc3Q8U3RyaW5nS2V5PiBnZXQgc3RyaW5nS2V5cyA9PiBrZXlzCiAgICAgIC5tYXAoKHNsYW5nSnNvbktleSkgPT4KICAgICAgICAgIFN0cmluZ0tleS52YWx1ZXMuZmlyc3RXaGVyZU9yTnVsbCgoaXQpID0+IGl0LmtleSA9PSBzbGFuZ0pzb25LZXkpKQogICAgICAubm9uTnVsbHMKICAgICAgLnRvTGlzdCgpOwp9CgpjbGFzcyBfS2V5U2VhcmNoQmFyIGV4dGVuZHMgSG9va1dpZGdldCB7CiAgY29uc3QgX0tleVNlYXJjaEJhcih7CiAgICB0aGlzLnNlYXJjaEZhZGVDb2xvcnMsCiAgfSk7CgogIGZpbmFsIExpc3Q8Q29sb3I+PyBzZWFyY2hGYWRlQ29sb3JzOwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGZpbmFsIGN1Yml0ID0gY29udGV4dC53YXRjaDxTbGFuZ0VkaXRvckN1Yml0PigpOwogICAgZmluYWwgc3RhdGUgPSBjdWJpdC5zdGF0ZTsKICAgIGZpbmFsIGhhc011bHRpcGxlU2VhcmNoUmVzdWx0cyA9IHN0YXRlLnNlYXJjaFJlc3VsdHMubGVuZ3RoID4gMTsKCiAgICBpbnQgY3VycmVudCA9IChzdGF0ZS5jdXJyZW50U2VhcmNoSW5kZXgoKSArIDEpOwogICAgaW50IHRvdGFsID0gc3RhdGUuc2VhcmNoUmVzdWx0cy5sZW5ndGg7CgogICAgcmV0dXJuIEZsb2F0aW5nU2VhcmNoQmFyKAogICAgICBpbml0aWFsVmFsdWU6ICIiLAogICAgICBvbklucHV0VXBkYXRlOiBjdWJpdC5zZWFyY2gsCiAgICAgIGZhZGVDb2xvcnM6IHNlYXJjaEZhZGVDb2xvcnMsCiAgICAgIHN1ZmZpeEljb246IEFuaW1hdGVkT3BhY2l0eSgKICAgICAgICBvcGFjaXR5OiBoYXNNdWx0aXBsZVNlYXJjaFJlc3VsdHMgPyAxLjAgOiAwLjAsCiAgICAgICAgZHVyYXRpb246IER1cmF0aW9ucy5zaG9ydDQsCiAgICAgICAgY2hpbGQ6IFJvdygKICAgICAgICAgIG1haW5BeGlzU2l6ZTogTWFpbkF4aXNTaXplLm1pbiwKICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgIFRleHQoIiRjdXJyZW50IC8gJHRvdGFsIiksCiAgICAgICAgICAgIEljb25CdXR0b24oCiAgICAgICAgICAgICAgb25QcmVzc2VkOiBoYXNNdWx0aXBsZVNlYXJjaFJlc3VsdHMKICAgICAgICAgICAgICAgICAgPyAoKSA9PiBjdWJpdC5tb3ZlU2VhcmNoUmVzdWx0KC0xKQogICAgICAgICAgICAgICAgICA6IG51bGwsCiAgICAgICAgICAgICAgaWNvbjogY29uc3QgUm90YXRlZEJveCgKICAgICAgICAgICAgICAgIHF1YXJ0ZXJUdXJuczogLTEsCiAgICAgICAgICAgICAgICBjaGlsZDogSWNvbihJY29ucy5jaGV2cm9uX3JpZ2h0KSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICApLAogICAgICAgICAgICBJY29uQnV0dG9uKAogICAgICAgICAgICAgIG9uUHJlc3NlZDogaGFzTXVsdGlwbGVTZWFyY2hSZXN1bHRzCiAgICAgICAgICAgICAgICAgID8gKCkgPT4gY3ViaXQubW92ZVNlYXJjaFJlc3VsdCgxKQogICAgICAgICAgICAgICAgICA6IG51bGwsCiAgICAgICAgICAgICAgaWNvbjogY29uc3QgUm90YXRlZEJveCgKICAgICAgICAgICAgICAgIHF1YXJ0ZXJUdXJuczogMSwKICAgICAgICAgICAgICAgIGNoaWxkOiBJY29uKEljb25zLmNoZXZyb25fcmlnaHQpLAogICAgICAgICAgICAgICksCiAgICAgICAgICAgICkKICAgICAgICAgIF0sCiAgICAgICAgKSwKICAgICAgKSwKICAgICk7CiAgfQp9Cg==';
  static String get assets_locale_editor_widget_mustache =>
      _decode(_assets_locale_editor_widget_mustache);
  static const String _assets_locale_editor_sheet_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyX2Jsb2MvZmx1dHRlcl9ibG9jLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6e3twYWNrYWdlTmFtZX19L3t7e3N0cmluZ1N0b3J5fX19L3N0cmluZ19zdG9yeS5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOnN0cmluZ19zdG9yeS9zdHJpbmdfc3RvcnkuZGFydCc7CmltcG9ydCAncGFja2FnZTp3b2x0X21vZGFsX3NoZWV0L3dvbHRfbW9kYWxfc2hlZXQuZGFydCc7CgpjbGFzcyBMb2NhbGVFZGl0b3JTaGVldCB7CiAgTG9jYWxlRWRpdG9yU2hlZXQuXygpOwoKICBzdGF0aWMgRnV0dXJlPHZvaWQ+IHNob3coQnVpbGRDb250ZXh0IGNvbnRleHQpIGFzeW5jIHsKICAgIGZpbmFsIGtleXNUb0Rpc3BsYXkgPSBUcmFuc2xhdGlvblNjb3BlS2V5cy5vZihjb250ZXh0KT8udmFsdWU7CiAgICBpZiAoa2V5c1RvRGlzcGxheSA9PSBudWxsKSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBXb2x0TW9kYWxTaGVldC5zaG93KAogICAgICAgIGNvbnRleHQ6IGNvbnRleHQsCiAgICAgICAgcGFnZUxpc3RCdWlsZGVyOiAoXykgPT4gW19zaGVldCgpXSwKICAgICAgICBtb2RhbERlY29yYXRvcjogKGNoaWxkKSB7CiAgICAgICAgICByZXR1cm4gQmxvY1Byb3ZpZGVyKAogICAgICAgICAgICBjcmVhdGU6IChjb250ZXh0KSB7CiAgICAgICAgICAgICAgcmV0dXJuIFNsYW5nRWRpdG9yQ3ViaXQoCiAgICAgICAgICAgICAgICBiYXNlQ3ViaXQ6IGNvbnRleHQucmVhZDxTbGFuZ0Jhc2VDdWJpdD4oKSwKICAgICAgICAgICAgICAgIHNjb3BlZEtleXM6IGtleXNUb0Rpc3BsYXksCiAgICAgICAgICAgICAgICBvdkxvY2FsZToKICAgICAgICAgICAgICAgICAgICBTdHJpbmdTdG9yeVNlcnZpY2UuaW5zdGFuY2UuY29uZmlnLmFwcExhbmd1YWdlQ29kZSwKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9LAogICAgICAgICAgICBjaGlsZDogY2hpbGQsCiAgICAgICAgICApOwogICAgICAgIH0pOwogIH0KCiAgc3RhdGljIE5vblNjcm9sbGluZ1dvbHRNb2RhbFNoZWV0UGFnZSBfc2hlZXQoKSB7CiAgICByZXR1cm4gTm9uU2Nyb2xsaW5nV29sdE1vZGFsU2hlZXRQYWdlKAogICAgICBjaGlsZDogUGFkZGluZygKICAgICAgICBwYWRkaW5nOiBjb25zdCBFZGdlSW5zZXRzLm9ubHkodG9wOiBEaW1lbnNpb25zRG91YmxlLm0pLAogICAgICAgIGNoaWxkOiBMb2NhbGVFZGl0b3JXaWRnZXQoCiAgICAgICAgICBzaG93U2NvcGVkVmFsdWVzOiB0cnVlLAogICAgICAgICAgaXNTZWFyY2hBdmFpbGFibGU6IGZhbHNlLAogICAgICAgICAgb25Kc29uUGF0aFNlbGVjdGVkOiAoXykge30sCiAgICAgICAgKSwKICAgICAgKSwKICAgICk7CiAgfQp9Cg==';
  static String get assets_locale_editor_sheet_mustache =>
      _decode(_assets_locale_editor_sheet_mustache);
  static const String _assets_locale_submit_sheet_mustache =
      'Ly8gaWdub3JlX2Zvcl9maWxlOiBkZXBlbmRfb25fcmVmZXJlbmNlZF9wYWNrYWdlcwoKaW1wb3J0ICdkYXJ0OmNvbnZlcnQnOwoKaW1wb3J0ICdwYWNrYWdlOmZsdXR0ZXIvbWF0ZXJpYWwuZGFydCc7CmltcG9ydCAncGFja2FnZTpmbHV0dGVyX2Jsb2MvZmx1dHRlcl9ibG9jLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6Zmx1dHRlcl9ob29rcy9mbHV0dGVyX2hvb2tzLmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6e3twYWNrYWdlTmFtZX19L3t7e3N0cmluZ1N0b3J5fX19L3N0cmluZ19zdG9yeS5kYXJ0JzsKaW1wb3J0ICdwYWNrYWdlOmVtYWlsX3ZhbGlkYXRvci9lbWFpbF92YWxpZGF0b3IuZGFydCc7CmltcG9ydCAncGFja2FnZTpzaW1wbGVfcmljaF90ZXh0L3NpbXBsZV9yaWNoX3RleHQuZGFydCc7CmltcG9ydCAncGFja2FnZTpzdHJpbmdfc3Rvcnkvc3RyaW5nX3N0b3J5LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6d29sdF9tb2RhbF9zaGVldC93b2x0X21vZGFsX3NoZWV0LmRhcnQnOwppbXBvcnQgJ3BhY2thZ2U6cHJvdmlkZXIvcHJvdmlkZXIuZGFydCc7CgppbnQgZ2V0IF9zbGFuZ1N0cmluZ3NWZXJzaW9uID0+CiAgICBTdHJpbmdTdG9yeVNlcnZpY2UuaW5zdGFuY2UuZ2VuZXJhdGVkRGVsZWdhdGUudmVyc2lvbkNvZGU7CgovLy8gU3VibWl0IHlvdXIgdHJhbnNsYXRpb25zCi8vLyAtIEVudHJ5Ci8vLyAgIC0gUHJvZ3Jlc3MKLy8vICAgLSBTaG93IE15IENoYW5nZXMKLy8vIC0gQ29udGFjdCBkYXRhCi8vLyAgIC0gTmFtZQovLy8gICAtIFVzZXJuYW1lCi8vLyAtIEFncmVlIGFuZCBzdWJtaXQKLy8vIC0gVGhhbmsgWW91CmNsYXNzIExvY2FsZVN1Ym1pdFNoZWV0IHsKICBMb2NhbGVTdWJtaXRTaGVldC5fKCk7CgogIHN0YXRpYyBGdXR1cmU8dm9pZD4gc2hvdygKICAgIEJ1aWxkQ29udGV4dCBjb250ZXh0LCB7CiAgICByZXF1aXJlZCBTbGFuZ0VkaXRvckN1Yml0IGVkaXRvckN1Yml0LAogICAgcmVxdWlyZWQgU2xhbmdCYXNlQ3ViaXQgYmFzZUN1Yml0LAogIH0pIGFzeW5jIHsKICAgIGZpbmFsIGJhc2VTdGF0ZSA9IGJhc2VDdWJpdC5zdGF0ZS5tYXliZU1hcCgKICAgICAgZGF0YTogKGl0KSA9PiBpdCwKICAgICAgb3JFbHNlOiAoKSA9PiBudWxsLAogICAgKTsKCiAgICBpZiAoYmFzZVN0YXRlID09IG51bGwpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGZpbmFsIGNvbnRyb2xsZXIgPSBfU2hlZXRzQ29udHJvbGxlcigKICAgICAgY29udGFjdERhdGE6CiAgICAgICAgICBTdHJpbmdTdG9yeVNlcnZpY2UuaW5zdGFuY2UuaW5BcHBFZGl0b3JDb25maWcuZ2V0VXNlckNvbnRhY3REYXRhKCksCiAgICAgIG9uU3VibWl0Q29udGFjdERhdGE6IChjb250YWN0RGF0YSkgewogICAgICAgIGJhc2VDdWJpdC5zZXRDb250YWN0RGF0YShjb250YWN0RGF0YSk7CiAgICAgICAgU3RyaW5nU3RvcnlTZXJ2aWNlLmluc3RhbmNlLmluQXBwRWRpdG9yQ29uZmlnCiAgICAgICAgICAgIC5zZXRVc2VyQ29udGFjdERhdGEoY29udGFjdERhdGEpOwogICAgICB9LAogICAgICBzdWJtaXRUcmFuc2xhdGlvbkRhdGE6ICgpIGFzeW5jID0+IGF3YWl0IF9zdWJtaXRUcmFuc2xhdGlvbnMoCiAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LCBzbGFuZ0Jhc2VDdWJpdDogYmFzZUN1Yml0KSwKICAgICAgb25FeGl0OiAoKSB7CiAgICAgICAgTmF2aWdhdG9yLm9mKGNvbnRleHQpLnBvcCgpOwogICAgICB9LAogICAgKTsKCiAgICBhd2FpdCBXb2x0TW9kYWxTaGVldC5zaG93KAogICAgICBwYWdlSW5kZXhOb3RpZmllcjogY29udHJvbGxlci5fcG9zaXRpb24sCiAgICAgIGNvbnRleHQ6IGNvbnRleHQsCiAgICAgIHBhZ2VMaXN0QnVpbGRlcjogKF8pID0+IF9TaGVldHMudmFsdWVzLm1hcCgoaXQpID0+IGl0LmJ1aWxkZXIoKSkudG9MaXN0KCksCiAgICAgIG1vZGFsRGVjb3JhdG9yOiAoY2hpbGQpID0+IE11bHRpUHJvdmlkZXIoCiAgICAgICAgcHJvdmlkZXJzOiBbCiAgICAgICAgICBQcm92aWRlci52YWx1ZSgKICAgICAgICAgICAgdmFsdWU6IGNvbnRyb2xsZXIsCiAgICAgICAgICApLAogICAgICAgICAgQmxvY1Byb3ZpZGVyPFNsYW5nRWRpdG9yQ3ViaXQ+LnZhbHVlKAogICAgICAgICAgICB2YWx1ZTogZWRpdG9yQ3ViaXQsCiAgICAgICAgICApLAogICAgICAgIF0sCiAgICAgICAgY2hpbGQ6IGNoaWxkLAogICAgICApLAogICAgKTsKCiAgICBjb250cm9sbGVyLmRpc3Bvc2UoKTsKICB9Cn0KCmNsYXNzIF9TaGVldHNDb250cm9sbGVyIHsKICBmaW5hbCBfcG9zaXRpb24gPSBWYWx1ZU5vdGlmaWVyKDApOwogIGxhdGUgZmluYWwgbGlzdGVuYWJsZSA9IExpc3RlbmFibGUubWVyZ2UoWwogICAgX3Bvc2l0aW9uLAogICAgZW1haWxDb250cm9sbGVyLAogICAgbmFtZUNvbnRyb2xsZXIsCiAgICB3ZWJDb250cm9sbGVyLAogICAgZW1haWxFcnJvciwKICAgIG5hbWVFcnJvciwKICAgIHdlYkVycm9yLAogICAgZGF0YVN0YXR1cywKICBdKTsKICBmaW5hbCBfaGlzdG9yeSA9IDxfU2hlZXRzPltdOwogIGZpbmFsIFZvaWRDYWxsYmFjayBvbkV4aXQ7CiAgZmluYWwgVGV4dEVkaXRpbmdDb250cm9sbGVyIGVtYWlsQ29udHJvbGxlcjsKICBmaW5hbCBUZXh0RWRpdGluZ0NvbnRyb2xsZXIgbmFtZUNvbnRyb2xsZXI7CiAgZmluYWwgVGV4dEVkaXRpbmdDb250cm9sbGVyIHdlYkNvbnRyb2xsZXI7CiAgZmluYWwgZW1haWxFcnJvciA9IFZhbHVlTm90aWZpZXI8U3RyaW5nPz4obnVsbCk7CiAgZmluYWwgbmFtZUVycm9yID0gVmFsdWVOb3RpZmllcjxTdHJpbmc/PihudWxsKTsKICBmaW5hbCB3ZWJFcnJvciA9IFZhbHVlTm90aWZpZXI8U3RyaW5nPz4obnVsbCk7CiAgZmluYWwgdm9pZCBGdW5jdGlvbihVc2VyQ29udGFjdERhdGEgZGF0YSkgb25TdWJtaXRDb250YWN0RGF0YTsKICBmaW5hbCBGdXR1cmU8dm9pZD4gRnVuY3Rpb24oKSBzdWJtaXRUcmFuc2xhdGlvbkRhdGE7CiAgZmluYWwgZGF0YVN0YXR1cyA9IFZhbHVlTm90aWZpZXI8X0RhdGFTdGF0dXM+KGNvbnN0IF9EYXRhU3RhdHVzSWRsZSgpKTsKCiAgX1NoZWV0c0NvbnRyb2xsZXIoewogICAgcmVxdWlyZWQgdGhpcy5vbkV4aXQsCiAgICByZXF1aXJlZCB0aGlzLm9uU3VibWl0Q29udGFjdERhdGEsCiAgICByZXF1aXJlZCB0aGlzLnN1Ym1pdFRyYW5zbGF0aW9uRGF0YSwKICAgIFVzZXJDb250YWN0RGF0YT8gY29udGFjdERhdGEsCiAgfSkgIDogZW1haWxDb250cm9sbGVyID0gVGV4dEVkaXRpbmdDb250cm9sbGVyKHRleHQ6IGNvbnRhY3REYXRhPy5lbWFpbCksCiAgICAgICAgbmFtZUNvbnRyb2xsZXIgPSBUZXh0RWRpdGluZ0NvbnRyb2xsZXIodGV4dDogY29udGFjdERhdGE/Lm5hbWUpLAogICAgICAgIHdlYkNvbnRyb2xsZXIgPSBUZXh0RWRpdGluZ0NvbnRyb2xsZXIodGV4dDogY29udGFjdERhdGE/LndlYnNpdGUpIHsKICAgIG1vdmVUbyhfU2hlZXRzLmVudHJ5KTsKICB9CgogIHZvaWQgbW92ZVRvKF9TaGVldHMgc2hlZXQpIHsKICAgIF9wb3NpdGlvbi52YWx1ZSA9IF9TaGVldHMudmFsdWVzLmluZGV4T2Yoc2hlZXQpOwogICAgX2hpc3RvcnkuYWRkKHNoZWV0KTsKICB9CgogIGJvb2wgY2hlY2tDb250YWN0RGF0YSgpIHsKICAgIGZpbmFsIGVtYWlsID0gZW1haWxDb250cm9sbGVyLnRleHQ7CiAgICBmaW5hbCBpc0VtYWlsVmFsaWQgPSBFbWFpbFZhbGlkYXRvci52YWxpZGF0ZShlbWFpbCk7CiAgICBmaW5hbCBpc05hbWVWYWxpZCA9IG5hbWVDb250cm9sbGVyLnRleHQudHJpbSgpLmlzTm90RW1wdHk7CiAgICBpZiAoaXNFbWFpbFZhbGlkKSB7CiAgICAgIGVtYWlsRXJyb3IudmFsdWUgPSBudWxsOwogICAgfSBlbHNlIHsKICAgICAgZW1haWxFcnJvci52YWx1ZSA9IHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MuaW52YWxpZEVtYWlsQWRkcmVzczsKICAgIH0KICAgIGlmIChpc05hbWVWYWxpZCkgewogICAgICBuYW1lRXJyb3IudmFsdWUgPSBudWxsOwogICAgfSBlbHNlIHsKICAgICAgbmFtZUVycm9yLnZhbHVlID0gc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5uYW1lQ2Fubm90QmVFbXB0eTsKICAgIH0KCiAgICByZXR1cm4gaXNFbWFpbFZhbGlkICYmIGlzTmFtZVZhbGlkOwogIH0KCiAgdm9pZCBtb3ZlVG9BZ3JlZW1lbnQoKSB7CiAgICBmaW5hbCBhbGxHb29kID0gY2hlY2tDb250YWN0RGF0YSgpOwogICAgaWYgKGFsbEdvb2QpIHsKICAgICAgb25TdWJtaXRDb250YWN0RGF0YSgKICAgICAgICBVc2VyQ29udGFjdERhdGEoCiAgICAgICAgICBlbWFpbDogZW1haWxDb250cm9sbGVyLnRleHQudHJpbSgpLAogICAgICAgICAgbmFtZTogbmFtZUNvbnRyb2xsZXIudGV4dC50cmltKCksCiAgICAgICAgICB3ZWJzaXRlOiB3ZWJDb250cm9sbGVyLnRleHQudHJpbSgpLAogICAgICAgICksCiAgICAgICk7CiAgICAgIG1vdmVUbyhfU2hlZXRzLmFncmVlbWVudCk7CiAgICB9CiAgfQoKICBGdXR1cmU8dm9pZD4gc3VibWl0VHJhbnNsYXRpb25zKCkgYXN5bmMgewogICAgbW92ZVRvKF9TaGVldHMuc2VuZGluZyk7CiAgICBpZiAoZGF0YVN0YXR1cy52YWx1ZSA9PSBjb25zdCBfRGF0YVN0YXR1c0luUHJvZ3Jlc3MoKSkgewogICAgICByZXR1cm47CiAgICB9CiAgICB0cnkgewogICAgICBkYXRhU3RhdHVzLnZhbHVlID0gY29uc3QgX0RhdGFTdGF0dXNJblByb2dyZXNzKCk7CiAgICAgIGF3YWl0IHN1Ym1pdFRyYW5zbGF0aW9uRGF0YSgpOwogICAgICBkYXRhU3RhdHVzLnZhbHVlID0gY29uc3QgX0RhdGFTdGF0dXNPSygpOwogICAgICBtb3ZlVG8oX1NoZWV0cy50aGFua1lvdSk7CiAgICAgIGF3YWl0IEZ1dHVyZS5kZWxheWVkKGNvbnN0IER1cmF0aW9uKHNlY29uZHM6IDUpKTsKICAgICAgb25FeGl0KCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGRhdGFTdGF0dXMudmFsdWUgPSBfRGF0YVN0YXR1c0ZhaWwoZSk7CiAgICB9CiAgfQoKICBib29sIGNhbkdvQmFjaygpID0+IF9oaXN0b3J5Lmxlbmd0aCA+IDE7CgogIHZvaWQgZ29CYWNrKCkgewogICAgaWYgKGNhbkdvQmFjaygpKSB7CiAgICAgIF9oaXN0b3J5LnJlbW92ZUxhc3QoKTsKICAgICAgX3Bvc2l0aW9uLnZhbHVlID0gX1NoZWV0cy52YWx1ZXMuaW5kZXhPZihfaGlzdG9yeS5sYXN0KTsKICAgIH0gZWxzZSB7CiAgICAgIG9uRXhpdCgpOwogICAgfQogIH0KCiAgdm9pZCBkaXNwb3NlKCkgewogICAgZW1haWxDb250cm9sbGVyLmRpc3Bvc2UoKTsKICAgIG5hbWVDb250cm9sbGVyLmRpc3Bvc2UoKTsKICB9Cn0KCmVudW0gX1NoZWV0cyB7CiAgZW50cnkoX2VudHJ5KSwKICBkaWZmKF9kaWZmKSwKICBjb250YWN0RGF0YShfY29udGFjdERhdGEpLAogIGFncmVlbWVudChfYWdyZWVBbmRTdWJtaXQpLAogIHNlbmRpbmcoX3NlbmRpbmcpLAogIHRoYW5rWW91KF90aGFua1lvdSk7CgogIGZpbmFsIFNsaXZlcldvbHRNb2RhbFNoZWV0UGFnZSBGdW5jdGlvbigpIGJ1aWxkZXI7CgogIGNvbnN0IF9TaGVldHModGhpcy5idWlsZGVyKTsKfQoKY29uc3QgX2JvdHRvbVNhZmVQYWRkaW5nID0gU2xpdmVyVG9Cb3hBZGFwdGVyKAogIGNoaWxkOiBTYWZlQXJlYUJvdHRvbSgKICAgIG1pbmltdW1QYWRkaW5nOiBEaW1lbnNpb25zRG91YmxlLm0sCiAgKSwKKTsKClNsaXZlcldvbHRNb2RhbFNoZWV0UGFnZSBfZW50cnkoKSB7CiAgcmV0dXJuIFNsaXZlcldvbHRNb2RhbFNoZWV0UGFnZSgKICAgIGxlYWRpbmdOYXZCYXJXaWRnZXQ6IGNvbnN0IF9MZWFkaW5nQnV0dG9uKCksCiAgICBtYWluQ29udGVudFNsaXZlcnNCdWlsZGVyOiAoY29udGV4dCkgewogICAgICBmaW5hbCBlZGl0b3JTdGF0ZSA9IGNvbnRleHQud2F0Y2g8U2xhbmdFZGl0b3JDdWJpdD4oKS5zdGF0ZTsKICAgICAgZmluYWwgYmFzZVN0YXRlID0gY29udGV4dC53YXRjaDxTbGFuZ0Jhc2VDdWJpdD4oKS5zdGF0ZS5tYXliZU1hcCgKICAgICAgICAgICAgZGF0YTogKGl0KSA9PiBpdCwKICAgICAgICAgICAgb3JFbHNlOiAoKSA9PiBudWxsLAogICAgICAgICAgKTsKICAgICAgZmluYWwgdG90YWxDb3VudCA9IFN0cmluZ0tleS52YWx1ZXMubGVuZ3RoOwogICAgICBmaW5hbCBkaWZmQ291bnQgPSBlZGl0b3JTdGF0ZS5kaWZmS2V5cy5sZW5ndGg7CiAgICAgIGZpbmFsIGFwcHJvdmVkQ291bnQgPSBiYXNlU3RhdGU/LmFwcHJvdmVkS2V5cy5sZW5ndGggPz8gMDsKCiAgICAgIHJldHVybiBbCiAgICAgICAgU2xpdmVyUGFkZGluZygKICAgICAgICAgIHBhZGRpbmc6IFBfTSwKICAgICAgICAgIHNsaXZlcjogU2xpdmVyVG9Cb3hBZGFwdGVyKAogICAgICAgICAgICBjaGlsZDogQ29sdW1uKAogICAgICAgICAgICAgIGNyb3NzQXhpc0FsaWdubWVudDogQ3Jvc3NBeGlzQWxpZ25tZW50LnN0cmV0Y2gsCiAgICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICAgIFRleHQoc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy50b3RhbFdvcmRzKHRvdGFsQ291bnQpKSwKICAgICAgICAgICAgICAgIEhvb2tCdWlsZGVyKGJ1aWxkZXI6IChjb250ZXh0KSB7CiAgICAgICAgICAgICAgICAgIGZpbmFsIGNvdmVyZWRLZXlzID0gdXNlTWVtb2l6ZWQoKCkgewogICAgICAgICAgICAgICAgICAgIGZpbmFsIGNvdmVyZWRLZXlzID0gPFN0cmluZ0tleT57fTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGZpbmFsIHN0b3J5IGluIHN0cmluZ1N0b3JpZXMoKSkgewogICAgICAgICAgICAgICAgICAgICAgY292ZXJlZEtleXMuYWRkQWxsKHN0b3J5LmtleXMpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gY292ZXJlZEtleXM7CiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgaWYgKGNvdmVyZWRLZXlzLmxlbmd0aCA9PSB0b3RhbENvdW50KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnN0IFNpemVkQm94LnNocmluaygpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBmaW5hbCBtaXNzaW5nQ291bnQgPSB0b3RhbENvdW50IC0gY292ZXJlZEtleXMubGVuZ3RoOwogICAgICAgICAgICAgICAgICBmaW5hbCBtaXNzaW5nID0gU2V0PFN0cmluZ0tleT4uZnJvbShTdHJpbmdLZXkudmFsdWVzKQogICAgICAgICAgICAgICAgICAgIC4ucmVtb3ZlQWxsKGNvdmVyZWRLZXlzKTsKCiAgICAgICAgICAgICAgICAgIHJldHVybiBUZXh0KAogICAgICAgICAgICAgICAgICAgIHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MubWlzc2luZ1N0b3JpZXMoCiAgICAgICAgICAgICAgICAgICAgICAgIG1pc3NpbmdDb3VudCwgbWlzc2luZy5tYXAoKGl0KSA9PiBpdC5rZXkpLmpvaW4oIiwgIikpLAogICAgICAgICAgICAgICAgICAgIHN0eWxlOiBUZXh0U3R5bGUoY29sb3I6IGNvbnRleHQuY29sb3JzLmVycm9yKSwKICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLmNvcnJlY3RlZChkaWZmQ291bnQpKSwKICAgICAgICAgICAgICAgIFRleHQoc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5hcHByb3ZlZChhcHByb3ZlZENvdW50KSksCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgKSwKICAgICAgICAgICksCiAgICAgICAgKSwKICAgICAgICBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgICAgICAgICBjaGlsZDogUGFkZGluZygKICAgICAgICAgICAgcGFkZGluZzogUEhfTSwKICAgICAgICAgICAgY2hpbGQ6IE91dGxpbmVkQnV0dG9uKAogICAgICAgICAgICAgIG9uUHJlc3NlZDogKCkgYXN5bmMgewogICAgICAgICAgICAgICAgY29udGV4dC5yZWFkPF9TaGVldHNDb250cm9sbGVyPigpLm1vdmVUbyhfU2hlZXRzLmRpZmYpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2hpbGQ6IFRleHQoc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy52aWV3TXlDaGFuZ2VzKSwKICAgICAgICAgICAgKSwKICAgICAgICAgICksCiAgICAgICAgKSwKICAgICAgICBjb25zdCBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgICAgICAgICBjaGlsZDogU1ZfTSwKICAgICAgICApLAogICAgICAgIFNsaXZlclRvQm94QWRhcHRlcigKICAgICAgICAgIGNoaWxkOiBQYWRkaW5nKAogICAgICAgICAgICBwYWRkaW5nOiBQSF9NLAogICAgICAgICAgICBjaGlsZDogT3V0bGluZWRCdXR0b24oCiAgICAgICAgICAgICAgb25QcmVzc2VkOiAoKSBhc3luYyB7CiAgICAgICAgICAgICAgICAvLyBkZXRlcm1pbmUgd2hhdCBpcyBuZXh0CiAgICAgICAgICAgICAgICBjb250ZXh0LnJlYWQ8X1NoZWV0c0NvbnRyb2xsZXI+KCkubW92ZVRvKF9TaGVldHMuY29udGFjdERhdGEpOwogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2hpbGQ6IFRleHQoc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5zdWJtaXRNeUNoYW5nZXMpLAogICAgICAgICAgICApLAogICAgICAgICAgKSwKICAgICAgICApLAogICAgICAgIF9ib3R0b21TYWZlUGFkZGluZywKICAgICAgXTsKICAgIH0sCiAgKTsKfQoKU2xpdmVyV29sdE1vZGFsU2hlZXRQYWdlIF9kaWZmKCkgewogIHJldHVybiBTbGl2ZXJXb2x0TW9kYWxTaGVldFBhZ2UoCiAgICAgIGxlYWRpbmdOYXZCYXJXaWRnZXQ6IGNvbnN0IF9MZWFkaW5nQnV0dG9uKCksCiAgICAgIHRvcEJhclRpdGxlOiBUZXh0KHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MubXlDaGFuZ2VzKSwKICAgICAgaXNUb3BCYXJMYXllckFsd2F5c1Zpc2libGU6IHRydWUsCiAgICAgIG1haW5Db250ZW50U2xpdmVyc0J1aWxkZXI6IChjb250ZXh0KSB7CiAgICAgICAgZmluYWwgZGlmZktleXMgPQogICAgICAgICAgICBjb250ZXh0LnNlbGVjdCgoU2xhbmdFZGl0b3JDdWJpdCBjdWJpdCkgPT4gY3ViaXQuc3RhdGUuZGlmZktleXMpOwoKICAgICAgICByZXR1cm4gWwogICAgICAgICAgaWYgKGRpZmZLZXlzLmlzRW1wdHkpCiAgICAgICAgICAgIFNsaXZlclRvQm94QWRhcHRlcigKICAgICAgICAgICAgICBjaGlsZDogU3RyaW5nU3RvcnlFbXB0eVN0YXRlKAogICAgICAgICAgICAgICAgaWNvbjogSWNvbihJY29ucy5sYW5ndWFnZSksCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5ub0NoYW5nZXNZZXQsCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgKSwKICAgICAgICAgIFNsaXZlckxpc3QuYnVpbGRlcigKICAgICAgICAgICAgaXRlbUNvdW50OiBkaWZmS2V5cy5sZW5ndGgsCiAgICAgICAgICAgIGl0ZW1CdWlsZGVyOiAoY29udGV4dCwgaW5kZXgpIHsKICAgICAgICAgICAgICByZXR1cm4gX0RpZmZXaWRnZXQoc2xhbmdLZXk6IGRpZmZLZXlzW2luZGV4XSk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICApLAogICAgICAgICAgX2JvdHRvbVNhZmVQYWRkaW5nLAogICAgICAgIF07CiAgICAgIH0pOwp9CgpTbGl2ZXJXb2x0TW9kYWxTaGVldFBhZ2UgX2NvbnRhY3REYXRhKCkgewogIHJldHVybiBTbGl2ZXJXb2x0TW9kYWxTaGVldFBhZ2UoCiAgICBpc1RvcEJhckxheWVyQWx3YXlzVmlzaWJsZTogdHJ1ZSwKICAgIGxlYWRpbmdOYXZCYXJXaWRnZXQ6IGNvbnN0IF9MZWFkaW5nQnV0dG9uKCksCiAgICB0b3BCYXJUaXRsZTogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnlvdXJDb250YWN0RGF0YSksCiAgICBtYWluQ29udGVudFNsaXZlcnNCdWlsZGVyOiAoY29udGV4dCkgewogICAgICBmaW5hbCBzaGVldENvbnRyb2xsZXIgPSBjb250ZXh0LnJlYWQ8X1NoZWV0c0NvbnRyb2xsZXI+KCk7CiAgICAgIHJldHVybiBbCiAgICAgICAgU2xpdmVyVG9Cb3hBZGFwdGVyKAogICAgICAgICAgY2hpbGQ6IFBhZGRpbmcoCiAgICAgICAgICAgIHBhZGRpbmc6IFBfTSwKICAgICAgICAgICAgY2hpbGQ6IFNpbXBsZVJpY2hUZXh0KAogICAgICAgICAgICAgIHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MuY29udGFjdERhdGFSYXRpb25hbGUsCiAgICAgICAgICAgICAgc3R5bGU6IFRleHRTdHlsZSgKICAgICAgICAgICAgICAgIGNvbG9yOiBjb250ZXh0LmNvbG9ycy5vblN1cmZhY2UsCiAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICB0ZXh0QWxpZ246IFRleHRBbGlnbi5qdXN0aWZ5LAogICAgICAgICAgICApLAogICAgICAgICAgKSwKICAgICAgICApLAogICAgICAgIFNsaXZlclRvQm94QWRhcHRlcigKICAgICAgICAgIGNoaWxkOiBIb29rQnVpbGRlcihidWlsZGVyOiAoY29udGV4dCkgewogICAgICAgICAgICByZXR1cm4gU2hlZXRJbnB1dCgKICAgICAgICAgICAgICBwYWRkaW5nOiBQSF9NLAogICAgICAgICAgICAgIGtleTogY29uc3QgVmFsdWVLZXkoImNvbnRyaWJ1dG9yTmFtZSIpLAogICAgICAgICAgICAgIHRleHRDb250cm9sbGVyOiBzaGVldENvbnRyb2xsZXIubmFtZUNvbnRyb2xsZXIsCiAgICAgICAgICAgICAgaGludFRleHQ6IHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MubmFtZU9yTmlja05hbWUsCiAgICAgICAgICAgICAgcHJlZml4SWNvbjogY29uc3QgSWNvbihJY29ucy5wZXJzb24pLAogICAgICAgICAgICAgIGVycm9yVGV4dDogdXNlTGlzdGVuYWJsZShzaGVldENvbnRyb2xsZXIubmFtZUVycm9yKS52YWx1ZSwKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pLAogICAgICAgICksCiAgICAgICAgY29uc3QgU2xpdmVyVG9Cb3hBZGFwdGVyKAogICAgICAgICAgY2hpbGQ6IFNWX00sCiAgICAgICAgKSwKICAgICAgICBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgICAgICAgICBjaGlsZDogSG9va0J1aWxkZXIoYnVpbGRlcjogKGNvbnRleHQpIHsKICAgICAgICAgICAgcmV0dXJuIFNoZWV0SW5wdXQoCiAgICAgICAgICAgICAgcGFkZGluZzogUEhfTSwKICAgICAgICAgICAgICBrZXk6IGNvbnN0IFZhbHVlS2V5KCJlbWFpbEFkZHJlc3MiKSwKICAgICAgICAgICAgICB0ZXh0Q29udHJvbGxlcjogc2hlZXRDb250cm9sbGVyLmVtYWlsQ29udHJvbGxlciwKICAgICAgICAgICAgICBoaW50VGV4dDogc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5lbWFpbEFkZHJlc3MsCiAgICAgICAgICAgICAgcHJlZml4SWNvbjogY29uc3QgSWNvbihJY29ucy5lbWFpbF9vdXRsaW5lZCksCiAgICAgICAgICAgICAgZXJyb3JUZXh0OiB1c2VMaXN0ZW5hYmxlKHNoZWV0Q29udHJvbGxlci5lbWFpbEVycm9yKS52YWx1ZSwKICAgICAgICAgICAgKTsKICAgICAgICAgIH0pLAogICAgICAgICksCiAgICAgICAgY29uc3QgU2xpdmVyVG9Cb3hBZGFwdGVyKAogICAgICAgICAgY2hpbGQ6IFNWX00sCiAgICAgICAgKSwKICAgICAgICBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgICAgICAgICBjaGlsZDogSG9va0J1aWxkZXIoYnVpbGRlcjogKGNvbnRleHQpIHsKICAgICAgICAgICAgcmV0dXJuIFNoZWV0SW5wdXQoCiAgICAgICAgICAgICAgcGFkZGluZzogUEhfTSwKICAgICAgICAgICAgICBrZXk6IGNvbnN0IFZhbHVlS2V5KCJ3ZWJzaXRlQWRkcmVzcyIpLAogICAgICAgICAgICAgIHRleHRDb250cm9sbGVyOiBzaGVldENvbnRyb2xsZXIud2ViQ29udHJvbGxlciwKICAgICAgICAgICAgICBoaW50VGV4dDogc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5uYW1lT3JOaWNrTmFtZSwKICAgICAgICAgICAgICBwcmVmaXhJY29uOiBjb25zdCBJY29uKEljb25zLndlYl9zaGFycCksCiAgICAgICAgICAgICAgZXJyb3JUZXh0OiB1c2VMaXN0ZW5hYmxlKHNoZWV0Q29udHJvbGxlci53ZWJFcnJvcikudmFsdWUsCiAgICAgICAgICAgICk7CiAgICAgICAgICB9KSwKICAgICAgICApLAogICAgICAgIGNvbnN0IFNsaXZlclRvQm94QWRhcHRlcigKICAgICAgICAgIGNoaWxkOiBTVl9YTCwKICAgICAgICApLAogICAgICAgIFNsaXZlclRvQm94QWRhcHRlcigKICAgICAgICAgIGNoaWxkOiBQYWRkaW5nKAogICAgICAgICAgICBwYWRkaW5nOiBQSF9NLAogICAgICAgICAgICBjaGlsZDogT3V0bGluZWRCdXR0b24oCiAgICAgICAgICAgICAgb25QcmVzc2VkOiAoKSBhc3luYyB7CiAgICAgICAgICAgICAgICAvLyBkZXRlcm1pbmUgd2hhdCBpcyBuZXh0CiAgICAgICAgICAgICAgICBjb250ZXh0LnJlYWQ8X1NoZWV0c0NvbnRyb2xsZXI+KCkubW92ZVRvQWdyZWVtZW50KCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBjaGlsZDogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLm5leHQpLAogICAgICAgICAgICApLAogICAgICAgICAgKSwKICAgICAgICApLAogICAgICAgIF9ib3R0b21TYWZlUGFkZGluZywKICAgICAgXTsKICAgIH0sCiAgKTsKfQoKU2xpdmVyV29sdE1vZGFsU2hlZXRQYWdlIF9hZ3JlZUFuZFN1Ym1pdCgpIHsKICByZXR1cm4gU2xpdmVyV29sdE1vZGFsU2hlZXRQYWdlKAogICAgaXNUb3BCYXJMYXllckFsd2F5c1Zpc2libGU6IHRydWUsCiAgICBsZWFkaW5nTmF2QmFyV2lkZ2V0OiBjb25zdCBfTGVhZGluZ0J1dHRvbigpLAogICAgdG9wQmFyVGl0bGU6IFRleHQoc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5hZ3JlZW1lbnQpLAogICAgbWFpbkNvbnRlbnRTbGl2ZXJzQnVpbGRlcjogKGNvbnRleHQpID0+IFsKICAgICAgU2xpdmVyVG9Cb3hBZGFwdGVyKAogICAgICAgIGNoaWxkOiBQYWRkaW5nKAogICAgICAgICAgcGFkZGluZzogUF9NLAogICAgICAgICAgY2hpbGQ6IFRleHQoCiAgICAgICAgICAgIHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MuYWdyZWVtZW50Q29udGVudCwKICAgICAgICAgICAgdGV4dEFsaWduOiBUZXh0QWxpZ24uanVzdGlmeSwKICAgICAgICAgICksCiAgICAgICAgKSwKICAgICAgKSwKICAgICAgU2xpdmVyVG9Cb3hBZGFwdGVyKAogICAgICAgIGNoaWxkOiBQYWRkaW5nKAogICAgICAgICAgcGFkZGluZzogUEhfTSwKICAgICAgICAgIGNoaWxkOiBPdXRsaW5lZEJ1dHRvbigKICAgICAgICAgICAgb25QcmVzc2VkOiAoKSBhc3luYyB7CiAgICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIHdoYXQgaXMgbmV4dAogICAgICAgICAgICAgIGNvbnRleHQucmVhZDxfU2hlZXRzQ29udHJvbGxlcj4oKS5zdWJtaXRUcmFuc2xhdGlvbnMoKTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2hpbGQ6IFRleHQoc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy5hZ3JlZUFuZFN1Ym1pdCksCiAgICAgICAgICApLAogICAgICAgICksCiAgICAgICksCiAgICAgIF9ib3R0b21TYWZlUGFkZGluZywKICAgIF0sCiAgKTsKfQoKc2VhbGVkIGNsYXNzIF9EYXRhU3RhdHVzIHsKICBjb25zdCBfRGF0YVN0YXR1cygpOwp9CgpjbGFzcyBfRGF0YVN0YXR1c0lkbGUgZXh0ZW5kcyBfRGF0YVN0YXR1cyB7CiAgY29uc3QgX0RhdGFTdGF0dXNJZGxlKCk7Cn0KCmNsYXNzIF9EYXRhU3RhdHVzT0sgZXh0ZW5kcyBfRGF0YVN0YXR1cyB7CiAgY29uc3QgX0RhdGFTdGF0dXNPSygpOwp9CgpjbGFzcyBfRGF0YVN0YXR1c0ZhaWwgZXh0ZW5kcyBfRGF0YVN0YXR1cyB7CiAgY29uc3QgX0RhdGFTdGF0dXNGYWlsKHRoaXMucmVhc29uKTsKCiAgZmluYWwgZHluYW1pYyByZWFzb247Cn0KCmNsYXNzIF9EYXRhU3RhdHVzSW5Qcm9ncmVzcyBleHRlbmRzIF9EYXRhU3RhdHVzIHsKICBjb25zdCBfRGF0YVN0YXR1c0luUHJvZ3Jlc3MoKTsKfQoKU2xpdmVyV29sdE1vZGFsU2hlZXRQYWdlIF9zZW5kaW5nKCkgewogIHJldHVybiBTbGl2ZXJXb2x0TW9kYWxTaGVldFBhZ2UoCiAgICAgIGlzVG9wQmFyTGF5ZXJBbHdheXNWaXNpYmxlOiB0cnVlLAogICAgICBsZWFkaW5nTmF2QmFyV2lkZ2V0OiBjb25zdCBfTGVhZGluZ0J1dHRvbigpLAogICAgICB0b3BCYXJUaXRsZTogVGV4dChzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnNlbmRpbmdEYXRhKSwKICAgICAgbWFpbkNvbnRlbnRTbGl2ZXJzQnVpbGRlcjogKGNvbnRleHQpIHsKICAgICAgICBmaW5hbCBjb250cm9sbGVyID0gY29udGV4dC5yZWFkPF9TaGVldHNDb250cm9sbGVyPigpOwogICAgICAgIHJldHVybiBbCiAgICAgICAgICBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgICAgICAgICAgIGNoaWxkOiBIb29rQnVpbGRlcihidWlsZGVyOiAoY29udGV4dCkgewogICAgICAgICAgICAgIHVzZUxpc3RlbmFibGUoY29udHJvbGxlci5kYXRhU3RhdHVzKTsKICAgICAgICAgICAgICByZXR1cm4gc3dpdGNoIChjb250cm9sbGVyLmRhdGFTdGF0dXMudmFsdWUpIHsKICAgICAgICAgICAgICAgIF9EYXRhU3RhdHVzRmFpbCg6ZmluYWwgcmVhc29uKSA9PiBDb2x1bW4oCiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFsKICAgICAgICAgICAgICAgICAgICAgIFN0cmluZ1N0b3J5U2VydmljZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5zdGFuY2UuaW5BcHBFZGl0b3JDb25maWcuYnVpbGRFcnJvcldpZGdldAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/LmNhbGwocmVhc29uKSA/PwogICAgICAgICAgICAgICAgICAgICAgICAgIFRleHQocmVhc29uLnRvU3RyaW5nKCkpLAogICAgICAgICAgICAgICAgICAgICAgUGFkZGluZygKICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogUEhfTSwKICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQ6IE91dGxpbmVkQnV0dG9uKAogICAgICAgICAgICAgICAgICAgICAgICAgIG9uUHJlc3NlZDogKCkgYXN5bmMgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZWFkPF9TaGVldHNDb250cm9sbGVyPigpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN1Ym1pdFRyYW5zbGF0aW9ucygpOwogICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgY2hpbGQ6IFRleHQoc3RyaW5nU3RvcnlQYWNrYWdlU3RyaW5ncy50cnlBZ2FpbiksCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgIF9EYXRhU3RhdHVzSW5Qcm9ncmVzcygpID0+IFNoZWV0SW5wdXRIaW50KAogICAgICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MudHJhbnNsYXRpb25zQXJlVXBsb2FkZWQsCiAgICAgICAgICAgICAgICAgICAgc2hvd1NwaW5uZXI6IHRydWUsCiAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAoXykgPT4gY29uc3QgU2l6ZWRCb3goaGVpZ2h0OiBEaW1lbnNpb25zRG91YmxlLnh4bCksCiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSksCiAgICAgICAgICApLAogICAgICAgICAgX2JvdHRvbVNhZmVQYWRkaW5nLAogICAgICAgIF07CiAgICAgIH0pOwp9CgpTbGl2ZXJXb2x0TW9kYWxTaGVldFBhZ2UgX3RoYW5rWW91KCkgewogIHJldHVybiBTbGl2ZXJXb2x0TW9kYWxTaGVldFBhZ2UoCiAgICBpc1RvcEJhckxheWVyQWx3YXlzVmlzaWJsZTogdHJ1ZSwKICAgIHRvcEJhclRpdGxlOiBUZXh0KHN0cmluZ1N0b3J5UGFja2FnZVN0cmluZ3MuYWxsRG9uZSksCiAgICBtYWluQ29udGVudFNsaXZlcnNCdWlsZGVyOiAoY29udGV4dCkgPT4gWwogICAgICBTbGl2ZXJUb0JveEFkYXB0ZXIoCiAgICAgICAgY2hpbGQ6IFBhZGRpbmcoCiAgICAgICAgICBwYWRkaW5nOiBQX00sCiAgICAgICAgICBjaGlsZDogQ29sdW1uKAogICAgICAgICAgICBjcm9zc0F4aXNBbGlnbm1lbnQ6IENyb3NzQXhpc0FsaWdubWVudC5zdHJldGNoLAogICAgICAgICAgICBjaGlsZHJlbjogWwogICAgICAgICAgICAgIFRleHQoCiAgICAgICAgICAgICAgICBzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnRoYW5rWW91SGVhZGxpbmUsCiAgICAgICAgICAgICAgICB0ZXh0QWxpZ246IFRleHRBbGlnbi5jZW50ZXIsCiAgICAgICAgICAgICAgICBzdHlsZTogVGV4dFN0eWxlKGZvbnRTaXplOiBEaW1lbnNpb25zRG91YmxlLnhsKSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIFRleHQoCiAgICAgICAgICAgICAgICBzdHJpbmdTdG9yeVBhY2thZ2VTdHJpbmdzLnRoYW5rWW91U2Vjb25kTGluZSwKICAgICAgICAgICAgICAgIHRleHRBbGlnbjogVGV4dEFsaWduLmNlbnRlciwKICAgICAgICAgICAgICApLAogICAgICAgICAgICBdLAogICAgICAgICAgKSwKICAgICAgICApLAogICAgICApLAogICAgICBfYm90dG9tU2FmZVBhZGRpbmcsCiAgICBdLAogICk7Cn0KCmNsYXNzIF9MZWFkaW5nQnV0dG9uIGV4dGVuZHMgSG9va1dpZGdldCB7CiAgY29uc3QgX0xlYWRpbmdCdXR0b24oKTsKCiAgQG92ZXJyaWRlCiAgV2lkZ2V0IGJ1aWxkKEJ1aWxkQ29udGV4dCBjb250ZXh0KSB7CiAgICBmaW5hbCBjb250cm9sbGVyID0gY29udGV4dC5yZWFkPF9TaGVldHNDb250cm9sbGVyPigpOwogICAgdXNlTGlzdGVuYWJsZShjb250cm9sbGVyLmxpc3RlbmFibGUpOwoKICAgIHJldHVybiBJY29uQnV0dG9uKAogICAgICBwYWRkaW5nOiBQX00sCiAgICAgIGljb246IEljb24oY29udHJvbGxlci5jYW5Hb0JhY2soKSA/IEljb25zLmNoZXZyb25fbGVmdCA6IEljb25zLmNsb3NlKSwKICAgICAgb25QcmVzc2VkOiAoKSBhc3luYyB7CiAgICAgICAgY29udHJvbGxlci5nb0JhY2soKTsKICAgICAgfSwKICAgICk7CiAgfQp9CgpjbGFzcyBfRGlmZldpZGdldCBleHRlbmRzIFN0YXRlbGVzc1dpZGdldCB7CiAgY29uc3QgX0RpZmZXaWRnZXQoewogICAgcmVxdWlyZWQgdGhpcy5zbGFuZ0tleSwKICB9KTsKCiAgZmluYWwgU3RyaW5nIHNsYW5nS2V5OwoKICBAb3ZlcnJpZGUKICBXaWRnZXQgYnVpbGQoQnVpbGRDb250ZXh0IGNvbnRleHQpIHsKICAgIGZpbmFsIChiZWZvcmUsIGFmdGVyKSA9IGNvbnRleHQuc2VsZWN0KChTbGFuZ0VkaXRvckN1Yml0IGN1Yml0KSB7CiAgICAgIGZpbmFsIHN0YXRlID0gY3ViaXQuc3RhdGU7CiAgICAgIHJldHVybiAoc3RhdGUub3ZTbGFuZ0pzb25bc2xhbmdLZXldLCBzdGF0ZS5zbGFuZ0pzb25bc2xhbmdLZXldKTsKICAgIH0pOwoKICAgIFN0cmluZyBwcmV0dHkoZHluYW1pYyB2YWx1ZSkgewogICAgICBpZiAodmFsdWUgaXMgTWFwKSB7CiAgICAgICAgcmV0dXJuIGNvbnN0IEpzb25FbmNvZGVyLndpdGhJbmRlbnQoJyAgJykuY29udmVydCh2YWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gUGFkZGluZygKICAgICAgcGFkZGluZzogUEhfTSArIFBWX1hTLAogICAgICBjaGlsZDogQ29sdW1uKAogICAgICAgIGNyb3NzQXhpc0FsaWdubWVudDogQ3Jvc3NBeGlzQWxpZ25tZW50LnN0YXJ0LAogICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICBTdHJpbmdTdG9yeVNlY3Rpb25XaWRnZXQoCiAgICAgICAgICAgIHNsYW5nS2V5LAogICAgICAgICAgICBwYWRkaW5nOiBFZGdlSW5zZXRzLnplcm8sCiAgICAgICAgICApLAogICAgICAgICAgU1ZfWFMsCiAgICAgICAgICBSb3coCiAgICAgICAgICAgIGNoaWxkcmVuOiBbCiAgICAgICAgICAgICAgRXhwYW5kZWQoCiAgICAgICAgICAgICAgICBmbGV4OiAxLAogICAgICAgICAgICAgICAgY2hpbGQ6IFRleHQoCiAgICAgICAgICAgICAgICAgIHByZXR0eShiZWZvcmUpLAogICAgICAgICAgICAgICAgICBzdHlsZTogY29udGV4dC50ZXh0U3R5bGVzLmxhYmVsTWVkaXVtLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIEljb24oCiAgICAgICAgICAgICAgICBJY29ucy5hcnJvd19mb3J3YXJkLAogICAgICAgICAgICAgICAgc2l6ZTogRGltZW5zaW9uc0RvdWJsZS5tLAogICAgICAgICAgICAgICAgY29sb3I6IGNvbnRleHQuY29sb3JzLnByaW1hcnlGaXhlZERpbSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIFNIX1hTLAogICAgICAgICAgICAgIEV4cGFuZGVkKAogICAgICAgICAgICAgICAgZmxleDogMSwKICAgICAgICAgICAgICAgIGNoaWxkOiBUZXh0KAogICAgICAgICAgICAgICAgICBwcmV0dHkoYWZ0ZXIpLAogICAgICAgICAgICAgICAgICBzdHlsZTogY29udGV4dC50ZXh0U3R5bGVzLmxhYmVsTWVkaXVtLAogICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICApLAogICAgICAgICAgICAgIElua1dlbGwoCiAgICAgICAgICAgICAgICBvblRhcDogKCkgewogICAgICAgICAgICAgICAgICBjb250ZXh0LnJlYWQ8U2xhbmdFZGl0b3JDdWJpdD4oKS5yZXNldEtleShzbGFuZ0tleSk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY2hpbGQ6IEljb24oCiAgICAgICAgICAgICAgICAgIEljb25zLmRlbGV0ZSwKICAgICAgICAgICAgICAgICAgc2l6ZTogRGltZW5zaW9uc0RvdWJsZS5tLAogICAgICAgICAgICAgICAgICBjb2xvcjogY29udGV4dC5jb2xvcnMuZXJyb3IsCiAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICkKICAgICAgICAgICAgXSwKICAgICAgICAgICksCiAgICAgICAgXSwKICAgICAgKSwKICAgICk7CiAgfQp9CgpGdXR1cmU8dm9pZD4gX3N1Ym1pdFRyYW5zbGF0aW9ucyh7CiAgcmVxdWlyZWQgQnVpbGRDb250ZXh0IGNvbnRleHQsCiAgcmVxdWlyZWQgU2xhbmdCYXNlQ3ViaXQgc2xhbmdCYXNlQ3ViaXQsCn0pIGFzeW5jIHsKICBmaW5hbCBkaWZmQ29udGVudCA9IGF3YWl0IHNsYW5nQmFzZUN1Yml0LmV4cG9ydERpZmZDb250ZW50KCk7CgogIGF3YWl0IFN0cmluZ1N0b3J5U2VydmljZS5pbnN0YW5jZS5pbkFwcEVkaXRvckNvbmZpZwogICAgICAuc3VibWl0VHJhbnNsYXRpb25zKGNvbnRleHQsIGRpZmZDb250ZW50LCBfc2xhbmdTdHJpbmdzVmVyc2lvbik7CgogIHNsYW5nQmFzZUN1Yml0Lm1hcmtTdWJtaXR0ZWQoKTsKfQo=';
  static String get assets_locale_submit_sheet_mustache =>
      _decode(_assets_locale_submit_sheet_mustache);
  static const String _assets_generate_translations_prompt_mustache =
      'VHJhbnNsYXRlIHRoZSB0ZXh0IHNwZWNpZmllZCBhZnRlciAnLS0tJyBmcm9tIHRoZSB7e2Zyb219fSBsYW5ndWFnZSB0byB0aGUge3t0b319IGxhbmd1YWdlLgoKS2VlcCB0aGUgb3JpZ2luYWwgZm9ybWF0aW5nIChpbmNsdWRpbmcgbmV3bGluZXMpLCByZXR1cm4gdGhlIHRyYW5zbGF0ZWQgdGV4dCBvbmx5LgoKLS0tCnt7dGV4dH19';
  static String get assets_generate_translations_prompt_mustache =>
      _decode(_assets_generate_translations_prompt_mustache);
}

String _decode(String base64String) => utf8.decode(base64Decode(base64String));
